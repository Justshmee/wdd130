define(["exports","react","./e_folder_viewer_src_main","./c_files_view_data_store","./c_file_viewer_collection_viewer","./c_init_data_runtime","./c_core_utils_kmp_search","./c_lodash-es_lodash","./c_spectrum_util_raf_throttle","./c_ui-icon_line_zip","./c_core_utils_browser_detection","./c_es_hooks_useDispatch","./c_branding_shared_previews_file_viewer_preview","./c_file_viewer_mobile_web_info_chip","./c_file_viewer_ui_header","./c_react_query_helpers_helpers","./e_edison","./c_core_uri","./c_apex-metrics_src_types","./c_init_data_edison","./c_src_sink_index","./e_core_exception","./c_core_xhr","./c_csrf","./c_core_attribution_header","./c_api_v2_noauth_client","./c_api_v2_client_base","./c_core_i18n","metaserver/static/js/langpack","./c_core_notify","react-dom","metaserver/static/js/modules/constants/web_experience_constants","metaserver/static/js/modules/constants/sharing","metaserver/static/js/modules/constants/locales","metaserver/static/js/modules/constants/file_viewer_configuration","metaserver/static/js/modules/constants/file_viewer_feature_experiments","metaserver/static/js/modules/constants/time","metaserver/static/js/modules/constants/login_and_register","metaserver/static/js/modules/constants/fingerprintjs_constants","./c_security_crypto","./c_browse_models","./c_base64","./c_flux_store_listener","./c_growth_ui_api","./c_esm_misc_util","./c_pap-events_navigation_navigate_to_replay","./c_hooks_use_stabilized_callback","./c_stormcrow_gating_factory","./c_stormcrow_types_log_exposure","metaserver/static/js/modules/constants/pdf_editing","./c_ui-icon_line_restore","./c_growth_ui_teams_web_actions_logger_events","metaserver/static/js/modules/constants/search","./c_toolkit_dist_redux-toolkit","./c_home_store","./c_plugin_utils_getImageDefaultSizes","metaserver/static/js/modules/constants/unity","./c_referrer_cleansing_redirect","./c_cloud_docs_types","./c_keymaster","./c_ui-icon_line_zoom-out","./c_campaigns_campaign_enums","./c_bolt_metaserver_clients","./c_skeleton_index","./c_ui-icon_line_team","./c_stormcrow_explicit_exposure_logging","metaserver/static/js/modules/constants/viewer","./c_flows_logging_flows_loggers","./c_flux_base_store","./c_cloud_docs_constants","./c_chips_index","./c_chip_index","metaserver/static/js/modules/constants/contacts","./c_spectrum_colorized_icon","./c_spectrum_svg_icon_bundle","./c_spectrum_positioned_portal","./c_user_centric_perf_metrics_component_visually_complete_component_visually_complete_calculator","./c_plugin_utils_drawWatermarkOnCanvas","./c_resize-observer-polyfill_dist_ResizeObserver","./c_badges_index","./c_badge_index","./c_react-error-boundary","./c_core_utils_time_utils","./c_preview_audio_video_helper_utils"],(function(e,t,n,i,a,r,o,s,l,c,d,g,u,h,p,f,m,v,_,b,w,L,x,N,S,A,E,I,C,P,y,D,M,k,F,T,O,R,B,U,H,V,K,j,z,W,q,$,G,X,J,Y,Q,Z,ee,te,ne,ie,ae,re,oe,se,le,ce,de,ge,ue,he,pe,fe,me,ve,_e,be,we,Le,xe,Ne,Se,Ae,Ee,Ie,Ce,Pe){"use strict";function ye(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})}})),t.default=e,Object.freeze(t)}var De=ye(t);const Me=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","ON","ON","ET","ET","ET","ON","ON","ON","ON","ON","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","ON","ON","ON","ON","ON","ON","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","ON","ON","ON","ON","ON","ON","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","ON","ON","ON","ON","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","ON","ET","ET","ET","ET","ON","ON","ON","ON","L","ON","ON","BN","ON","ON","ET","ET","EN","EN","ON","L","ON","ON","ON","EN","L","ON","ON","ON","ON","ON","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","ON","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","ON","L","L","L","L","L","L","L","L"],ke=["AN","AN","AN","AN","AN","AN","ON","ON","AL","ET","ET","AL","CS","AL","ON","ON","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","ON","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","ON","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL"];function Fe(e){return!!(1&e)}function Te(e){return!(1&e)}function Oe(e,t,n){for(var i=t,a=e.length;i<a;++i)if(e[i]!==n)return i;return i}function Re(e,t,n,i){for(var a=t;a<n;++a)e[a]=i}function Be(e,t,n){for(var i=t,a=n-1;i<a;++i,--a){var r=e[i];e[i]=e[a],e[a]=r}}function Ue(e,t,n){return{str:e,dir:n?"ttb":t?"ltr":"rtl"}}let He=[],Ve=[];var Ke=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}];var je,ze,We,qe,$e=(je=function(e){e["¨"]=" ̈",e["¯"]=" ̄",e["´"]=" ́",e["µ"]="μ",e["¸"]=" ̧",e["Ĳ"]="IJ",e["ĳ"]="ij",e["Ŀ"]="L·",e["ŀ"]="l·",e["ŉ"]="ʼn",e["ſ"]="s",e["Ǆ"]="DŽ",e["ǅ"]="Dž",e["ǆ"]="dž",e["Ǉ"]="LJ",e["ǈ"]="Lj",e["ǉ"]="lj",e["Ǌ"]="NJ",e["ǋ"]="Nj",e["ǌ"]="nj",e["Ǳ"]="DZ",e["ǲ"]="Dz",e["ǳ"]="dz",e["˘"]=" ̆",e["˙"]=" ̇",e["˚"]=" ̊",e["˛"]=" ̨",e["˜"]=" ̃",e["˝"]=" ̋",e["ͺ"]=" ͅ",e["΄"]=" ́",e["ϐ"]="β",e["ϑ"]="θ",e["ϒ"]="Υ",e["ϕ"]="φ",e["ϖ"]="π",e["ϰ"]="κ",e["ϱ"]="ρ",e["ϲ"]="ς",e["ϴ"]="Θ",e["ϵ"]="ε",e["Ϲ"]="Σ",e["և"]="եւ",e["ٵ"]="اٴ",e["ٶ"]="وٴ",e["ٷ"]="ۇٴ",e["ٸ"]="يٴ",e["ำ"]="ํา",e["ຳ"]="ໍາ",e["ໜ"]="ຫນ",e["ໝ"]="ຫມ",e["ཷ"]="ྲཱྀ",e["ཹ"]="ླཱྀ",e["ẚ"]="aʾ",e["᾽"]=" ̓",e["᾿"]=" ̓",e["῀"]=" ͂",e["῾"]=" ̔",e[" "]=" ",e[" "]=" ",e[" "]=" ",e[" "]=" ",e[" "]=" ",e[" "]=" ",e[" "]=" ",e[" "]=" ",e["‗"]=" ̳",e["․"]=".",e["‥"]="..",e["…"]="...",e["″"]="′′",e["‴"]="′′′",e["‶"]="‵‵",e["‷"]="‵‵‵",e["‼"]="!!",e["‾"]=" ̅",e["⁇"]="??",e["⁈"]="?!",e["⁉"]="!?",e["⁗"]="′′′′",e[" "]=" ",e["₨"]="Rs",e["℀"]="a/c",e["℁"]="a/s",e["℃"]="°C",e["℅"]="c/o",e["℆"]="c/u",e["ℇ"]="Ɛ",e["℉"]="°F",e["№"]="No",e["℡"]="TEL",e["ℵ"]="א",e["ℶ"]="ב",e["ℷ"]="ג",e["ℸ"]="ד",e["℻"]="FAX",e["Ⅰ"]="I",e["Ⅱ"]="II",e["Ⅲ"]="III",e["Ⅳ"]="IV",e["Ⅴ"]="V",e["Ⅵ"]="VI",e["Ⅶ"]="VII",e["Ⅷ"]="VIII",e["Ⅸ"]="IX",e["Ⅹ"]="X",e["Ⅺ"]="XI",e["Ⅻ"]="XII",e["Ⅼ"]="L",e["Ⅽ"]="C",e["Ⅾ"]="D",e["Ⅿ"]="M",e["ⅰ"]="i",e["ⅱ"]="ii",e["ⅲ"]="iii",e["ⅳ"]="iv",e["ⅴ"]="v",e["ⅵ"]="vi",e["ⅶ"]="vii",e["ⅷ"]="viii",e["ⅸ"]="ix",e["ⅹ"]="x",e["ⅺ"]="xi",e["ⅻ"]="xii",e["ⅼ"]="l",e["ⅽ"]="c",e["ⅾ"]="d",e["ⅿ"]="m",e["∬"]="∫∫",e["∭"]="∫∫∫",e["∯"]="∮∮",e["∰"]="∮∮∮",e["⑴"]="(1)",e["⑵"]="(2)",e["⑶"]="(3)",e["⑷"]="(4)",e["⑸"]="(5)",e["⑹"]="(6)",e["⑺"]="(7)",e["⑻"]="(8)",e["⑼"]="(9)",e["⑽"]="(10)",e["⑾"]="(11)",e["⑿"]="(12)",e["⒀"]="(13)",e["⒁"]="(14)",e["⒂"]="(15)",e["⒃"]="(16)",e["⒄"]="(17)",e["⒅"]="(18)",e["⒆"]="(19)",e["⒇"]="(20)",e["⒈"]="1.",e["⒉"]="2.",e["⒊"]="3.",e["⒋"]="4.",e["⒌"]="5.",e["⒍"]="6.",e["⒎"]="7.",e["⒏"]="8.",e["⒐"]="9.",e["⒑"]="10.",e["⒒"]="11.",e["⒓"]="12.",e["⒔"]="13.",e["⒕"]="14.",e["⒖"]="15.",e["⒗"]="16.",e["⒘"]="17.",e["⒙"]="18.",e["⒚"]="19.",e["⒛"]="20.",e["⒜"]="(a)",e["⒝"]="(b)",e["⒞"]="(c)",e["⒟"]="(d)",e["⒠"]="(e)",e["⒡"]="(f)",e["⒢"]="(g)",e["⒣"]="(h)",e["⒤"]="(i)",e["⒥"]="(j)",e["⒦"]="(k)",e["⒧"]="(l)",e["⒨"]="(m)",e["⒩"]="(n)",e["⒪"]="(o)",e["⒫"]="(p)",e["⒬"]="(q)",e["⒭"]="(r)",e["⒮"]="(s)",e["⒯"]="(t)",e["⒰"]="(u)",e["⒱"]="(v)",e["⒲"]="(w)",e["⒳"]="(x)",e["⒴"]="(y)",e["⒵"]="(z)",e["⨌"]="∫∫∫∫",e["⩴"]="::=",e["⩵"]="==",e["⩶"]="===",e["⺟"]="母",e["⻳"]="龟",e["⼀"]="一",e["⼁"]="丨",e["⼂"]="丶",e["⼃"]="丿",e["⼄"]="乙",e["⼅"]="亅",e["⼆"]="二",e["⼇"]="亠",e["⼈"]="人",e["⼉"]="儿",e["⼊"]="入",e["⼋"]="八",e["⼌"]="冂",e["⼍"]="冖",e["⼎"]="冫",e["⼏"]="几",e["⼐"]="凵",e["⼑"]="刀",e["⼒"]="力",e["⼓"]="勹",e["⼔"]="匕",e["⼕"]="匚",e["⼖"]="匸",e["⼗"]="十",e["⼘"]="卜",e["⼙"]="卩",e["⼚"]="厂",e["⼛"]="厶",e["⼜"]="又",e["⼝"]="口",e["⼞"]="囗",e["⼟"]="土",e["⼠"]="士",e["⼡"]="夂",e["⼢"]="夊",e["⼣"]="夕",e["⼤"]="大",e["⼥"]="女",e["⼦"]="子",e["⼧"]="宀",e["⼨"]="寸",e["⼩"]="小",e["⼪"]="尢",e["⼫"]="尸",e["⼬"]="屮",e["⼭"]="山",e["⼮"]="巛",e["⼯"]="工",e["⼰"]="己",e["⼱"]="巾",e["⼲"]="干",e["⼳"]="幺",e["⼴"]="广",e["⼵"]="廴",e["⼶"]="廾",e["⼷"]="弋",e["⼸"]="弓",e["⼹"]="彐",e["⼺"]="彡",e["⼻"]="彳",e["⼼"]="心",e["⼽"]="戈",e["⼾"]="戶",e["⼿"]="手",e["⽀"]="支",e["⽁"]="攴",e["⽂"]="文",e["⽃"]="斗",e["⽄"]="斤",e["⽅"]="方",e["⽆"]="无",e["⽇"]="日",e["⽈"]="曰",e["⽉"]="月",e["⽊"]="木",e["⽋"]="欠",e["⽌"]="止",e["⽍"]="歹",e["⽎"]="殳",e["⽏"]="毋",e["⽐"]="比",e["⽑"]="毛",e["⽒"]="氏",e["⽓"]="气",e["⽔"]="水",e["⽕"]="火",e["⽖"]="爪",e["⽗"]="父",e["⽘"]="爻",e["⽙"]="爿",e["⽚"]="片",e["⽛"]="牙",e["⽜"]="牛",e["⽝"]="犬",e["⽞"]="玄",e["⽟"]="玉",e["⽠"]="瓜",e["⽡"]="瓦",e["⽢"]="甘",e["⽣"]="生",e["⽤"]="用",e["⽥"]="田",e["⽦"]="疋",e["⽧"]="疒",e["⽨"]="癶",e["⽩"]="白",e["⽪"]="皮",e["⽫"]="皿",e["⽬"]="目",e["⽭"]="矛",e["⽮"]="矢",e["⽯"]="石",e["⽰"]="示",e["⽱"]="禸",e["⽲"]="禾",e["⽳"]="穴",e["⽴"]="立",e["⽵"]="竹",e["⽶"]="米",e["⽷"]="糸",e["⽸"]="缶",e["⽹"]="网",e["⽺"]="羊",e["⽻"]="羽",e["⽼"]="老",e["⽽"]="而",e["⽾"]="耒",e["⽿"]="耳",e["⾀"]="聿",e["⾁"]="肉",e["⾂"]="臣",e["⾃"]="自",e["⾄"]="至",e["⾅"]="臼",e["⾆"]="舌",e["⾇"]="舛",e["⾈"]="舟",e["⾉"]="艮",e["⾊"]="色",e["⾋"]="艸",e["⾌"]="虍",e["⾍"]="虫",e["⾎"]="血",e["⾏"]="行",e["⾐"]="衣",e["⾑"]="襾",e["⾒"]="見",e["⾓"]="角",e["⾔"]="言",e["⾕"]="谷",e["⾖"]="豆",e["⾗"]="豕",e["⾘"]="豸",e["⾙"]="貝",e["⾚"]="赤",e["⾛"]="走",e["⾜"]="足",e["⾝"]="身",e["⾞"]="車",e["⾟"]="辛",e["⾠"]="辰",e["⾡"]="辵",e["⾢"]="邑",e["⾣"]="酉",e["⾤"]="釆",e["⾥"]="里",e["⾦"]="金",e["⾧"]="長",e["⾨"]="門",e["⾩"]="阜",e["⾪"]="隶",e["⾫"]="隹",e["⾬"]="雨",e["⾭"]="靑",e["⾮"]="非",e["⾯"]="面",e["⾰"]="革",e["⾱"]="韋",e["⾲"]="韭",e["⾳"]="音",e["⾴"]="頁",e["⾵"]="風",e["⾶"]="飛",e["⾷"]="食",e["⾸"]="首",e["⾹"]="香",e["⾺"]="馬",e["⾻"]="骨",e["⾼"]="高",e["⾽"]="髟",e["⾾"]="鬥",e["⾿"]="鬯",e["⿀"]="鬲",e["⿁"]="鬼",e["⿂"]="魚",e["⿃"]="鳥",e["⿄"]="鹵",e["⿅"]="鹿",e["⿆"]="麥",e["⿇"]="麻",e["⿈"]="黃",e["⿉"]="黍",e["⿊"]="黑",e["⿋"]="黹",e["⿌"]="黽",e["⿍"]="鼎",e["⿎"]="鼓",e["⿏"]="鼠",e["⿐"]="鼻",e["⿑"]="齊",e["⿒"]="齒",e["⿓"]="龍",e["⿔"]="龜",e["⿕"]="龠",e["〶"]="〒",e["〸"]="十",e["〹"]="卄",e["〺"]="卅",e["゛"]=" ゙",e["゜"]=" ゚",e["ㄱ"]="ᄀ",e["ㄲ"]="ᄁ",e["ㄳ"]="ᆪ",e["ㄴ"]="ᄂ",e["ㄵ"]="ᆬ",e["ㄶ"]="ᆭ",e["ㄷ"]="ᄃ",e["ㄸ"]="ᄄ",e["ㄹ"]="ᄅ",e["ㄺ"]="ᆰ",e["ㄻ"]="ᆱ",e["ㄼ"]="ᆲ",e["ㄽ"]="ᆳ",e["ㄾ"]="ᆴ",e["ㄿ"]="ᆵ",e["ㅀ"]="ᄚ",e["ㅁ"]="ᄆ",e["ㅂ"]="ᄇ",e["ㅃ"]="ᄈ",e["ㅄ"]="ᄡ",e["ㅅ"]="ᄉ",e["ㅆ"]="ᄊ",e["ㅇ"]="ᄋ",e["ㅈ"]="ᄌ",e["ㅉ"]="ᄍ",e["ㅊ"]="ᄎ",e["ㅋ"]="ᄏ",e["ㅌ"]="ᄐ",e["ㅍ"]="ᄑ",e["ㅎ"]="ᄒ",e["ㅏ"]="ᅡ",e["ㅐ"]="ᅢ",e["ㅑ"]="ᅣ",e["ㅒ"]="ᅤ",e["ㅓ"]="ᅥ",e["ㅔ"]="ᅦ",e["ㅕ"]="ᅧ",e["ㅖ"]="ᅨ",e["ㅗ"]="ᅩ",e["ㅘ"]="ᅪ",e["ㅙ"]="ᅫ",e["ㅚ"]="ᅬ",e["ㅛ"]="ᅭ",e["ㅜ"]="ᅮ",e["ㅝ"]="ᅯ",e["ㅞ"]="ᅰ",e["ㅟ"]="ᅱ",e["ㅠ"]="ᅲ",e["ㅡ"]="ᅳ",e["ㅢ"]="ᅴ",e["ㅣ"]="ᅵ",e["ㅤ"]="ᅠ",e["ㅥ"]="ᄔ",e["ㅦ"]="ᄕ",e["ㅧ"]="ᇇ",e["ㅨ"]="ᇈ",e["ㅩ"]="ᇌ",e["ㅪ"]="ᇎ",e["ㅫ"]="ᇓ",e["ㅬ"]="ᇗ",e["ㅭ"]="ᇙ",e["ㅮ"]="ᄜ",e["ㅯ"]="ᇝ",e["ㅰ"]="ᇟ",e["ㅱ"]="ᄝ",e["ㅲ"]="ᄞ",e["ㅳ"]="ᄠ",e["ㅴ"]="ᄢ",e["ㅵ"]="ᄣ",e["ㅶ"]="ᄧ",e["ㅷ"]="ᄩ",e["ㅸ"]="ᄫ",e["ㅹ"]="ᄬ",e["ㅺ"]="ᄭ",e["ㅻ"]="ᄮ",e["ㅼ"]="ᄯ",e["ㅽ"]="ᄲ",e["ㅾ"]="ᄶ",e["ㅿ"]="ᅀ",e["ㆀ"]="ᅇ",e["ㆁ"]="ᅌ",e["ㆂ"]="ᇱ",e["ㆃ"]="ᇲ",e["ㆄ"]="ᅗ",e["ㆅ"]="ᅘ",e["ㆆ"]="ᅙ",e["ㆇ"]="ᆄ",e["ㆈ"]="ᆅ",e["ㆉ"]="ᆈ",e["ㆊ"]="ᆑ",e["ㆋ"]="ᆒ",e["ㆌ"]="ᆔ",e["ㆍ"]="ᆞ",e["ㆎ"]="ᆡ",e["㈀"]="(ᄀ)",e["㈁"]="(ᄂ)",e["㈂"]="(ᄃ)",e["㈃"]="(ᄅ)",e["㈄"]="(ᄆ)",e["㈅"]="(ᄇ)",e["㈆"]="(ᄉ)",e["㈇"]="(ᄋ)",e["㈈"]="(ᄌ)",e["㈉"]="(ᄎ)",e["㈊"]="(ᄏ)",e["㈋"]="(ᄐ)",e["㈌"]="(ᄑ)",e["㈍"]="(ᄒ)",e["㈎"]="(가)",e["㈏"]="(나)",e["㈐"]="(다)",e["㈑"]="(라)",e["㈒"]="(마)",e["㈓"]="(바)",e["㈔"]="(사)",e["㈕"]="(아)",e["㈖"]="(자)",e["㈗"]="(차)",e["㈘"]="(카)",e["㈙"]="(타)",e["㈚"]="(파)",e["㈛"]="(하)",e["㈜"]="(주)",e["㈝"]="(오전)",e["㈞"]="(오후)",e["㈠"]="(一)",e["㈡"]="(二)",e["㈢"]="(三)",e["㈣"]="(四)",e["㈤"]="(五)",e["㈥"]="(六)",e["㈦"]="(七)",e["㈧"]="(八)",e["㈨"]="(九)",e["㈩"]="(十)",e["㈪"]="(月)",e["㈫"]="(火)",e["㈬"]="(水)",e["㈭"]="(木)",e["㈮"]="(金)",e["㈯"]="(土)",e["㈰"]="(日)",e["㈱"]="(株)",e["㈲"]="(有)",e["㈳"]="(社)",e["㈴"]="(名)",e["㈵"]="(特)",e["㈶"]="(財)",e["㈷"]="(祝)",e["㈸"]="(労)",e["㈹"]="(代)",e["㈺"]="(呼)",e["㈻"]="(学)",e["㈼"]="(監)",e["㈽"]="(企)",e["㈾"]="(資)",e["㈿"]="(協)",e["㉀"]="(祭)",e["㉁"]="(休)",e["㉂"]="(自)",e["㉃"]="(至)",e["㋀"]="1月",e["㋁"]="2月",e["㋂"]="3月",e["㋃"]="4月",e["㋄"]="5月",e["㋅"]="6月",e["㋆"]="7月",e["㋇"]="8月",e["㋈"]="9月",e["㋉"]="10月",e["㋊"]="11月",e["㋋"]="12月",e["㍘"]="0点",e["㍙"]="1点",e["㍚"]="2点",e["㍛"]="3点",e["㍜"]="4点",e["㍝"]="5点",e["㍞"]="6点",e["㍟"]="7点",e["㍠"]="8点",e["㍡"]="9点",e["㍢"]="10点",e["㍣"]="11点",e["㍤"]="12点",e["㍥"]="13点",e["㍦"]="14点",e["㍧"]="15点",e["㍨"]="16点",e["㍩"]="17点",e["㍪"]="18点",e["㍫"]="19点",e["㍬"]="20点",e["㍭"]="21点",e["㍮"]="22点",e["㍯"]="23点",e["㍰"]="24点",e["㏠"]="1日",e["㏡"]="2日",e["㏢"]="3日",e["㏣"]="4日",e["㏤"]="5日",e["㏥"]="6日",e["㏦"]="7日",e["㏧"]="8日",e["㏨"]="9日",e["㏩"]="10日",e["㏪"]="11日",e["㏫"]="12日",e["㏬"]="13日",e["㏭"]="14日",e["㏮"]="15日",e["㏯"]="16日",e["㏰"]="17日",e["㏱"]="18日",e["㏲"]="19日",e["㏳"]="20日",e["㏴"]="21日",e["㏵"]="22日",e["㏶"]="23日",e["㏷"]="24日",e["㏸"]="25日",e["㏹"]="26日",e["㏺"]="27日",e["㏻"]="28日",e["㏼"]="29日",e["㏽"]="30日",e["㏾"]="31日",e["ﬀ"]="ff",e["ﬁ"]="fi",e["ﬂ"]="fl",e["ﬃ"]="ffi",e["ﬄ"]="ffl",e["ﬅ"]="ſt",e["ﬆ"]="st",e["ﬓ"]="մն",e["ﬔ"]="մե",e["ﬕ"]="մի",e["ﬖ"]="վն",e["ﬗ"]="մխ",e["ﭏ"]="אל",e["ﭐ"]="ٱ",e["ﭑ"]="ٱ",e["ﭒ"]="ٻ",e["ﭓ"]="ٻ",e["ﭔ"]="ٻ",e["ﭕ"]="ٻ",e["ﭖ"]="پ",e["ﭗ"]="پ",e["ﭘ"]="پ",e["ﭙ"]="پ",e["ﭚ"]="ڀ",e["ﭛ"]="ڀ",e["ﭜ"]="ڀ",e["ﭝ"]="ڀ",e["ﭞ"]="ٺ",e["ﭟ"]="ٺ",e["ﭠ"]="ٺ",e["ﭡ"]="ٺ",e["ﭢ"]="ٿ",e["ﭣ"]="ٿ",e["ﭤ"]="ٿ",e["ﭥ"]="ٿ",e["ﭦ"]="ٹ",e["ﭧ"]="ٹ",e["ﭨ"]="ٹ",e["ﭩ"]="ٹ",e["ﭪ"]="ڤ",e["ﭫ"]="ڤ",e["ﭬ"]="ڤ",e["ﭭ"]="ڤ",e["ﭮ"]="ڦ",e["ﭯ"]="ڦ",e["ﭰ"]="ڦ",e["ﭱ"]="ڦ",e["ﭲ"]="ڄ",e["ﭳ"]="ڄ",e["ﭴ"]="ڄ",e["ﭵ"]="ڄ",e["ﭶ"]="ڃ",e["ﭷ"]="ڃ",e["ﭸ"]="ڃ",e["ﭹ"]="ڃ",e["ﭺ"]="چ",e["ﭻ"]="چ",e["ﭼ"]="چ",e["ﭽ"]="چ",e["ﭾ"]="ڇ",e["ﭿ"]="ڇ",e["ﮀ"]="ڇ",e["ﮁ"]="ڇ",e["ﮂ"]="ڍ",e["ﮃ"]="ڍ",e["ﮄ"]="ڌ",e["ﮅ"]="ڌ",e["ﮆ"]="ڎ",e["ﮇ"]="ڎ",e["ﮈ"]="ڈ",e["ﮉ"]="ڈ",e["ﮊ"]="ژ",e["ﮋ"]="ژ",e["ﮌ"]="ڑ",e["ﮍ"]="ڑ",e["ﮎ"]="ک",e["ﮏ"]="ک",e["ﮐ"]="ک",e["ﮑ"]="ک",e["ﮒ"]="گ",e["ﮓ"]="گ",e["ﮔ"]="گ",e["ﮕ"]="گ",e["ﮖ"]="ڳ",e["ﮗ"]="ڳ",e["ﮘ"]="ڳ",e["ﮙ"]="ڳ",e["ﮚ"]="ڱ",e["ﮛ"]="ڱ",e["ﮜ"]="ڱ",e["ﮝ"]="ڱ",e["ﮞ"]="ں",e["ﮟ"]="ں",e["ﮠ"]="ڻ",e["ﮡ"]="ڻ",e["ﮢ"]="ڻ",e["ﮣ"]="ڻ",e["ﮤ"]="ۀ",e["ﮥ"]="ۀ",e["ﮦ"]="ہ",e["ﮧ"]="ہ",e["ﮨ"]="ہ",e["ﮩ"]="ہ",e["ﮪ"]="ھ",e["ﮫ"]="ھ",e["ﮬ"]="ھ",e["ﮭ"]="ھ",e["ﮮ"]="ے",e["ﮯ"]="ے",e["ﮰ"]="ۓ",e["ﮱ"]="ۓ",e["ﯓ"]="ڭ",e["ﯔ"]="ڭ",e["ﯕ"]="ڭ",e["ﯖ"]="ڭ",e["ﯗ"]="ۇ",e["ﯘ"]="ۇ",e["ﯙ"]="ۆ",e["ﯚ"]="ۆ",e["ﯛ"]="ۈ",e["ﯜ"]="ۈ",e["ﯝ"]="ٷ",e["ﯞ"]="ۋ",e["ﯟ"]="ۋ",e["ﯠ"]="ۅ",e["ﯡ"]="ۅ",e["ﯢ"]="ۉ",e["ﯣ"]="ۉ",e["ﯤ"]="ې",e["ﯥ"]="ې",e["ﯦ"]="ې",e["ﯧ"]="ې",e["ﯨ"]="ى",e["ﯩ"]="ى",e["ﯪ"]="ئا",e["ﯫ"]="ئا",e["ﯬ"]="ئە",e["ﯭ"]="ئە",e["ﯮ"]="ئو",e["ﯯ"]="ئو",e["ﯰ"]="ئۇ",e["ﯱ"]="ئۇ",e["ﯲ"]="ئۆ",e["ﯳ"]="ئۆ",e["ﯴ"]="ئۈ",e["ﯵ"]="ئۈ",e["ﯶ"]="ئې";e["ﯷ"]="ئې",e["ﯸ"]="ئې",e["ﯹ"]="ئى",e["ﯺ"]="ئى",e["ﯻ"]="ئى",e["ﯼ"]="ی",e["ﯽ"]="ی",e["ﯾ"]="ی",e["ﯿ"]="ی",e["ﰀ"]="ئج",e["ﰁ"]="ئح",e["ﰂ"]="ئم",e["ﰃ"]="ئى",e["ﰄ"]="ئي",e["ﰅ"]="بج",e["ﰆ"]="بح",e["ﰇ"]="بخ",e["ﰈ"]="بم",e["ﰉ"]="بى",e["ﰊ"]="بي",e["ﰋ"]="تج",e["ﰌ"]="تح",e["ﰍ"]="تخ",e["ﰎ"]="تم",e["ﰏ"]="تى",e["ﰐ"]="تي",e["ﰑ"]="ثج",e["ﰒ"]="ثم",e["ﰓ"]="ثى",e["ﰔ"]="ثي",e["ﰕ"]="جح",e["ﰖ"]="جم",e["ﰗ"]="حج",e["ﰘ"]="حم",e["ﰙ"]="خج",e["ﰚ"]="خح",e["ﰛ"]="خم",e["ﰜ"]="سج",e["ﰝ"]="سح",e["ﰞ"]="سخ",e["ﰟ"]="سم",e["ﰠ"]="صح",e["ﰡ"]="صم",e["ﰢ"]="ضج",e["ﰣ"]="ضح",e["ﰤ"]="ضخ",e["ﰥ"]="ضم",e["ﰦ"]="طح",e["ﰧ"]="طم",e["ﰨ"]="ظم",e["ﰩ"]="عج",e["ﰪ"]="عم",e["ﰫ"]="غج",e["ﰬ"]="غم",e["ﰭ"]="فج",e["ﰮ"]="فح",e["ﰯ"]="فخ",e["ﰰ"]="فم",e["ﰱ"]="فى",e["ﰲ"]="في",e["ﰳ"]="قح",e["ﰴ"]="قم",e["ﰵ"]="قى",e["ﰶ"]="قي",e["ﰷ"]="كا",e["ﰸ"]="كج",e["ﰹ"]="كح",e["ﰺ"]="كخ",e["ﰻ"]="كل",e["ﰼ"]="كم",e["ﰽ"]="كى",e["ﰾ"]="كي",e["ﰿ"]="لج",e["ﱀ"]="لح",e["ﱁ"]="لخ",e["ﱂ"]="لم",e["ﱃ"]="لى",e["ﱄ"]="لي",e["ﱅ"]="مج",e["ﱆ"]="مح",e["ﱇ"]="مخ",e["ﱈ"]="مم",e["ﱉ"]="مى",e["ﱊ"]="مي",e["ﱋ"]="نج",e["ﱌ"]="نح",e["ﱍ"]="نخ",e["ﱎ"]="نم",e["ﱏ"]="نى",e["ﱐ"]="ني",e["ﱑ"]="هج",e["ﱒ"]="هم",e["ﱓ"]="هى",e["ﱔ"]="هي",e["ﱕ"]="يج",e["ﱖ"]="يح",e["ﱗ"]="يخ",e["ﱘ"]="يم",e["ﱙ"]="يى",e["ﱚ"]="يي",e["ﱛ"]="ذٰ",e["ﱜ"]="رٰ",e["ﱝ"]="ىٰ",e["ﱞ"]=" ٌّ",e["ﱟ"]=" ٍّ",e["ﱠ"]=" َّ",e["ﱡ"]=" ُّ",e["ﱢ"]=" ِّ",e["ﱣ"]=" ّٰ",e["ﱤ"]="ئر",e["ﱥ"]="ئز",e["ﱦ"]="ئم",e["ﱧ"]="ئن",e["ﱨ"]="ئى",e["ﱩ"]="ئي",e["ﱪ"]="بر",e["ﱫ"]="بز",e["ﱬ"]="بم",e["ﱭ"]="بن",e["ﱮ"]="بى",e["ﱯ"]="بي",e["ﱰ"]="تر",e["ﱱ"]="تز",e["ﱲ"]="تم",e["ﱳ"]="تن",e["ﱴ"]="تى",e["ﱵ"]="تي",e["ﱶ"]="ثر",e["ﱷ"]="ثز",e["ﱸ"]="ثم",e["ﱹ"]="ثن",e["ﱺ"]="ثى",e["ﱻ"]="ثي",e["ﱼ"]="فى",e["ﱽ"]="في",e["ﱾ"]="قى",e["ﱿ"]="قي",e["ﲀ"]="كا",e["ﲁ"]="كل",e["ﲂ"]="كم",e["ﲃ"]="كى",e["ﲄ"]="كي",e["ﲅ"]="لم",e["ﲆ"]="لى",e["ﲇ"]="لي",e["ﲈ"]="ما",e["ﲉ"]="مم",e["ﲊ"]="نر",e["ﲋ"]="نز",e["ﲌ"]="نم",e["ﲍ"]="نن",e["ﲎ"]="نى",e["ﲏ"]="ني",e["ﲐ"]="ىٰ",e["ﲑ"]="ير",e["ﲒ"]="يز",e["ﲓ"]="يم",e["ﲔ"]="ين",e["ﲕ"]="يى",e["ﲖ"]="يي",e["ﲗ"]="ئج",e["ﲘ"]="ئح",e["ﲙ"]="ئخ",e["ﲚ"]="ئم",e["ﲛ"]="ئه",e["ﲜ"]="بج",e["ﲝ"]="بح",e["ﲞ"]="بخ",e["ﲟ"]="بم",e["ﲠ"]="به",e["ﲡ"]="تج",e["ﲢ"]="تح",e["ﲣ"]="تخ",e["ﲤ"]="تم",e["ﲥ"]="ته",e["ﲦ"]="ثم",e["ﲧ"]="جح",e["ﲨ"]="جم",e["ﲩ"]="حج",e["ﲪ"]="حم",e["ﲫ"]="خج",e["ﲬ"]="خم",e["ﲭ"]="سج",e["ﲮ"]="سح",e["ﲯ"]="سخ",e["ﲰ"]="سم",e["ﲱ"]="صح",e["ﲲ"]="صخ",e["ﲳ"]="صم",e["ﲴ"]="ضج",e["ﲵ"]="ضح",e["ﲶ"]="ضخ",e["ﲷ"]="ضم",e["ﲸ"]="طح",e["ﲹ"]="ظم",e["ﲺ"]="عج",e["ﲻ"]="عم",e["ﲼ"]="غج",e["ﲽ"]="غم",e["ﲾ"]="فج",e["ﲿ"]="فح",e["ﳀ"]="فخ",e["ﳁ"]="فم",e["ﳂ"]="قح",e["ﳃ"]="قم",e["ﳄ"]="كج",e["ﳅ"]="كح",e["ﳆ"]="كخ",e["ﳇ"]="كل",e["ﳈ"]="كم",e["ﳉ"]="لج",e["ﳊ"]="لح",e["ﳋ"]="لخ",e["ﳌ"]="لم",e["ﳍ"]="له",e["ﳎ"]="مج",e["ﳏ"]="مح",e["ﳐ"]="مخ",e["ﳑ"]="مم",e["ﳒ"]="نج",e["ﳓ"]="نح",e["ﳔ"]="نخ",e["ﳕ"]="نم",e["ﳖ"]="نه",e["ﳗ"]="هج",e["ﳘ"]="هم",e["ﳙ"]="هٰ",e["ﳚ"]="يج",e["ﳛ"]="يح",e["ﳜ"]="يخ",e["ﳝ"]="يم",e["ﳞ"]="يه",e["ﳟ"]="ئم",e["ﳠ"]="ئه",e["ﳡ"]="بم",e["ﳢ"]="به",e["ﳣ"]="تم",e["ﳤ"]="ته",e["ﳥ"]="ثم",e["ﳦ"]="ثه",e["ﳧ"]="سم",e["ﳨ"]="سه",e["ﳩ"]="شم",e["ﳪ"]="شه",e["ﳫ"]="كل",e["ﳬ"]="كم",e["ﳭ"]="لم",e["ﳮ"]="نم",e["ﳯ"]="نه",e["ﳰ"]="يم",e["ﳱ"]="يه",e["ﳲ"]="ـَّ",e["ﳳ"]="ـُّ",e["ﳴ"]="ـِّ",e["ﳵ"]="طى",e["ﳶ"]="طي",e["ﳷ"]="عى",e["ﳸ"]="عي",e["ﳹ"]="غى",e["ﳺ"]="غي",e["ﳻ"]="سى",e["ﳼ"]="سي",e["ﳽ"]="شى",e["ﳾ"]="شي",e["ﳿ"]="حى",e["ﴀ"]="حي",e["ﴁ"]="جى",e["ﴂ"]="جي",e["ﴃ"]="خى",e["ﴄ"]="خي",e["ﴅ"]="صى",e["ﴆ"]="صي",e["ﴇ"]="ضى",e["ﴈ"]="ضي",e["ﴉ"]="شج",e["ﴊ"]="شح",e["ﴋ"]="شخ",e["ﴌ"]="شم",e["ﴍ"]="شر",e["ﴎ"]="سر",e["ﴏ"]="صر",e["ﴐ"]="ضر",e["ﴑ"]="طى",e["ﴒ"]="طي",e["ﴓ"]="عى",e["ﴔ"]="عي",e["ﴕ"]="غى",e["ﴖ"]="غي",e["ﴗ"]="سى",e["ﴘ"]="سي",e["ﴙ"]="شى",e["ﴚ"]="شي",e["ﴛ"]="حى",e["ﴜ"]="حي",e["ﴝ"]="جى",e["ﴞ"]="جي",e["ﴟ"]="خى",e["ﴠ"]="خي",e["ﴡ"]="صى",e["ﴢ"]="صي",e["ﴣ"]="ضى",e["ﴤ"]="ضي",e["ﴥ"]="شج",e["ﴦ"]="شح",e["ﴧ"]="شخ",e["ﴨ"]="شم",e["ﴩ"]="شر",e["ﴪ"]="سر",e["ﴫ"]="صر",e["ﴬ"]="ضر",e["ﴭ"]="شج",e["ﴮ"]="شح",e["ﴯ"]="شخ",e["ﴰ"]="شم",e["ﴱ"]="سه",e["ﴲ"]="شه",e["ﴳ"]="طم",e["ﴴ"]="سج",e["ﴵ"]="سح",e["ﴶ"]="سخ",e["ﴷ"]="شج",e["ﴸ"]="شح",e["ﴹ"]="شخ",e["ﴺ"]="طم",e["ﴻ"]="ظم",e["ﴼ"]="اً",e["ﴽ"]="اً",e["ﵐ"]="تجم",e["ﵑ"]="تحج",e["ﵒ"]="تحج",e["ﵓ"]="تحم",e["ﵔ"]="تخم",e["ﵕ"]="تمج",e["ﵖ"]="تمح",e["ﵗ"]="تمخ",e["ﵘ"]="جمح",e["ﵙ"]="جمح",e["ﵚ"]="حمي",e["ﵛ"]="حمى",e["ﵜ"]="سحج",e["ﵝ"]="سجح",e["ﵞ"]="سجى",e["ﵟ"]="سمح",e["ﵠ"]="سمح",e["ﵡ"]="سمج",e["ﵢ"]="سمم",e["ﵣ"]="سمم",e["ﵤ"]="صحح",e["ﵥ"]="صحح",e["ﵦ"]="صمم",e["ﵧ"]="شحم",e["ﵨ"]="شحم",e["ﵩ"]="شجي",e["ﵪ"]="شمخ",e["ﵫ"]="شمخ",e["ﵬ"]="شمم",e["ﵭ"]="شمم",e["ﵮ"]="ضحى",e["ﵯ"]="ضخم",e["ﵰ"]="ضخم",e["ﵱ"]="طمح",e["ﵲ"]="طمح",e["ﵳ"]="طمم",e["ﵴ"]="طمي",e["ﵵ"]="عجم",e["ﵶ"]="عمم",e["ﵷ"]="عمم",e["ﵸ"]="عمى",e["ﵹ"]="غمم",e["ﵺ"]="غمي",e["ﵻ"]="غمى",e["ﵼ"]="فخم",e["ﵽ"]="فخم",e["ﵾ"]="قمح",e["ﵿ"]="قمم",e["ﶀ"]="لحم",e["ﶁ"]="لحي",e["ﶂ"]="لحى",e["ﶃ"]="لجج",e["ﶄ"]="لجج",e["ﶅ"]="لخم",e["ﶆ"]="لخم",e["ﶇ"]="لمح",e["ﶈ"]="لمح",e["ﶉ"]="محج",e["ﶊ"]="محم",e["ﶋ"]="محي",e["ﶌ"]="مجح",e["ﶍ"]="مجم",e["ﶎ"]="مخج",e["ﶏ"]="مخم",e["ﶒ"]="مجخ",e["ﶓ"]="همج",e["ﶔ"]="همم",e["ﶕ"]="نحم",e["ﶖ"]="نحى",e["ﶗ"]="نجم",e["ﶘ"]="نجم",e["ﶙ"]="نجى",e["ﶚ"]="نمي",e["ﶛ"]="نمى",e["ﶜ"]="يمم",e["ﶝ"]="يمم",e["ﶞ"]="بخي",e["ﶟ"]="تجي",e["ﶠ"]="تجى",e["ﶡ"]="تخي",e["ﶢ"]="تخى",e["ﶣ"]="تمي",e["ﶤ"]="تمى",e["ﶥ"]="جمي",e["ﶦ"]="جحى",e["ﶧ"]="جمى",e["ﶨ"]="سخى",e["ﶩ"]="صحي",e["ﶪ"]="شحي",e["ﶫ"]="ضحي",e["ﶬ"]="لجي",e["ﶭ"]="لمي",e["ﶮ"]="يحي",e["ﶯ"]="يجي",e["ﶰ"]="يمي",e["ﶱ"]="ممي",e["ﶲ"]="قمي",e["ﶳ"]="نحي",e["ﶴ"]="قمح",e["ﶵ"]="لحم",e["ﶶ"]="عمي",e["ﶷ"]="كمي",e["ﶸ"]="نجح",e["ﶹ"]="مخي",e["ﶺ"]="لجم",e["ﶻ"]="كمم",e["ﶼ"]="لجم",e["ﶽ"]="نجح",e["ﶾ"]="جحي",e["ﶿ"]="حجي",e["ﷀ"]="مجي",e["ﷁ"]="فمي",e["ﷂ"]="بحي",e["ﷃ"]="كمم",e["ﷄ"]="عجم",e["ﷅ"]="صمم",e["ﷆ"]="سخي",e["ﷇ"]="نجي",e["﹉"]="‾",e["﹊"]="‾",e["﹋"]="‾",e["﹌"]="‾",e["﹍"]="_",e["﹎"]="_",e["﹏"]="_",e["ﺀ"]="ء",e["ﺁ"]="آ",e["ﺂ"]="آ",e["ﺃ"]="أ",e["ﺄ"]="أ",e["ﺅ"]="ؤ",e["ﺆ"]="ؤ",e["ﺇ"]="إ",e["ﺈ"]="إ",e["ﺉ"]="ئ",e["ﺊ"]="ئ",e["ﺋ"]="ئ",e["ﺌ"]="ئ",e["ﺍ"]="ا",e["ﺎ"]="ا",e["ﺏ"]="ب",e["ﺐ"]="ب",e["ﺑ"]="ب",e["ﺒ"]="ب",e["ﺓ"]="ة",e["ﺔ"]="ة",e["ﺕ"]="ت",e["ﺖ"]="ت",e["ﺗ"]="ت",e["ﺘ"]="ت",e["ﺙ"]="ث",e["ﺚ"]="ث",e["ﺛ"]="ث",e["ﺜ"]="ث",e["ﺝ"]="ج",e["ﺞ"]="ج",e["ﺟ"]="ج",e["ﺠ"]="ج",e["ﺡ"]="ح",e["ﺢ"]="ح",e["ﺣ"]="ح",e["ﺤ"]="ح",e["ﺥ"]="خ",e["ﺦ"]="خ",e["ﺧ"]="خ",e["ﺨ"]="خ",e["ﺩ"]="د",e["ﺪ"]="د",e["ﺫ"]="ذ",e["ﺬ"]="ذ",e["ﺭ"]="ر",e["ﺮ"]="ر",e["ﺯ"]="ز",e["ﺰ"]="ز",e["ﺱ"]="س",e["ﺲ"]="س",e["ﺳ"]="س",e["ﺴ"]="س",e["ﺵ"]="ش",e["ﺶ"]="ش",e["ﺷ"]="ش",e["ﺸ"]="ش",e["ﺹ"]="ص",e["ﺺ"]="ص",e["ﺻ"]="ص",e["ﺼ"]="ص",e["ﺽ"]="ض",e["ﺾ"]="ض",e["ﺿ"]="ض",e["ﻀ"]="ض",e["ﻁ"]="ط",e["ﻂ"]="ط",e["ﻃ"]="ط",e["ﻄ"]="ط",e["ﻅ"]="ظ",e["ﻆ"]="ظ",e["ﻇ"]="ظ",e["ﻈ"]="ظ",e["ﻉ"]="ع",e["ﻊ"]="ع",e["ﻋ"]="ع",e["ﻌ"]="ع",e["ﻍ"]="غ",e["ﻎ"]="غ",e["ﻏ"]="غ",e["ﻐ"]="غ",e["ﻑ"]="ف",e["ﻒ"]="ف",e["ﻓ"]="ف",e["ﻔ"]="ف",e["ﻕ"]="ق",e["ﻖ"]="ق",e["ﻗ"]="ق",e["ﻘ"]="ق",e["ﻙ"]="ك",e["ﻚ"]="ك",e["ﻛ"]="ك",e["ﻜ"]="ك",e["ﻝ"]="ل",e["ﻞ"]="ل",e["ﻟ"]="ل",e["ﻠ"]="ل",e["ﻡ"]="م",e["ﻢ"]="م",e["ﻣ"]="م",e["ﻤ"]="م",e["ﻥ"]="ن",e["ﻦ"]="ن",e["ﻧ"]="ن",e["ﻨ"]="ن",e["ﻩ"]="ه",e["ﻪ"]="ه",e["ﻫ"]="ه",e["ﻬ"]="ه",e["ﻭ"]="و",e["ﻮ"]="و",e["ﻯ"]="ى",e["ﻰ"]="ى",e["ﻱ"]="ي",e["ﻲ"]="ي",e["ﻳ"]="ي",e["ﻴ"]="ي",e["ﻵ"]="لآ",e["ﻶ"]="لآ",e["ﻷ"]="لأ",e["ﻸ"]="لأ",e["ﻹ"]="لإ",e["ﻺ"]="لإ",e["ﻻ"]="لا",e["ﻼ"]="لا"},function(){return je&&(ze=Object.create(null),je(ze),je=null),ze});function Ge(e){var t,n,i=e.length;if(i<=1||(t=e.charCodeAt(0),n=Ke[13],!(t>=n.begin&&t<n.end||t>=(n=Ke[11]).begin&&t<n.end)))return e;for(var a="",r=i-1;r>=0;r--)a+=e[r];return a}!function(e){e.ltr="ltr",e.rtl="rtl",e.ttb="ttb"}(We||(We={})),function(e){e[e.text=0]="text",e[e.email=1]="email",e[e.link=2]="link"}(qe||(qe={}));const Xe=/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,Je=/[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,63}/,Ye=/(\s+)/;function Qe(e){return"http"===e.substr(0,4)?e:"http://"+e}function Ze(e){return e.split(Ye).map((e=>{if(Ye.test(e))return{type:qe.text,text:e.replace("\t"," ")};let t;return Je.test(e)?{text:e,type:qe.email}:(t=e.match(Xe))&&t[2]&&t[4]?{href:Qe(e),text:e,type:qe.link}:{type:qe.text,text:e}})).reduce(((e,t)=>{const n=e[e.length-1];return n&&n.type===qe.text&&t.type===qe.text?n.text+=t.text:e.push(t),e}),[])}function et(e){const t=$e();let n="";for(let i=0;i<e.length;i++){let a=e.charAt(i);void 0!==t[a]&&(a=t[a]),a=Ge(a),"\t"===a&&(a=" "),n+=a}const i=function(e,t,n){var i=!0,a=e.length;if(0===a||n)return Ue(e,i,n);He.length=a,Ve.length=a;var r,o,s=0;for(r=0;r<a;++r){He[r]=e.charAt(r);var l=e.charCodeAt(r),c="L";l<=255?c=Me[l]:1424<=l&&l<=1524?c="R":1536<=l&&l<=1791?c=ke[255&l]:1792<=l&&l<=2220&&(c="AL"),"R"!==c&&"AL"!==c&&"AN"!==c||s++,Ve[r]=c}if(0===s)return Ue(e,i=!0);-1===t&&(s/a<.3?(i=!0,t=0):(i=!1,t=1));var d=[];for(r=0;r<a;++r)d[r]=t;var g,u=Fe(t)?"R":"L",h=u,p=h,f=h;for(r=0;r<a;++r)"NSM"===Ve[r]?Ve[r]=f:f=Ve[r];for(f=h,r=0;r<a;++r)"EN"===(g=Ve[r])?Ve[r]="AL"===f?"AN":"EN":"R"!==g&&"L"!==g&&"AL"!==g||(f=g);for(r=0;r<a;++r)"AL"===(g=Ve[r])&&(Ve[r]="R");for(r=1;r<a-1;++r)"ES"===Ve[r]&&"EN"===Ve[r-1]&&"EN"===Ve[r+1]&&(Ve[r]="EN"),"CS"!==Ve[r]||"EN"!==Ve[r-1]&&"AN"!==Ve[r-1]||Ve[r+1]!==Ve[r-1]||(Ve[r]=Ve[r-1]);for(r=0;r<a;++r)if("EN"===Ve[r]){var m;for(m=r-1;m>=0&&"ET"===Ve[m];--m)Ve[m]="EN";for(m=r+1;m<a&&"ET"===Ve[m];++m)Ve[m]="EN"}for(r=0;r<a;++r)"WS"!==(g=Ve[r])&&"ES"!==g&&"ET"!==g&&"CS"!==g||(Ve[r]="ON");for(f=h,r=0;r<a;++r)"EN"===(g=Ve[r])?Ve[r]="L"===f?"L":"EN":"R"!==g&&"L"!==g||(f=g);for(r=0;r<a;++r)if("ON"===Ve[r]){var v=Oe(Ve,r+1,"ON"),_=h;r>0&&(_=Ve[r-1]);var b=p;v+1<a&&(b=Ve[v+1]),"L"!==_&&(_="R"),"L"!==b&&(b="R"),_===b&&Re(Ve,r,v,_),r=v-1}for(r=0;r<a;++r)"ON"===Ve[r]&&(Ve[r]=u);for(r=0;r<a;++r)g=Ve[r],Te(d[r])?"R"===g?d[r]+=1:"AN"!==g&&"EN"!==g||(d[r]+=2):"L"!==g&&"AN"!==g&&"EN"!==g||(d[r]+=1);var w,L=-1,x=99;for(r=0,o=d.length;r<o;++r)L<(w=d[r])&&(L=w),x>w&&Fe(w)&&(x=w);for(w=L;w>=x;--w){var N=-1;for(r=0,o=d.length;r<o;++r)d[r]<w?N>=0&&(Be(He,N,r),N=-1):N<0&&(N=r);N>=0&&Be(He,N,d.length)}for(r=0,o=He.length;r<o;++r){var S=He[r];"<"!==S&&">"!==S||(He[r]="")}return Ue(He.join(""),i)}(n,-1,!1);return{dir:i.dir,str:Ze(i.str)}}function tt(e){const t=[];return e.metadata&&Array.isArray(e.pages)?e.pages.map((e=>Object.assign(Object.assign({},e),{textboxes:e.textboxes.map((e=>{const t=et(e.t);return Object.assign(Object.assign({},e),{transformedText:t.str,dir:t.dir})}))}))).filter((e=>e)):t}const nt="NFKC";class it{constructor(e){this.addSyntheticSpaceBetweenTextboxes=({segments:e,segmentIndex:t,chunkIndex:n})=>{const i=e[t].chunks[n],a=e[t].chunks[n+1];return this.isNewlineTextbox(i,a)||this.isHorizontalSpaceTextbox(i,a)},this.args=e,this.kmpSearch=new o.KMPSearch((()=>this.args.retrievePages().map((e=>{var{textboxes:t}=e,n=r.__rest(e,["textboxes"]);return Object.assign(Object.assign({},n),{chunks:t})}))),{shouldAddSyntheticSpace:this.addSyntheticSpaceBetweenTextboxes,parseText:this.parseText})}setRetrieveCurrentPageIndex(e){this.retrieveCurrentPageIndex=e}fetchTextForAllPages(){var e;(null===(e=this.args.rivieraData)||void 0===e?void 0:e.metadata)&&this.args.fetchNextPageChunk({pageParam:{continueArg:{apiArg:{batchFirstPage:0,batchLastPage:this.args.rivieraData.metadata.page_count},pkgArg:this.args.rivieraData}}})}onNext(e){this.searchResult&&(this.args.dispatch(a.logUserActionEvent({userAction:n.UserAction.FindInDocNext,fileViewerId:this.args.fileViewerId,actionContext:"keyboard"===e?n.UserActionContext.Keyboard:n.UserActionContext.FindInDocSearchbar,extra:{find_method:e}})),this.searchResult.currentHit++,this.searchResult.currentHit>=this.searchResult.hits.length&&(this.searchResult.currentHit=0),this.jumpTo(this.searchResult.hits[this.searchResult.currentHit]))}onPrevious(e){this.searchResult&&(this.args.dispatch(a.logUserActionEvent({userAction:n.UserAction.FindInDocPrev,fileViewerId:this.args.fileViewerId,actionContext:"keyboard"===e?n.UserActionContext.Keyboard:n.UserActionContext.FindInDocSearchbar,extra:{find_method:e}})),this.searchResult.currentHit--,this.searchResult.currentHit<0&&(this.searchResult.currentHit=this.searchResult.hits.length-1),this.jumpTo(this.searchResult.hits[this.searchResult.currentHit]))}jumpTo(e){var t,i;this.args.dispatch(a.updateDocCurrentPageIndex({fileViewerId:this.args.fileViewerId,previewKey:this.args.previewKey,pageIndex:e.pageIndex,sourceContext:n.UserActionContext.Keyboard,totalPageCount:null===(i=null===(t=this.args.rivieraData)||void 0===t?void 0:t.metadata)||void 0===i?void 0:i.page_count})),this.args.dispatch(a.pageNavigation({fileViewerId:this.args.fileViewerId,previewKey:this.args.previewKey,pageIndex:e.pageIndex,centerOnYOffset:e.pageYOffset,sourceContext:n.UserActionContext.Keyboard}))}onReset(){this.searchResult=void 0,this.currentSearchTerm=void 0,this.args.onSearchResult(void 0)}search(e){if(!e)return void this.onReset();if(this.currentSearchTerm===e||null==this.kmpSearch)return;this.currentSearchTerm=e;const t=[];e=e.toLowerCase().normalize(nt);this.kmpSearch.searchSegments(e,(({segments:e,segmentIndex:n,chunkIndex:i})=>{const a=e[n].dimension[1]-e[n].chunks[i].r[1];t.push({pageIndex:n,pageYOffset:a})}),(e=>{this.searchResult={highlights:e,hits:t,currentHit:this.findStartingHit(t)},this.args.onSearchResult(this.searchResult),t.length>0&&this.jumpTo(t[this.searchResult.currentHit])}))}parseText(e){return e.trimLeft().toLowerCase().normalize(nt)}isNewlineTextbox(e,t){return Math.abs(e.r[1]-t.r[1])>.8*e.r[3]}isHorizontalSpaceTextbox(e,t){return Math.abs(e.r[0]+e.r[2]-t.r[0])>.3*e.h}findStartingHit(e){if(this.retrieveCurrentPageIndex&&e.length>0){const t=this.retrieveCurrentPageIndex(),n=e.findIndex((e=>e.pageIndex>=t));if(n>=0)return n}return 0}}n.injectInternalStyle("/static/js/file_viewer/preview_doc/renderer/find_in_doc_searchbar.module.out-vfl4Eoy7E.css",(e=>"._findInDocSearchBar_sx8pj_1{align-items:center;background-color:var(--color__elevated__background);border:1px solid;border-color:var(--dig-color__border__subtle);box-shadow:var(--boxshadow__elevation1);color:var(--color__faint__text);display:flex;margin:0 var(--dig-spacing__micro__large);max-width:100%;padding:var(--dig-spacing__micro__small);position:absolute;right:0;top:0;width:400px}._findInDocSearchBar_sx8pj_1>button{margin-left:var(--dig-spacing__micro__small)}"));const at=e=>{var t;const{onClose:i,controller:r}=e,o=n.useIntl(),d=De.useRef(null);De.useEffect((()=>{var e;null===(e=d.current)||void 0===e||e.focus()}),[]);const g=De.useCallback(s.debounce((e=>r.search(e)),200),[r.search]),u=De.createElement(De.Fragment,null,r.searchResult&&De.createElement(n.TextInputAffix,null,De.createElement("span",{role:"status"},o.formatMessage({id:"hK6Sbz",defaultMessage:"{currentResult} of {totalResults}"},{currentResult:r.searchResult.hits.length>0?r.searchResult.currentHit+1:0,totalResults:r.searchResult.hits.length})))),h=De.useMemo((()=>[a.getEscapeBinding((()=>i("keyboard"))),a.getFindInDocBinding((()=>{var e;null===(e=d.current)||void 0===e||e.focus()}))]),[i]),p=!r.searchResult||r.searchResult.hits.length<=1;return De.createElement("div",{className:"_findInDocSearchBar_sx8pj_1"},De.createElement(n.TextInput,{ref:d,withLeftAccessory:De.createElement(n.UIIcon,{src:l.SearchLine,role:"presentation"}),withRightAccessory:u,placeholder:o.formatMessage({id:"uDh1dX",defaultMessage:"Search in this document"}),"aria-label":o.formatMessage({id:"gddc5d",defaultMessage:"Search in this document"}),onKeyDown:e=>{e.shiftKey&&e.key===n.Key_enum.Key.Enter?(r.onPrevious("keyboard"),e.stopPropagation()):e.key===n.Key_enum.Key.Enter?(r.onNext("keyboard"),e.stopPropagation()):e.key===n.Key_enum.Key.Escape?(i("keyboard"),e.stopPropagation()):(e.ctrlKey||e.metaKey)&&"f"===e.key&&e.preventDefault()},onChange:e=>g(e.currentTarget.value),isInvalid:0===(null===(t=r.searchResult)||void 0===t?void 0:t.hits.length)}),De.createElement(rt,{tooltipText:o.formatMessage({id:"zqVjrn",defaultMessage:"Find previous"}),icon:c.ChevronUpLine,onClick:()=>r.onPrevious("click"),isDisabled:p}),De.createElement(rt,{tooltipText:o.formatMessage({id:"W4xtVb",defaultMessage:"Find next"}),icon:n.ChevronDownLine,onClick:()=>r.onNext("click"),isDisabled:p}),De.createElement(rt,{tooltipText:o.formatMessage({id:"OQXRhL",defaultMessage:"Close search"}),icon:n.CloseLine,onClick:()=>i("click")}),De.createElement(a.KeyboardBindingConnector,{name:"find_in_doc",keyboardBindings:h}))};at.displayName="FindInDocSearchbar";const rt=e=>De.createElement(n.Tooltip,{placement:"bottom",title:e.tooltipText,shouldCloseOnClick:!0},De.createElement(n.IconButton,{variant:"transparent",size:"small","aria-label":e.tooltipText,onClick:e.onClick,disabled:e.isDisabled},De.createElement(n.UIIcon,{src:e.icon})));rt.displayName="FindInDocSearchbarButton";n.injectInternalStyle("/static/js/file_viewer/preview_doc/renderer/highlights.module.out-vflWRerI8.css",(e=>"._highlight-layer_1cfda_1{height:100%;left:0;position:absolute;top:0;width:100%}._highlight-action-bar_1cfda_9{box-sizing:border-box;display:flex;flex-direction:row;opacity:0;padding:4px;position:absolute;transition:opacity .1s ease-in-out;z-index:1000}._highlight-action-bar__visible_1cfda_20{background-clip:content-box;background-color:var(--dig-color__background__base);opacity:1;transition:opacity .15s ease-in-out}"));const ot="_highlight-layer_1cfda_1";function st({x:e,y:t}){return{left:`${e}px`,top:`${t}px`}}const lt=({children:e,position:t})=>De.createElement(n.ThemeProvider,{mode:"dark"},De.createElement("div",{className:n.cx("_highlight-action-bar_1cfda_9","_highlight-action-bar__visible_1cfda_20"),style:st(t),tabIndex:-1},e));lt.displayName="HighlightActionBar";const ct=new DOMRect(0,0,0,0),dt=(e,t)=>Math.abs(e.x+e.width-t.x)>.3*e.fontSize,gt=e=>{var t;const n=document.createRange();n.selectNode(e);const i=n.getBoundingClientRect(),a=e.nodeType===Node.ELEMENT_NODE?e:e.parentNode,r=a?window.getComputedStyle(a):void 0;return{x:i.left,y:i.top,width:i.width,height:i.height,text:null!==(t=e.nodeValue)&&void 0!==t?t:"",fontSize:r?parseFloat(r.fontSize):12}},ut={x:-100,y:-100},ht=(e,t,n)=>{const{getPageForSelection:i}=a.usePreviewControls(),[r,o]=De.default.useState(null);return De.default.useEffect((()=>{requestAnimationFrame((()=>{var t;const a=window.getSelection();if(!a||0===a.rangeCount)return void o(null);const r=a.getRangeAt(0).getBoundingClientRect(),s=(e=>{var t;if(0===e.rangeCount)return"";const n=e.getRangeAt(0),i=document.createTreeWalker(n.commonAncestorContainer,NodeFilter.SHOW_TEXT,{acceptNode:function(e){return n.intersectsNode(e)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}});let a=null,r=gt(i.currentNode),o=null!==(t=r.text)&&void 0!==t?t:"";for(;i.nextNode();)a=r,r=gt(i.currentNode),s=a,l=r,(Math.abs(s.y-l.y)>.8*s.height||dt(a,r))&&o&&!/\s/.test(o.at(-1))&&r.text&&!/\s/.test(r.text[0])&&(o+=" "),o+=r.text;var s,l;return((e,t)=>{const n=(e=>{if(!e||e.isCollapsed||0===e.rangeCount)return null;const t=e.toString().trim(),n=e.getRangeAt(0).getBoundingClientRect();return t.length>0&&n.width>0&&n.height>0?t:null})(t);if(!n)return"";const i=n.split("\n"),a=e.indexOf(i[0]);-1!==a&&(e=e.substring(a,e.length));const r=e.lastIndexOf(i[i.length-1]);return-1!==r&&(e=e.slice(0,r+i[i.length-1].length)),e})(o,e)})(a),l=(null!==(t=null==i?void 0:i(a))&&void 0!==t?t:-1)===e||function(e,t){if(null==e)return!1;const{focusNode:n,anchorNode:i}=e;return Boolean(t&&n&&t.contains(n)&&i&&t.contains(i))}(a,n.current);if(r&&s&&l&&function(e,t){var n;const i=null===(n=document.querySelector(`#pageContainer${t+1}`))||void 0===n?void 0:n.querySelector('[class*="textLayer"]');return!!(i&&(null==e?void 0:e.anchorNode)&&(null==i?void 0:i.contains(null==e?void 0:e.anchorNode)))}(a,e)){const t=(null==a?void 0:a.getRangeAt(0))?Array.from(a.getRangeAt(0).getClientRects()):[],i=document.querySelector("[data-preview-viewport]"),l=null==i?void 0:i.getBoundingClientRect();o({text:s,page:{bounds:n.current.getBoundingClientRect(),pageNumber:e},selectionAreas:t,selectionBounds:r,viewport:l?{width:l.width,height:l.height}:{width:0,height:0}})}else o(null)}))}),[e,t,n,i]),r},pt=e=>{var t,i,r;const[o,s]=De.default.useState(!1),[l,c]=De.default.useState(!1),[d,g]=De.default.useState(null),[u,h]=De.default.useState(0),p=De.default.useRef(null),{pageIndex:f}=e.data;var m;m=f,De.default.useEffect((()=>{var e,t,n,i;if(0!==m)return;const a=Array.from(null!==(t=null===(e=document.querySelector("#pageContainer1"))||void 0===e?void 0:e.querySelectorAll("text"))&&void 0!==t?t:[]);for(const e of a)if((null!==(i=null===(n=e.textContent)||void 0===n?void 0:n.length)&&void 0!==i?i:0)>50){e.id="highlight-tooltip-target";break}}),[m]);const v=ht(f,u,p),_=De.default.useCallback((()=>{h(u+1)}),[u]),b=De.default.useCallback((()=>{o?l||c(!0):_()}),[o,l,_]),w=De.default.useCallback((()=>{s(!0),c(!1)}),[]),L=De.default.useCallback((()=>{o&&l&&_(),s(!1)}),[o,l,_]);De.default.useEffect((()=>(document.addEventListener("selectionchange",b),document.addEventListener("mousedown",w),document.addEventListener("mouseup",L),()=>{document.removeEventListener("selectionchange",b),document.removeEventListener("mousedown",w),document.removeEventListener("mouseup",L)})),[b,w,L]);const x=De.default.useMemo((()=>{var t;return v?(null!==(t=e.textHighlighters)&&void 0!==t?t:[]).map(((e,t)=>{const n=e.highlightMenuOption;return De.default.createElement(n,{key:t,selectedText:v})})):[]}),[e.textHighlighters,v]),N=null!==(i=null===(t=e.textHighlighters)||void 0===t?void 0:t.length)&&void 0!==i?i:0;return De.default.useEffect((()=>{requestAnimationFrame((()=>{var e,t;let n=null;if(null!==v){const i=null!==(t=null===(e=p.current)||void 0===e?void 0:e.getBoundingClientRect())&&void 0!==t?t:ct;n=function(e,t,n,i,r,o){const s=a.createNormalizedRegion(e,n);let l,c;if(s.y*n.height>=i+o)l=(s.x+s.width/2)*n.width-i/2,c=s.y*n.height-i-o;else if((1-s.x-s.width)*n.width>=r)l=(s.x+s.width)*n.width+o,c=(s.y+s.height/2)*n.height-r/2;else if(s.x*n.width>=r)l=s.x*n.width-r-o,c=(s.y+s.height/2)*n.height-r/2;else if((1-s.y-s.height)*n.height>=i)l=(s.x+s.width/2)*n.width-i/2,c=(s.y+s.height)*n.height+o;else{const e=a.createNormalizedRegion(t,n);l=(e.x+e.width/2)*n.width-i/2,c=(e.y+e.height)*n.height+o}return{x:l,y:c}}(v.selectionBounds,v.selectionAreas[0],i,42,42*N,8)}g(n)}))}),[x,v,N]),De.default.createElement("div",{className:n.cx(ot),ref:p},d&&v&&De.default.createElement(lt,{position:null!=d?d:ut},(null!==(r=e.textHighlighters)&&void 0!==r?r:[]).map(((e,t)=>{const n=e.highlightMenuOption;return De.default.createElement(n,{key:t,selectedText:v})}))))};pt.displayName="HighlightLayer";const ft=[100,200,400,800,1600],mt=(e,t,n)=>{if(!n)return 2;return 16777216/(e*t)},vt=(e,t,n)=>{if(!t)return 100;const i=Math.round(100*t),a=Math.round(100*e*(d.isMobileOrTablet()?4:1));if(a<=i){for(const e of ft)if(i>.8*e&&i<=e)return e;return i}const r=Math.round(100*n);for(const e of ft)if(a<=e||r<e)return Math.max(e,i);return ft[ft.length-1]},_t=({data:e,previewKey:n,filePreviewUiData:r,fileMetadata:o,onImageLoad:s,onImageError:l})=>{const[c,d]=t.useState(0),[g,u]=t.useState(0),[h,p]=t.useState(void 0),[f,m]=De.useState(Date.now()),v=t.useRef(null),{pageIndex:_,imgUrls:{imageUrlTmpl:b}}=e,[w,L]=e.dimension,x=a.getScaleFactorFromFilePreviewUi(r),N=w*x,S=L*x,A=t.useCallback((({imageUrlTmpl:e,expectedWidth:t,page:n=0,scalePercent:i})=>{t>c&&(d(t),a.rivieraClient.fetchDocImage({page:n,imageUrlTmpl:e,scalePercent:i}).then((({data:e})=>{e&&t>g?(u(t),p(e)):l(n,"error_fetch")})).catch((()=>{l(n,"error_fetch")})))}),[c,g,l]),E=a.useStabilizedCallback((()=>{v.current&&v.current.complete&&(v.current.naturalHeight||v.current.naturalWidth?s(_,Date.now()-f):l(_,"error_load"))})),I=t.useCallback(((e,t,n,a,r,o)=>{if(!a)return;const s=mt(r,o,a),l=vt(n,a,s),d=l/100*r;d>Math.ceil(Math.max(i.PDF_BASE_WIDTH,c)/.8)&&A({imageUrlTmpl:e,page:t,scalePercent:l,expectedWidth:d})}),[A,c]);t.useEffect((()=>{m(Date.now())}),[]);return t.useEffect((()=>{E(),c||(L>i.LARGE_PDF_CUTOFF_DIMENSIONS?A({imageUrlTmpl:b,expectedWidth:i.PDF_BASE_WIDTH,page:_,scalePercent:vt(a.READABLE_DOC_ZOOM_TO_FIT_SCALE_MAX,a.READABLE_DOC_ZOOM_TO_FIT_SCALE_MAX,mt(w,L,a.READABLE_DOC_ZOOM_TO_FIT_SCALE_MAX))}):A({imageUrlTmpl:b,expectedWidth:i.PDF_BASE_WIDTH,page:_}))}),[n.serialized]),t.useEffect((()=>{const e=a.getScaleFactorFromFilePreviewUi(r),{fitScaleFactor:t}=r;e!==t&&I(b,_,e,t,w,L)}),[r,I,L,b,_,w]),De.createElement("div",{className:a.container},h&&De.createElement("img",{ref:v,alt:o?o.file_name:"",width:N,height:S,role:"tabpanel","aria-hidden":"true",draggable:!1,src:h,onLoad:({currentTarget:e})=>{const t=Date.now()-f;s(_,t);const n=e.naturalWidth,i=Math.max(n,c);d(i),u(n)},onError:()=>{l(_,"error_render")},"data-testid":`fvsdk-doc-page-${e.pageIndex}`}))};_t.displayName="ImgLayer";n.injectInternalStyle("/static/js/file_viewer/preview_doc/renderer/links_warning_modal.module.out-vflusevCS.css",(e=>"._warningModalMobile_1bpal_1{bottom:0;height:30%;top:unset}"));const bt=e=>{const t=g.useDispatch(),r=n.useIntl(),{optionalIOClients:{preferencesClient:o,reportExceptionClient:s},logUserAction:l}=i.useFileViewerContext(),{onDismiss:c,url:u}=e,[h,p]=De.useState(!1),f=a.useCurrentPreviewMetadata(),m=window.location&&encodeURIComponent(window.location.href);let v;try{v=new URL(u).hostname.replace("www.","")}catch(e){return e instanceof Error&&(null==s||s.reportException(e,f.previewType,!0)),t(a.openUrl({url:u})),null==c||c(),null}const _=r.formatMessage({id:"xuJw2w",defaultMessage:"Cancel"}),b=r.formatMessage({id:"8fMKNv",defaultMessage:"Continue"}),w=r.formatMessage({id:"xN06So",defaultMessage:"Continue to {url}?"},{url:v}),L=r.formatMessage({id:"qkEL8V",defaultMessage:"Before continuing, make sure you trust the link, file and person who shared it."}),x=r.formatMessage({id:"2hJURf",defaultMessage:"Report to Dropbox"}),N=r.formatMessage({id:"IqpVFQ",defaultMessage:"Don’t ask me again for links in this file"});return De.createElement(n.Modal,{className:d.isSupportedMobileBrowser()?"_warningModalMobile_1bpal_1":void 0,open:!0,isCentered:!0,withCloseButton:_,onRequestClose:c},De.createElement(n.Modal.Header,{hasBottomSpacing:"title-standard"},De.createElement(n.Modal.Title,null,w)),De.createElement(n.Modal.Body,null,De.createElement(n.FormRow,null,L),De.createElement(n.FormRow,{variant:"control"},De.createElement(n.Checkbox,{checked:h,onClick:()=>{p(!h)},id:"links_warning_checkbox"}),De.createElement(n.FormLabel,{className:"dig-FormLabel--control",htmlFor:"links_warning_checkbox"},N))),De.createElement(n.Modal.Footer,null,De.createElement(n.Button,{href:`/report_abuse?ssu=${m}`,target:"_blank",variant:"transparent",onClick:()=>{l(n.UserAction.ReportToDropbox,n.UserActionContext.Modal)}},x),De.createElement(n.Button,{variant:"opacity",onClick:()=>{l(n.UserAction.Cancel,n.UserActionContext.Modal),null==c||c()}},_),De.createElement(n.Button,{variant:"primary",onClick:()=>{var e;t(a.openUrl({url:u})),l(n.UserAction.Continue,n.UserActionContext.Modal,{dontAskAgainChecked:h.toString()}),null===(e=null==o?void 0:o.link)||void 0===e||e.setWarningHiddenState({isHidden:h}),null==c||c()}},b)))};bt.displayName="LinksWarningModal";const wt=e=>{var t;const{dispatch:r,filePreviewUiData:o,fileViewerId:s,featureConfig:l}=e,c=a.getScaleFactorFromFilePreviewUi(o),d=n.useIntl(),[g,u]=De.useState(""),h=a.useFileViewerSelector(a.getSharedLinkInfo,s),{optionalIOClients:{preferencesClient:p},isLoggedIn:f,logUserAction:m}=i.useFileViewerContext(),v=null===(t=null==p?void 0:p.link)||void 0===t?void 0:t.getWarningHiddenState(),_=f&&!v&&void 0!==h&&!h.isSameTeam;a.useLogExposure("previews_exp_links_warning_modal",l.previews_link_warning_modal,_);const b=e.data.links.map(((t,i)=>{const o=t.a;let[s,c,g,h]=t.r;h<0&&(c+=h,h=-h),g<0&&(s+=g,g=-g);const p={position:"absolute",bottom:c,left:s,width:g,height:h};if(o.ur){const{ur:e}=o,t=e.startsWith("mailto:")||e.startsWith("tel:");return De.createElement("a",{key:i,"data-testid":"external-link","aria-label":d.formatMessage({id:"+trcEI",defaultMessage:"External Link"}),href:t?e:Qe(e),onClick:t=>function(e,t){e.preventDefault(),_&&"ON"===l.previews_link_warning_modal?(m(n.UserAction.ShowLinkWarningModal,n.UserActionContext.PreviewContentMain),u(t)):r(a.openUrl({url:t}))}(t,e),rel:"noreferrer noopener",style:p,target:"_blank"})}return De.createElement("div",{key:i,className:a.internalLink,"data-testid":"internal-link",style:p,"aria-label":d.formatMessage({id:"UU1q+t",defaultMessage:"Internal Link"}),onClick:t=>function(t,n){t.preventDefault(),e.onInternalLinkClicked(n)}(t,o.pn)})}));return De.createElement("div",{className:a.linksLayer,style:{transform:`scale(${c})`}},!!g&&De.createElement(bt,{onDismiss:()=>u(""),url:g}),b)};wt.displayName="LinksLayer";const Lt=({text:e,x:t,y:n,width:i,height:r,dir:o,style:s,findInDocHighlights:l,findInDocCurrentHit:c,charOffset:g})=>{const u=l&&d.safari?"spacing":"spacingAndGlyphs",[h,p]=De.useState(),f=De.useCallback((t=>{const i=[];if(l&&null!=t&&t.getNumberOfChars()>0){let o=0;l.forEach((l=>{if(void 0!==g&&(l.startingCharIndex<g||l.startingCharIndex>g+e.trimStart().length))return;const d=null!=g?g:0,u=t.getStartPositionOfChar(Math.min(l.startingCharIndex-d,t.getNumberOfChars()-1)).x,h=t.getEndPositionOfChar(Math.min(l.endingCharIndex-d,t.getNumberOfChars()-1)).x;if(void 0===u||void 0===h)return;const p=l.hitNumber===c,f=r+3;i.push(De.createElement("rect",{x:u-1.5,y:n-r-1.5,width:h-u+3,height:f,opacity:1,fill:p?a.findInDocHighlightPrimary:a.findInDocHighlightSecondary,style:s,key:o})),o++}))}p(i)}),[e,n,r,s,l,c,g]);return De.createElement(De.Fragment,null,De.createElement("text",{className:a.textbox,direction:o,height:r,lengthAdjust:u,style:s,textLength:i,x:t,y:n,"data-test":"textbox",ref:l?f:void 0},e),l&&h)};Lt.displayName="HighlightedTextboxFragment";const xt=({data:{r:[e,t,n,i],d:r,dir:o,transformedText:s,font:l,h:c},onClickLink:d,findInDocHighlights:g,findInDocCurrentHit:u})=>{t=-t;const h={fontSize:c};if(r&&(h.transform=`rotate(${-r}rad)`,h.transformOrigin=`${e}px ${t}px`),l&&(h.fontFamily=l.fontFamily,l.isBold&&(h.fontWeight="bold"),l.isItalic&&(h.fontStyle="italic")),1===s.length){const a=s[0];return De.createElement(Lt,{text:a.text,x:e,y:t,width:n,height:i,dir:o,style:h,findInDocCurrentHit:u,findInDocHighlights:g})}const p=s.reduce(((e,t)=>e+t.text.length),0);let f=0;const m=s.map(((a,r)=>{const o=f/p*n+e,s=a.text.length/p*n,l=De.createElement(Lt,{text:a.text,x:o,y:t,width:s,height:i,findInDocCurrentHit:u,findInDocHighlights:g,charOffset:f});switch(f+=a.text.length,a.type){case qe.email:const e=`mailto:${a.text}`;return De.createElement("a",{key:r,href:e,referrerPolicy:"no-referrer"},l);case qe.link:return De.createElement("a",{key:r,href:a.href,target:"_blank",rel:"noreferrer noopener",referrerPolicy:"no-referrer",onClick:e=>d(e,a.href)},l);default:return l}}));return De.createElement("g",{className:a.textbox,direction:o,style:h,"data-test":"textbox"},m)};xt.displayName="TextBox";const Nt=({data:e,findInDocHighlights:n,findInDocCurrentHit:i,scaleFactor:r,onTextRendered:o})=>{const{textboxes:s,dimension:[l,c]}=e,d=g.useDispatch();t.useEffect((()=>{o(e.pageIndex)}),[e,o]);const u=(e,t)=>{e.preventDefault(),t&&d(a.openUrl({url:t}))},h={transform:`scale(${r})`},p=s.map(((e,t)=>De.default.createElement(xt,{onClickLink:u,key:t,data:e,findInDocHighlights:null==n?void 0:n.get(t),findInDocCurrentHit:i})));return De.default.createElement("svg",{className:a.textLayer,viewBox:`0 -${c} ${l} ${c}`,width:l,height:c,style:h,"data-test":"text-layer"},p)};Nt.displayName="TextLayer";const St=e=>t=>{const i=[De.createElement(_t,Object.assign({key:"image"},e,t)),De.createElement(pt,Object.assign({key:"highlights"},e,t)),De.createElement(Nt,Object.assign({key:"text",onTextRendered:e.onTextRendered,scaleFactor:a.getScaleFactorFromFilePreviewUi(e.filePreviewUiData)},t)),De.createElement(wt,Object.assign({key:"links"},e,t))];return function(e,t,i){const{activeOverlayPlugin:r,titleBarActionSetters:o,previewKey:s}=e,l=i,c=a.isNestedArchiveFilePreviewKey(s),d=e.filePreviewUiData,g=a.getRootDocUi(d);if(c)return l;if(null!=r&&void 0!==g){const{data:{pageIndex:e,dimension:i}}=t,a={width:i[0],height:i[1]},s={previewType:n.PreviewType.SsrDoc,ui:g,layer:{dimensions:a,pageIndex:e},titleBarActionSetters:o},{layerUI:{Layer:c}}=r;if(null!=c)return[...l,De.createElement(c,Object.assign({key:"plugin"},s))]}return i}(e,t,i)},At=({passwordAttempt:e,onSubmit:t,onDismiss:i,fileName:r})=>{const o=n.useIntl(),[s,l]=De.useState("");De.useEffect((()=>l("")),[e]);const c=a.useStabilizedCallback((e=>{l(e.currentTarget.value)})),d=a.useStabilizedCallback((e=>{"Enter"===e.key&&t(s)})),g=a.useStabilizedCallback((()=>{t(s)})),u=e>0,h=o.formatMessage({id:"GKzMoF",defaultMessage:"Close"});return De.createElement(n.Modal,{open:!0,isCentered:!0,withCloseButton:h,onRequestClose:i},De.createElement(n.Modal.Header,{hasBottomSpacing:"title-standard"},De.createElement(n.Modal.Title,null,o.formatMessage({id:"jvUwnG",defaultMessage:"This file is password protected"}))),De.createElement(n.Modal.Body,null,!!r&&De.createElement(n.TextInput,{type:"text",value:r,style:{display:"none"},wrapperProps:{style:{display:"none"}}}),De.createElement("label",null,u?o.formatMessage({id:"qW3q74",defaultMessage:"The password you entered is incorrect, please try again."}):o.formatMessage({id:"qeA+3O",defaultMessage:"Enter password to continue."}),De.createElement(n.TextInput,{autoFocus:!0,type:"password",value:s,isInvalid:u,placeholder:o.formatMessage({id:"4RJ0I8",defaultMessage:"Password"}),onChange:c,wrapperProps:{style:{marginTop:"15px"}},onKeyDown:d}))),De.createElement(n.Modal.Footer,null,De.createElement(n.Button,{variant:"opacity",onClick:i},o.formatMessage({id:"xuJw2w",defaultMessage:"Cancel"})),De.createElement(n.Button,{variant:"primary",onClick:g},o.formatMessage({id:"RS9CyP",defaultMessage:"Submit"}))))};At.displayName="PasswordModal";const Et=({data:e={pageIndex:0,dimension:[0,0],thumbnailUrl:"",imgUrls:{"1x":"","4x":"",imageUrlTmpl:""},textboxes:[],links:[]},scaleFactor:t=0,children:n=(()=>null),onRef:i=(()=>{}),onMouseMove:r,onMouseUp:o,onMouseEnter:s,onMouseDown:l,isFocused:c,findInDocHighlights:d,findInDocCurrentHit:g})=>{const{pageIndex:u,dimension:[h,p]}=e,f=De.useRef(null);return De.useEffect((()=>(null!=i&&i(u,f.current),()=>{i(u,null)})),[i,u]),De.createElement("div",{id:`pageContainer${u+1}`,"data-testid":`pageContainer${u+1}`,className:a.page,"data-index":u,style:{width:h*t,height:p*t},onMouseDown:l,onMouseMove:r,onMouseUp:o,onMouseEnter:s,ref:f,role:"presentation"},n({isFocused:c,data:e,findInDocHighlights:d,findInDocCurrentHit:g}))};Et.displayName="Page";const It=De.memo((e=>{const{index:t,pageData:n,isFocused:i,onMouseDown:a,onMouseEnter:r,onMouseMove:o,onMouseUp:s,onRef:l,scaleFactor:c,children:d,top:g,findInDocHighlights:u,findInDocCurrentHit:h}=e,{dimension:[p,f]}=n,m=De.useMemo((()=>({width:p*c,height:f*c,transform:`translateY(${g}px)`})),[p,f,c,g]);return De.createElement("li",{"data-index":t,key:t,style:m},De.createElement(Et,{data:n,onMouseDown:a,onMouseEnter:r,onMouseMove:o,onMouseUp:s,scaleFactor:c,isFocused:i,onRef:l,findInDocHighlights:u,findInDocCurrentHit:h},d))}));It.displayName="PdfPage",It.displayName="PdfPage";class Ct extends De.PureComponent{constructor(e){super(e),this.state={currentPageIndex:0,startPage:0,endPage:0,pagesScrollTop:[]},this.__viewportEl=null,this.viewportElRef=e=>this.__viewportEl=e,this.totalPagesHeight=0,this.maxWidth=0,this.ol=null,this.handleScrollTopChange=()=>{this.__viewportEl&&(this.props.pageNavigation&&this.props.dispatchResolvePageNavigation(),this.setStateForStartAndEndPage(this.state.pagesScrollTop))},this.throttledHandleScrollTopChange=s.throttle((()=>this.handleScrollTopChange()),50,{leading:!0}),this.scrollDown=()=>{this.__viewportEl&&this.__viewportEl.scrollTo(0,this.__viewportEl.scrollTop+60)},this.scrollUp=()=>{this.__viewportEl&&this.__viewportEl.scrollTo(0,this.__viewportEl.scrollTop-60)},this.pageUp=()=>{this.scrollToPage(Math.max(0,this.state.currentPageIndex-1))},this.pageDown=()=>{this.props.count&&this.scrollToPage(Math.min(this.props.count-1,this.state.currentPageIndex+1))},e.findInDocController&&e.findInDocController.setRetrieveCurrentPageIndex((()=>this.state.currentPageIndex))}getMargin(){return a.DOC_LI_MARGIN}computeScrollTops(){const{pages:e,scaleFactor:t}=this.props,n=a.DOC_LI_MARGIN,i=[n];let r=n;for(let a=1;a<e.length;++a){const o=e[a-1].dimension[1]*t+n;i.push(r+o),r+=o}if(e.length>0){const i=e[e.length-1].dimension[1]*t;this.totalPagesHeight=r+i+2*n}return this.setState({pagesScrollTop:i}),i}updateMaxWidth(){const{pages:e,scaleFactor:t}=this.props;let n=0;for(let t=0;t<e.length;++t){const i=e[t].dimension[0];i>n&&(n=i)}this.maxWidth=n*t}setStateForStartAndEndPage(e){if(!this.__viewportEl)return;const t=s.sortedIndex(e,this.__viewportEl.scrollTop),n=(t>0?(e[t-1]+e[t])/2:-1)>this.__viewportEl.scrollTop||e[t]>this.__viewportEl.scrollTop+this.__viewportEl.offsetHeight/2?t-1:Math.min(t,e.length-1),[i,a]=[n-1,n+1],r=Math.max(0,i-10),o=Math.min(this.props.pages.length-1,a+10);this.setState({startPage:r,endPage:o,currentPageIndex:n})}scrollToPage(e,t=null,n){const{count:i,scaleFactor:r}=this.props;if(e<0||e>=i||!this.ol||!this.__viewportEl)return;const o=t?t[e]:this.state.pagesScrollTop[e],s=n?n*r-this.__viewportEl.clientHeight/2:0;this.__viewportEl.scrollTop=Math.max(o+a.DOC_LI_MARGIN+s,a.DOC_LI_MARGIN)}componentDidMount(){const e=this.computeScrollTops();this.updateMaxWidth(),this.__viewportEl&&this.setStateForStartAndEndPage(e)}componentDidUpdate(e,t){let n;t.currentPageIndex!==this.state.currentPageIndex&&this.props.onPageChange&&this.props.onPageChange(this.state.currentPageIndex,e.currentPageIndex),e.pages===this.props.pages&&e.scaleFactor===this.props.scaleFactor||(n=this.computeScrollTops(),this.setStateForStartAndEndPage(n),this.updateMaxWidth(),e.scaleFactor!==this.props.scaleFactor&&this.scrollToPage(this.state.currentPageIndex,n)),this.props.pageNavigation&&e.pageNavigation&&this.props.previewKey.serialized!==e.previewKey.serialized?this.props.dispatchResolvePageNavigation():this.props.pageNavigation&&this.scrollToPage(this.props.pageNavigation.pageIndex,n,this.props.pageNavigation.centerOnYOffset)}makePdfPage(e){const{children:t,pages:n,onMouseDown:i,onMouseEnter:a,onMouseMove:r,onMouseUp:o,scaleFactor:s,findInDocData:l}=this.props,c=n[e],d=this.state.pagesScrollTop[e];return De.createElement(It,{key:c.pageIndex,index:e,pageData:c,isFocused:this.state.currentPageIndex===e,onMouseDown:i,onMouseEnter:a,onMouseMove:r,onMouseUp:o,onRef:this.props.onPageRef,scaleFactor:s,top:d,children:t,findInDocHighlights:null==l?void 0:l.highlights.get(e),findInDocCurrentHit:null==l?void 0:l.currentHit})}render(){const{className:e,pages:t,brandingInfo:n,sharedLinkInfo:i,isEditing:a}=this.props,{startPage:r,endPage:o}=this.state,s={height:this.totalPagesHeight,minWidth:`${this.maxWidth+50}px`};return De.createElement("div",{className:e,onScroll:this.throttledHandleScrollTopChange,ref:this.viewportElRef,"data-preview-viewport":!0},De.createElement("ol",{ref:e=>this.ol=e,style:s},De.createElement(u.FilePreviewBrandingLogoAndSocials,{teamBranding:i,userBranding:n,isEditing:a}),t.slice(r,o+1).map(((e,t)=>this.makePdfPage(r+t)))))}}Ct.displayName="PdfPages";const Pt=parseInt(a.thumbnailWidth,10),yt=parseInt(a.border,10),Dt=Pt-2*yt,Mt=parseInt(a.sidebarWidth,10);const kt=({isSelected:e,onClick:t,index:i,intl:r,thumbnailUrl:o,aspectRatio:s,isVisible:l,isEditMode:c,isSidebarFocused:d,top:g})=>{const u=De.useRef(null),[h,p]=De.useState(!1),[f,m]=De.useState(!1),v=De.useCallback((()=>{m(!0)}),[]),_=De.useCallback((()=>{p(!0)}),[]),b=De.useRef(e);De.useEffect((()=>{var t;d&&e&&!b.current&&(null===(t=u.current)||void 0===t||t.focus())}),[d,e]),De.useEffect((()=>{b.current=e}),[e]);const w=i+1,L=r.formatMessage({id:"HL27OJ",defaultMessage:"Page {index}"},{index:w});return De.createElement("li",{"data-index":i,style:{transform:`translateY(${g}px`}},De.createElement("a",{href:"#",onClick:e=>{e.preventDefault(),t(i)},tabIndex:-1,"aria-current":e?"page":void 0,"aria-label":L,ref:u},De.createElement("div",{className:a.thumbnailContainer},De.createElement("div",{className:n.cx(a.thumbnail,{[a.selected]:e,[a.isUnfocusedInEditMode]:c&&!d}),style:{height:Dt*s+2*yt}},!l||(h||f)&&o?void 0:De.createElement(n.Spinner,{className:a.loader,size:"xsmall"}),l&&o&&!h?De.createElement("img",{src:o,onLoad:v,onError:_,alt:""}):void 0),De.createElement("span",{"aria-hidden":!0},w))))};kt.displayName="InternalSidebarItem";class Ft extends De.Component{constructor(){super(...arguments),this.containerHeight=0,this.state={startPage:0,endPage:0,startPageNoBuffer:0,endPageNoBuffer:0,pagesScrollTop:[],totalPagesHeight:0},this.handleScrollTo=s.throttle((e=>{this.nav&&(this.nav.scrollTop=this.state.pagesScrollTop[e])}),50,{leading:!1,trailing:!0}),this.handleScrollTopChange=()=>{this.ol&&this.setStateForStartAndEndPage(this.state.pagesScrollTop)},this.throttledHandleScrollTopChange=s.throttle((()=>this.handleScrollTopChange()),50,{leading:!0})}computeScrollTops(){const{pages:e}=this.props;if(0===e.length)return[];const t=[32];let n=32;for(let i=0;i<e.length-1;++i){const a=e[i].dimension,r=Dt*a[1]/a[0]+2*yt+24+20+24;t.push(n+r),n+=r}const i=e[e.length-1].dimension,a=n+(Dt*i[1]/i[0]+2*yt)+48;return this.state.totalPagesHeight=a,this.setState({pagesScrollTop:t,totalPagesHeight:a}),t}scrollToItemIfNeeded(e){const{startPageNoBuffer:t,endPageNoBuffer:n}=this.state,{pages:i}=this.props;e<0||e>=i.length||!this.nav||(e<t||e>=n)&&this.handleScrollTo(e)}setStateForStartAndEndPage(e){const[t,n]=[s.sortedIndex(e,this.nav.scrollTop),s.sortedIndex(e,this.nav.scrollTop+this.nav.offsetHeight)];this.setState({startPageNoBuffer:t,endPageNoBuffer:n,startPage:Math.max(0,t-10),endPage:Math.min(this.props.pages.length-1,n+10)})}shouldComponentUpdate(e,t){const i=this.props,{pages:a}=i,o=r.__rest(i,["pages"]),{pages:s}=e,l=r.__rest(e,["pages"]);return!n.shallowEqual(o,l)||!n.shallowEqual(this.state,t)||!function(e,t){return e.length===t.length&&!e.find(((e,n)=>e.thumbnailUrl!==t[n].thumbnailUrl))}(a,s)}componentDidMount(){const e=this.computeScrollTops();this.setStateForStartAndEndPage(e),this.containerHeight=this.nav.offsetHeight}componentDidUpdate(e){this.nav&&this.nav.offsetHeight!==this.containerHeight&&(this.setStateForStartAndEndPage(this.state.pagesScrollTop),this.containerHeight=this.nav.offsetHeight),(this.props.currentPageIndex!==e.currentPageIndex||this.props.isOpened&&!e.isOpened)&&this.scrollToItemIfNeeded(this.props.currentPageIndex)}render(){const{currentPageIndex:e,isFocused:t,onBlur:i,onFocus:r,pages:o,intl:s,style:l,isOpened:c,isEditMode:d}=this.props,{startPage:g,endPage:u,totalPagesHeight:h}=this.state,p=o.slice(g,u+1).map(((n,i)=>{const a=i+g;return De.createElement(kt,{key:a,isSelected:e===a,onClick:this.props.onPageChange,index:a,intl:s,thumbnailUrl:n.thumbnailUrl,isVisible:!0,aspectRatio:n.dimension[1]/n.dimension[0],isSidebarFocused:!0===t,isEditMode:d,top:this.state.pagesScrollTop[a]})})),f={height:h,display:c?void 0:"none"};return De.createElement("div",{className:n.cx(a.container$1,{[a.focused]:t,[a.open]:c,[a.isEditMode]:d}),"aria-label":s.formatMessage({id:"HzLiwF",defaultMessage:"Document Sidebar"}),style:l,ref:e=>{this.nav=e},onScroll:this.throttledHandleScrollTopChange,"aria-hidden":!c},De.createElement("ol",{"aria-label":s.formatMessage({id:"J/2gSB",defaultMessage:"Page list"}),ref:e=>this.ol=e,tabIndex:c?0:-1,onFocus:r,onBlur:i,style:f},p))}}Ft.defaultProps={currentPageIndex:0,pages:[],onPageChange:function(){}},Ft.displayName="Sidebar";const Tt=({comments:e,activeOverlayEditor:i,activeTextHighlighter:r,textHighlighters:o,brandingInfo:s,featureConfig:l,data:c,fileInfo:d,fileMetadata:f,filePreviewUiData:m,fileViewerId:v,fileViewerUiData:_,findInDocController:b,findInDocData:w,header:L,height:x,layerRenderFn:N,logSidebarPageClick:S,onInteractive:A,onMouseDown:E,onMouseEnter:I,onMouseMove:C,onMouseUp:P,onPageChange:y,onPageImageError:D,onPageRef:M,onRenderSucceeded:k,previewKey:F,previewMetadata:T,rivieraData:O,sharedLinkInfo:R,titleBarActionSetters:B,width:U,logDocPageload:H,isEditing:V})=>{const[K,j]=t.useState(!1),[z,W]=t.useState(!1),q=t.useRef(null),$=t.useRef({}),G=g.useDispatch(),X=n.useIntl(),{currentPageIndex:J}=m,Y=a.getScaleFactorFromFilePreviewUi(m),{isDocSidebarOpen:Q,isFullScreen:Z}=_,ee=a.shouldShowDocSidebar(U,n.PreviewType.SsrDoc),te=ee&&Q,ne=a.useFileViewerSelector(a.isPluginEditMode,v),ie=a.isMobileRedesignEnabled(l),ae=t.useCallback((()=>{j(!0)}),[]),re=t.useCallback((()=>{j(!1)}),[]),oe=a.useStabilizedCallback(((e,t)=>{G(a.pageNavigation({fileViewerId:v,previewKey:F,sourceContext:t,pageIndex:e}))})),se=a.useStabilizedCallback((e=>{ae(),oe(e,n.UserActionContext.DocSidebar),null==S||S()})),le=a.useStabilizedCallback((()=>{G(a.resolvePageNavigation({fileViewerId:v,previewKey:F,sourceContext:n.UserActionContext.Default}))})),ce=a.useStabilizedCallback((()=>{!z&&Object.keys($.current).find((e=>3===$.current[+e]))&&(W(!0),null==k||k())})),de=t.useCallback((e=>{oe(e,n.UserActionContext.DocLink)}),[oe]),ge=t.useCallback(((e,t)=>{$.current[e]|=2,A(),ce(),n.PreviewsEventLogger.mark(n.PreviewsTimingEvents.FVSDK_FIRST_DOC_PAGE_ON_LOAD),null==H||H(n.DocPageLoadState.Loaded,{durationMs:t})}),[ce,A,H]),ue=t.useCallback(((e,t)=>{null==D||D(),null==H||H(n.DocPageLoadState.Error,{error:t})}),[D,H]),he=t.useCallback((e=>{$.current[e]|=1,ce()}),[ce]),pe=t.useCallback((()=>{var e;null===(e=q.current)||void 0===e||e.pageDown()}),[]),fe=t.useCallback((()=>{var e;null===(e=q.current)||void 0===e||e.pageUp()}),[]),me=t.useCallback((()=>{var e;null===(e=q.current)||void 0===e||e.scrollDown()}),[]),ve=t.useCallback((()=>{var e;null===(e=q.current)||void 0===e||e.scrollUp()}),[]),_e=a.useStabilizedCallback((()=>K?fe():ve())),be=a.useStabilizedCallback((()=>K?pe():me())),we=t.useCallback((()=>{oe(0,n.UserActionContext.Keyboard)}),[oe]),Le=t.useCallback((()=>{oe(O.pages.length-1,n.UserActionContext.Keyboard)}),[oe,O.pages.length]),xe=t.useMemo((()=>[...a.getPageUpDownBindings({pageUp:fe,pageDown:pe}),...a.getUpDownBindings({up:_e,down:be}),...a.getHomeEndBindings({home:we,end:Le})]),[fe,pe,_e,be,we,Le]),Ne=t.useMemo((()=>(c||[]).slice(0,z?void 0:1)),[c,z]);return De.createElement(De.Fragment,null,De.createElement("article",{className:n.cx(a.container),style:{visibility:z?"visible":"hidden"},"data-testid":"document-container"},(z||Q)&&ee&&!Z?De.createElement(Ft,{isOpened:Q,isEditMode:ne,currentPageIndex:J,pages:c,intl:X,isFocused:K,onPageChange:se,onFocus:ae,onBlur:re,featureConfig:l}):null,De.createElement(p.PluginHeader,{comments:e,header:L},l.mobile_web&&ie&&De.createElement(h.MobilePageInfoChip,{currentPage:J+1,totalPages:O.pages.length}),De.createElement(u.FilePreviewBrandingBackground,{teamBranding:R,userBranding:s,isEditing:V},De.createElement(Ct,{className:n.cx(a.pdfViewport),count:c?c.length:1,height:x,onMouseDown:E,onMouseEnter:I,onMouseMove:C,onMouseUp:P,onPageChange:y,currentPageIndex:J,pages:Ne,ref:q,scaleFactor:Y,width:te?U-Mt:U,pageNavigation:m.pageNavigation,dispatchResolvePageNavigation:le,onPageRef:M,previewKey:F,findInDocData:w,findInDocController:b,brandingInfo:s,sharedLinkInfo:R,isEditing:V},N({activeOverlayPlugin:i||r||e,textHighlighters:o,featureConfig:l,fileViewerUiData:_,dispatch:G,fileInfo:d,fileMetadata:f,filePreviewUiData:m,fileViewerId:v,intl:X,previewKey:F,previewMetadata:T,onImageError:ue,onImageLoad:ge,onInternalLinkClicked:de,onTextRendered:he,titleBarActionSetters:B}))))),De.createElement(a.KeyboardBindingConnector,{name:"preview_pdf",keyboardBindings:xe}))};Tt.displayName="PreviewPDF";const Ot=({comments:e,activeOverlayEditor:i,textHighlighters:r,activeTextHighlighter:o,brandingInfo:l,featureConfig:c,data:d,fileInfo:f,fileMetadata:m,filePreviewUiData:v,fileViewerId:_,fileViewerUiData:b,findInDocController:w,findInDocData:L,header:x,height:N,layerRenderFn:S,logSidebarPageClick:A,onInteractive:E,onPageChange:I,onPageMouseDown:C,onPageMouseEnter:P,onPageMouseMove:y,onPageMouseUp:D,onPageRef:M,onRenderSucceeded:k,previewKey:F,previewMetadata:T,refCallback:O,rivieraData:R,sharedLinkInfo:B,width:U,logDocPageload:H,isEditing:V})=>{const[K,j]=t.useState(!0),[z,W]=t.useState(!1),q=t.useRef(new Set),$=t.useRef({}),G=g.useDispatch(),X=n.useIntl(),J=v.currentPageIndex,Y=a.getScaleFactorFromFilePreviewUi(v),{isDocSidebarOpen:Q,isFullScreen:Z}=b,ee=z&&a.shouldShowDocSidebar(U,n.PreviewType.SsrDoc)&&!Z,te=a.isMobileRedesignEnabled(c);t.useEffect((()=>{const e=Math.max(0,J-10),t=Math.min(d.length-1,J+10);d.slice(e,t+1).map((e=>{const{pageIndex:t,imgUrls:n}=e;q.current.has(t)||(a.rivieraClient.fetchDocImage({page:t,imageUrlTmpl:n.imageUrlTmpl}).catch(),q.current.add(t))}))}),[J,d]),t.useEffect((()=>{w&&w.setRetrieveCurrentPageIndex((()=>v.currentPageIndex))}),[]),t.useEffect((()=>{var e,t;(null===(e=v.pageNavigation)||void 0===e?void 0:e.pageIndex)&&(I(null===(t=v.pageNavigation)||void 0===t?void 0:t.pageIndex,n.UserActionContext.Default),G(a.resolvePageNavigation({fileViewerId:_,previewKey:F,sourceContext:n.UserActionContext.Default})))}),[v.pageNavigation,I,G,_,F]);const ne=a.useStabilizedCallback((e=>{ae(),null==A||A(),I&&I(e,n.UserActionContext.DocSidebar)})),ie=a.useStabilizedCallback(s.debounce((e=>{if(!d.length)return;const t=a.getScaleFactorFromFilePreviewUi(v),{currentPageIndex:i}=v,r=(o=d[i].dimension,s=[U,N],a.calculateFitBox(s[0],s[1],o[0]/o[1])[0]/o[0]);var o,s;t.toFixed(2)<=r.toFixed(2)&&I&&I(i+(e.deltaY>0?1:-1),n.UserActionContext.MouseWheel)}),40,{leading:!0,trailing:!1})),ae=t.useCallback((()=>{j(!0)}),[]),re=t.useCallback((()=>{j(!1)}),[]),oe=a.useStabilizedCallback((()=>{!z&&Object.keys($.current).find((e=>3===$.current[+e]))&&(W(!0),null==k||k())})),se=t.useCallback((()=>{}),[]),le=t.useCallback(((e,t)=>($.current[e]|=2,E(),n.PreviewsEventLogger.mark(n.PreviewsTimingEvents.FVSDK_FIRST_DOC_PAGE_ON_LOAD),t&&(null==H||H(n.DocPageLoadState.Loaded,{durationMs:t})),oe())),[oe,E,H]),ce=t.useCallback(((e,t)=>{null==H||H(n.DocPageLoadState.Error,{error:t})}),[H]),de=t.useCallback((e=>{$.current[e]|=1,oe()}),[oe]),ge=a.useStabilizedCallback((()=>I(v.currentPageIndex-1,n.UserActionContext.Keyboard))),ue=a.useStabilizedCallback((()=>I(v.currentPageIndex+1,n.UserActionContext.Keyboard))),he=a.useStabilizedCallback((()=>I(0,n.UserActionContext.Keyboard))),pe=a.useStabilizedCallback((()=>I(R.pages.length-1,n.UserActionContext.Keyboard))),fe=t.useMemo((()=>[...a.getPageUpDownBindings({pageUp:ge,pageDown:ue}),...a.getUpDownBindings({up:ge,down:ue}),...a.getHomeEndBindings({home:he,end:pe})]),[ue,he,pe,ge]);return De.createElement(De.Fragment,null,De.createElement("article",{ref:O,className:a.container,style:{visibility:z?"visible":"hidden",height:N,width:U},"data-testid":"presentation-container"},ee?De.createElement(Ft,{currentPageIndex:J,pages:d,intl:X,isFocused:K,onPageChange:ne,onFocus:ae,onBlur:re,isOpened:Q,featureConfig:c}):null,De.createElement(p.PluginHeader,{comments:e,header:x,"data-preview-viewport":!0},c.mobile_web&&te&&De.createElement(h.MobilePageInfoChip,{currentPage:J+1,totalPages:R.pages.length}),De.createElement(u.FilePreviewBrandingBackground,{teamBranding:B,userBranding:l,isEditing:V},De.createElement("section",{className:a.pptViewport,onWheel:ie,"data-testid":"ppt-page"},De.createElement("div",{className:a.pptSizer},De.createElement(u.FilePreviewBrandingLogoAndSocials,{teamBranding:B,userBranding:l,isEditing:V}),De.createElement(Et,{key:J,onMouseDown:C,onMouseEnter:P,onMouseMove:y,onMouseUp:D,onRef:M,data:d?d[J]:void 0,scaleFactor:Y,findInDocHighlights:null==L?void 0:L.highlights.get(J),findInDocCurrentHit:null==L?void 0:L.currentHit},S({activeOverlayPlugin:i||o||e,textHighlighters:r,featureConfig:c,fileViewerUiData:b,dispatch:G,fileInfo:f,fileMetadata:m,filePreviewUiData:v,fileViewerId:_,intl:X,previewKey:F,previewMetadata:T,onImageError:ce,onImageLoad:le,onInternalLinkClicked:se,onTextRendered:de}))))))),De.createElement(a.KeyboardBindingConnector,{name:"preview_ppt",keyboardBindings:fe}))};Ot.displayName="PreviewPPT";const Rt=[".docx",".pptx"];class Bt extends De.PureComponent{constructor(e){super(e),this.state={transformedData:this.props.rivieraData&&tt(this.props.rivieraData)},this.pageRefs={},this.capturePageRef=(e,t)=>{null==t?delete this.pageRefs[e]:this.pageRefs[e]={el:t,pageIndex:e}},this.handlePageChange=(e,t)=>{var n,i;this.props.dispatch(a.updateDocCurrentPageIndex({fileViewerId:this.props.fileViewerId,previewKey:this.props.previewKey,pageIndex:e,totalPageCount:null===(i=null===(n=this.props.rivieraData)||void 0===n?void 0:n.metadata)||void 0===i?void 0:i.page_count,sourceContext:t}))},this.handlePdfPageChange=e=>{this.handlePageChange(e,n.UserActionContext.MouseWheel)},this.getPageForSelection=e=>{if(null!=e)for(const{pageIndex:t,el:n}of Object.values(this.pageRefs))if(null!=n&&null!=e.anchorNode&&e.anchorNode.compareDocumentPosition(n)&Node.DOCUMENT_POSITION_CONTAINS&&null!=e.focusNode&&e.focusNode.compareDocumentPosition(n)&Node.DOCUMENT_POSITION_CONTAINS)return t},this.handlePasswordSubmit=e=>{const{fileViewerId:t,fileInfo:o,sharedLinkInfo:s,previewKey:l,previewMetadata:c,dispatch:d,subpaths:g}=this.props;if(!c||!c.content)return;d(a.incrementDocPasswordAttempts({fileViewerId:t,previewKey:l}));const{refresh_url:u}=c.content;a.invariant(!!u,i.FVErrorCode.MalformedRivieraData,i.ErrorLifecycle.Render,"Cannot send password! Missing refresh_url from preview metadata"),((e,t,o,s,l,c,d,g)=>{r.__awaiter(void 0,void 0,void 0,(function*(){var r;const u=a.prepareArchiveQueryFileInfo(o,s),h=yield a.rivieraClient.refreshDocBlob(l,c);if((null===(r=h.error)||void 0===r?void 0:r.statusCode)===i.RivieraStatus.PasswordProtected)return;if(h.error)return void f.queryClient.setQueryData(a.createPreviewMetadataQueryKey(u),{apiData:{results:[{file:u,preview:{previewKey:e,previewType:n.PreviewType.Error,error:new i.FVError(i.FVErrorCode.RivieraDataFetchFailure,i.ErrorLifecycle.Download,h.error.message)}}]},pkgData:{previewKey:e,previewType:n.PreviewType.Error,error:new i.FVError(i.FVErrorCode.RivieraDataFetchFailure,i.ErrorLifecycle.Download,h.error.message)}});const p=h.data,m={content:Object.assign(Object.assign({},null==t?void 0:t.content),{text_url_tmpl:p.text,image_url_tmpl:p.image,refresh_url:p.refresh,".tag":"ssr_doc"}),preview_url:null==t?void 0:t.preview_url,previewType:n.PreviewType.SsrDoc};a.updatePreviewMetadata(u,m,e,d,g)}))})(l,c,o,s,u,e,g)},this.showPasswordProtectedError=()=>{const e=a.isNestedArchiveFilePreviewKey(this.props.previewKey)?a.prepareArchiveQueryFileInfo(this.props.fileInfo,this.props.sharedLinkInfo):a.prepareFileInfo(this.props.fileInfo,this.props.sharedLinkInfo);a.updatePreviewMetadata(e,{previewType:n.PreviewType.Error,error:new i.FVError(i.FVErrorCode.PasswordProtected,i.ErrorLifecycle.Download)},this.props.previewKey,this.props.subpaths)},this.hasFetchedPageData=e=>this.metadataBatchPageRanges.some((t=>e[0]>=t[0]&&e[1]<=t[1])),this.fetchPageRange=e=>{this.metadataBatchPageRanges.push(e),this.props.fetchNextPageBatch({pageParam:{continueArg:{apiArg:{batchFirstPage:e[0],batchLastPage:e[1]},pkgArg:this.props.rivieraData}}})},this.maybeFetchPageDataWithMetadata=e=>{const t=a.calculatePageRange(e);this.hasFetchedPageData(t)||this.fetchPageRange(t);const n=a.getNextPageRange(t);!this.hasFetchedPageData(n)&&a.shouldFetchNextBatch(e,t)&&this.props.rivieraData.metadata&&n[0]<this.props.rivieraData.metadata.page_count&&this.hasFetchedPageData(n)},this.onRenderSucceeded=()=>{this.props.onRenderSucceeded(),this.maybeFetchPageDataWithMetadata(this.props.filePreviewUiData.currentPageIndex)},this.zoomIn=()=>{const{dispatch:e,fileViewerId:t,previewKey:i}=this.props;e(a.zoomIn({fileViewerId:t,previewKey:i,sourceContext:n.UserActionContext.Keyboard}))},this.zoomOut=()=>{const{dispatch:e,fileViewerId:t,previewKey:i}=this.props;e(a.zoomOut({fileViewerId:t,previewKey:i,sourceContext:n.UserActionContext.Keyboard}))},this.logSidebarPageClick=()=>{this.props.dispatch(a.logUserActionEvent({userAction:n.UserAction.SelectSidebarPage,fileViewerId:this.props.fileViewerId,actionContext:n.UserActionContext.LeftRail}))},this.logDocPageload=(e,t)=>{const i=null==t?void 0:t.durationMs,r=null==t?void 0:t.error;this.props.dispatch(a.logBackgroundEvent({event:n.BackgroundEvent.DocPageLoad,fileViewerId:this.props.fileViewerId,extra:Object.assign(Object.assign({status:e},i?{durationMs:null==i?void 0:i.toString()}:{}),r?{error:r}:{})}))},this.logFindAction=(e,t,n)=>{this.props.dispatch(a.logUserActionEvent({userAction:e,fileViewerId:this.props.fileViewerId,actionContext:t,extra:{find_method:n}}))},this.findInDoc=e=>{if(this.state.findInDoc){if(this.logFindAction(n.UserAction.FindInDocStart,"keyboard"===e?n.UserActionContext.Keyboard:n.UserActionContext.Toolbar,e),"click"===e&&this.props.dispatch(a.logUserActionEvent({userAction:n.UserAction.Search,fileViewerId:this.props.fileViewerId,actionContext:n.UserActionContext.PreviewToolbar})),this.props.rivieraData.metadata){const e=[0,this.props.rivieraData.metadata.page_count];this.hasFetchedPageData(e)||(this.metadataBatchPageRanges.push(e),this.state.findInDoc.controller.fetchTextForAllPages())}this.setState({findInDoc:Object.assign(Object.assign({},this.state.findInDoc),{searchbarShown:!0})})}},this.closeFindInDoc=e=>{this.state.findInDoc&&(this.logFindAction(n.UserAction.FindInDocEnd,"keyboard"===e?n.UserActionContext.Keyboard:n.UserActionContext.FindInDocSearchbar,e),this.state.findInDoc.controller.onReset(),this.setState({findInDoc:Object.assign(Object.assign({},this.state.findInDoc),{searchbarShown:!1,searchResult:void 0})}))},this.keyboardBindings=[...a.getZoomInOutBindings({zoomIn:this.zoomIn,zoomOut:this.zoomOut}),a.getBrowserFindBinding((()=>this.logFindAction(n.UserAction.FindInDocStart,n.UserActionContext.Keyboard,"keyboard"))),a.getFindInDocBinding((()=>this.findInDoc("keyboard")))],this.metadataBatchPageRanges=[[0,a.TEXT_BATCH_SIZE]],n.PreviewsEventLogger.mark(n.PreviewsTimingEvents.FVSDK_DOC_CONTAINER_START),this.state.findInDoc={searchbarShown:!1,controller:new it({fileViewerId:e.fileViewerId,previewKey:e.previewKey,dispatch:e.dispatch,retrievePages:()=>{var e,t;return null!==(t=null===(e=this.props.rivieraData)||void 0===e?void 0:e.pages)&&void 0!==t?t:[]},previewMetadata:e.previewMetadata,rivieraData:e.rivieraData,onSearchResult:e=>{this.state.findInDoc&&this.setState({findInDoc:Object.assign(Object.assign({},this.state.findInDoc),{searchResult:e})})},fetchNextPageChunk:e.fetchNextPageBatch})}}recalculateFitScaleFactor(e=this.props){var t;const{rivieraData:i,fileViewerId:r,previewKey:o,width:s,height:l,dispatch:c,featureConfig:d}=e;if(!i||!i.metadata)return;const g=a.shouldShowDocSidebar(s,n.PreviewType.SsrDoc)&&e.fileViewerUiData.isDocSidebarOpen,u=null===(t=this.props.fileMetadata)||void 0===t?void 0:t.file_name,{scaleToFit:h,maxWidth:p}=d.preview_types[n.PreviewType.SsrDoc],f=a.calculateDocumentScaleFactor({width:s,height:l,dimensions:i.metadata.dimensions,isDocSidebarVisible:g,scaleToFit:h,fileName:u,maxWidth:p});c(a.updateFitScaleFactor({fileViewerId:r,previewKey:o,fitScaleFactor:f}));const m=a.calcDocFitToWidthScale({width:s,dimensions:i.metadata.dimensions,isDocSidebarVisible:g,maxWidth:p});c(a.updateFitToWidthScaleFactor({fileViewerId:r,previewKey:o,storedFitToWidthScaleFactor:m}))}componentDidUpdate(){this.props.filePreviewUiData.passwordAttempts>=3&&this.showPasswordProtectedError()}componentDidMount(){this.props.fileMetadata&&Rt.includes(i.getFileExtension(this.props.fileMetadata.file_name))&&this.props.dispatch(a.triggerDynamicRoutingModalCheck()),this.recalculateFitScaleFactor(),n.PreviewsEventLogger.mark(n.PreviewsTimingEvents.FVSDK_DOC_CONTAINER_MOUNT)}UNSAFE_componentWillReceiveProps(e){const{rivieraData:t,previewMetadata:n}=e;t!==this.props.rivieraData&&this.setState({transformedData:t&&tt(t)});const{currentPageIndex:i}=e.filePreviewUiData;a.canPreviewInPreviewDoc(n)&&this.maybeFetchPageDataWithMetadata(i),this.recalculateFitScaleFactor(e)}render(){const{fileMetadata:e,filePreviewUiData:t,width:n,brandingInfo:r,sharedLinkInfo:o}=this.props,{transformedData:s,findInDoc:l}=this.state,c=e?e.file_name:"";if(c&&".pdf"!==i.getFileExtension(c)&&this.props.rivieraData.needsPassword)return this.showPasswordProtectedError(),null;if(this.props.rivieraData.needsPassword)return De.createElement(At,{passwordAttempt:t.passwordAttempts,onSubmit:this.handlePasswordSubmit,onDismiss:this.showPasswordProtectedError,fileName:c});const d=a.DOC_PAGE_MARGIN+a.DOC_PAGE_MARGIN_LEFT,g=Math.round(100*(n-d-a.DOC_SIDEBAR_WIDTH)/window.innerWidth/window.devicePixelRatio),u=Object.assign(Object.assign({},t),{viewportWidth:g}),h=Object.assign(Object.assign({},this.props),{onRenderSucceeded:this.onRenderSucceeded,filePreviewUiData:u,data:s||[],onPageChange:this.handlePdfPageChange,layerRenderFn:St,findInDocData:null==l?void 0:l.searchResult,findInDocController:null==l?void 0:l.controller,brandingInfo:r,sharedLinkInfo:o,logSidebarPageClick:this.logSidebarPageClick,logDocPageload:this.logDocPageload});return De.createElement("div",{className:a.app},De.createElement(a.PreviewControlWrapper,{onFindInDoc:()=>this.findInDoc("click"),getPageForSelection:this.getPageForSelection}),a.isPpt(c)?De.createElement(Ot,Object.assign({},h,{onPageChange:this.handlePageChange,onPageRef:this.capturePageRef})):De.createElement(Tt,Object.assign({},h,{onPageRef:this.capturePageRef})),l&&l.searchbarShown&&De.createElement(at,{onClose:this.closeFindInDoc,controller:l.controller}),De.createElement(a.KeyboardBindingConnector,{name:"preview_doc",keyboardBindings:this.keyboardBindings}))}}Bt.displayName="UnconnectedPreviewDoc";const Ut=e=>{const{fileViewerId:t,previewKey:r,rivieraData:o,fetchNextPageBatch:s,onRenderSucceeded:l,previewSessionId:c,brandingInfo:d}=e,u=n.useIntl(),h=g.useDispatch(),{isLoggedIn:p}=i.useFileViewerContext(),f=a.useFileViewerSelector(a.getSharedLinkInfo,t),m=a.usePreviewState(t,r,a.filterDocFilePreviewUiState),v=a.useCurrentPreviewMetadata(),_=a.useFileViewerSelector(a.getSubpaths,t),b=a.useFileViewerSelector(a.getRootFile,t),w=!!a.useFileViewerSelector(a.getSelectedEditPluginId,t),L=a.useRenderSucceededWithLogging(c,l);return(()=>{const{fileViewerId:e,optionalIOClients:{preferencesClient:t}}=i.useFileViewerContext(),r=g.useDispatch();De.useEffect((()=>{if(!(null==t?void 0:t.docSidebar))return;const i=t.docSidebar.getCollapsedState();r(i?a.closeDocSidebar({fileViewerId:e,sourceContext:n.UserActionContext.Initialization,skipLogging:!0}):a.openDocSidebar({fileViewerId:e,sourceContext:n.UserActionContext.Initialization,skipLogging:!0}))}),[r,e,null==t?void 0:t.docSidebar])})(),m&&o?De.createElement(Bt,Object.assign({},e,m,{onRenderSucceeded:L,intl:u,dispatch:h,isLoggedIn:p,sharedLinkInfo:f,brandingInfo:d,rivieraData:o,isEditing:w,fetchNextPageBatch:s,previewMetadata:v,subpaths:_,fileInfo:b})):null};Ut.displayName="PreviewDoc",e.PreviewDoc=Ut,e.UnconnectedPreviewDoc=Bt}));
//# sourceMappingURL=c_file_viewer_preview_doc.js-vflTwOcrY.map
