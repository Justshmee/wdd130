define(["exports","./c_init_data_runtime","./c_stormcrow_gating_factory","./e_core_exception","react","./c_react_query_helpers_helpers","./c_api_v2_client_base","./c_core_uri","./c_core_attribution_header","./c_csrf","metaserver/static/js/modules/constants/viewer","./c_api_v2_noauth_client","./c_stormcrow_types_log_exposure","./c_src_sink_index","./c_apex-metrics_src_types","./c_lodash-es_lodash","./e_folder_viewer_src_main","./e_edison","./c_init_data_edison","./c_core_xhr","./c_core_i18n","metaserver/static/js/langpack","./c_core_notify","react-dom","metaserver/static/js/modules/constants/web_experience_constants","metaserver/static/js/modules/constants/sharing","metaserver/static/js/modules/constants/locales","metaserver/static/js/modules/constants/file_viewer_configuration","metaserver/static/js/modules/constants/file_viewer_feature_experiments","metaserver/static/js/modules/constants/time","metaserver/static/js/modules/constants/login_and_register","metaserver/static/js/modules/constants/fingerprintjs_constants","./c_security_crypto"],(function(e,t,r,n,s,a,o,i,c,_,u,l,d,v,f,m,p,g,x,h,y,j,E,w,I,C,V,R,S,L,T,b,A){"use strict";function k(e){return e&&e.__esModule?e:{default:e}}var F=k(s);function G(e,s){return t.__awaiter(this,void 0,void 0,(function*(){const t={features:e};try{const e=yield r.getGatingClientSingleton().getVariant(t,s);return null==e?void 0:e.variantInfos}catch(e){return void n.reportException({err:e,severity:n.SEVERITY.CRITICAL,force:!0})}}))}function O(e){try{return r.getGatingClientSingleton().logExposure({stormcrowVariantInfo:e}),!0}catch(e){return n.reportException({err:e,severity:n.SEVERITY.CRITICAL,force:!0}),!1}}const Y=new Set(["OFF"]);e.getVariantAndLogExposure=function(e,t,r){G([e],r).then((r=>{var n;O({feature:e,variant:t,metadata:null===(n=null==r?void 0:r[0])||void 0===n?void 0:n.metadata})}))},e.getVariantInfos=G,e.logExposure=O,e.useLogExposureOnce=function(e,t=!1,r=Y){const n=F.default.useRef({});F.default.useEffect((()=>{(null==e?void 0:e.feature)&&(null==e?void 0:e.variant)&&!t&&!r.has(null==e?void 0:e.variant)&&n.current[e.feature]!==(null==e?void 0:e.variant)&&O(e)&&(n.current[e.feature]=null==e?void 0:e.variant)}),[t,r,e])}}));
//# sourceMappingURL=c_stormcrow_explicit_exposure_logging.js-vfl2GlQdf.map
