define(["./e_folder_viewer_src_main","react","./c_pap-events_navigation_navigate_to_replay","./c_core_i18n","./c_plugin_utils_getImageDefaultSizes","./c_es_hooks_useDispatch","./c_flux_store_listener"],(function(e,t,a,r,s,o,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var l,d=i(t);!function(e){e.HOME_STARRED="HOME_STARRED",e.HOME_RECENTS="HOME_RECENTS",e.BROWSE="BROWSE",e.FILE_VIEWER="FILE_VIEWER",e.SUGGESTED_STARS="SUGGESTED_STARS",e.HOME_TASKS="HOME_TASKS",e.QUICK_VIEW_BROWSE="QUICK_VIEW_BROWSE"}(l||(l={}));const u=[l.HOME_STARRED,l.HOME_RECENTS];const c=new class{logClick(t,r,s,o,n,i){if("BROWSE"===n)return Promise.resolve();const l=[];if(u.includes(n)){const e=i?a.StarredLoggingTypes.CLICK_STAR:a.StarredLoggingTypes.CLICK_UNSTAR;l.push(a.logHomeActivity({eventName:e,role:t.role,extra:{resource_id:r,id_type:s,is_dir:o}}))}const d=i?e.WebUserActionLogEvent.STAR:e.WebUserActionLogEvent.REMOVE_STAR;return l.push(e.WebUserActionLog.log(t.id,d,{resource_id:r,id_type:s,is_dir:o,role:t.role,source:n})),Promise.all(l)}};const _=({user:i,id:l,idType:u,isDir:_,source:S,itemName:E,onStarClick:g,tooltipPlacement:f,isReadOnly:m,isTabbing:p,tabIndex:R,starButtonClassName:v,alwaysShowUnstarred:T,ariaLabelledBy:C})=>{const M=e.useSelector((e=>a.getFileStarredData(e,l)));let b=!1,A=!0;(null==M?void 0:M.loadingState)===a.StarredLoadingStateEnum.LOAD_SUCCESS&&(b=M.isStarred,A=!1);const[O]=d.default.useState((()=>function(e){const t=()=>Math.floor(65536*(1+Math.random())).toString(16).substring(1),a=t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t();return e?e+a:a}("star-"))),L=o.useDispatch(),I=d.default.useRef(null),[y,D]=t.useState(!1),W=()=>{D(!1)};t.useEffect((()=>(y?window.addEventListener("scroll",W,!0):window.removeEventListener("scroll",W,!0),()=>window.removeEventListener("scroll",W,!0))),[y]);const w=d.default.useMemo((()=>m?b?r.intl.formatMessage({id:"LAVXPn",defaultMessage:"Starred"}):null:b?r.intl.formatMessage({id:"XQNf7s",defaultMessage:"Remove from Starred"}):r.intl.formatMessage({id:"iGfiaV",defaultMessage:"Add to Starred"})),[b,m]),h=d.default.useCallback((e=>{if(e.stopPropagation(),e.preventDefault(),!A){const e=!b;c.logClick(i,l,u,_,S,e),g&&g(e),L(a.updateStarredStatus({id:l,idType:u,newStatus:e,itemName:E,showSnackbar:!0}))}}),[A,b]);if(void 0===b)return null;if(m&&!b)return null;const N={star__toggle:!0,"star__toggle--starred":b,"star__toggle--unstarred":!b&&!p&&!T,"star__toggle--loading":A};return d.default.createElement("div",{ref:I,onMouseOver:()=>D(!0),onMouseOut:W},d.default.createElement(e.Tooltip.Control,{triggerRef:I,placement:f||"top",open:y},w),d.default.createElement("button",{className:e.cx(N,v),role:"button","aria-pressed":b,"aria-label":w,onClick:h,onDoubleClick:h,disabled:m,tabIndex:R,id:O,"aria-labelledby":e.cx(O,C)},d.default.createElement("span",{hidden:!0},w),d.default.createElement(e.UIIcon,{src:b?s.StarFill:n.StarLine})))};_.displayName="_Star",e.requireCssWithComponent(_,["/static/metaserver/static/css/starred/star-vflnmwtfY.css"])}));
//# sourceMappingURL=c_starred_star.js-vflBn6oA2.map
