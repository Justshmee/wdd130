define(["exports","./c_init_data_runtime","./e_folder_viewer_src_main","./c_react_query_helpers_helpers","./c_folder_dialog_constants","./e_core_exception","./c_api_v2_client_base"],(function(e,t,n,r,o,s,i){"use strict";const _={};function a(e,t){const r={folder:t};return n.WebRequestOref({url:"/browse_util/tree_view_folders",type:"POST",subject_user:e,data:r,dataType:"json",skipNotifyError:!0})}e.getFolderContents=a,e.getFolderContentsAPIv2=function(e,o,_,a){var c;return t.__awaiter(this,void 0,void 0,(function*(){const t=new r.UserApiV2Client;try{const r=yield n.GetFilesRoutes(t).rpc("list_subfolders",{path:o,max_height:_,limit_sub_folder_count:a},{subjectUserId:e}),s=[];return(r.subfolder_entries||[]).forEach((e=>{const t=e.folder_metadata;let n=!1,r=!1,o=0;t.sharing_info&&(n=t.sharing_info.read_only||!!t.sharing_info.no_access,r=!!t.sharing_info.no_access,void 0!==t.sharing_info.shared_folder_id&&(o=parseInt(t.sharing_info.shared_folder_id,10))),s.push({path:t.path_display||"",has_subdirs:e.has_subfolders||!1,icon:t.icon||"",read_only:n||!1,contained_ns:e.contained_ns||0,target_ns:o,no_access:r,is_encrypted:void 0!==t.is_encrypted&&t.is_encrypted})})),s}catch(e){const t=i.filterApiError(e);throw s.reportException({err:(null===(c=null==t?void 0:t.raw)||void 0===c?void 0:c.responseBody)?new Error(t.raw.responseBody):e,severity:"non-critical",tags:["js:browse"]}),e}}))},e.getFolderContentsWithCache=function(e,t){return(!_[t]||Date.now()-_[t].timestamp>o.CACHE_TTL_MS)&&(_[t]={folderContents:a(e,t),timestamp:Date.now()}),_[t].folderContents},e.getFolderSuggestion=function(e,t,n){return function(e){return e.ns("ml")}(new r.UserApiV2Client).rpc("get_folder_suggestion",{paths:t,action:n},{subjectUserId:e})}}));
//# sourceMappingURL=c_folder_dialog_api.js-vfld1yFRg.map
