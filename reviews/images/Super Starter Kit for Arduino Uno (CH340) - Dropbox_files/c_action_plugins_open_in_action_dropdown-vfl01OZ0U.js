define(["require","exports","react","./e_folder_viewer_src_main","./c_file_viewer_collection_viewer","./c_init_data_runtime","./c_pap-events_navigation_navigate_to_replay","./c_files_view_data_store","./c_spectrum_tooltip","./c_extensions_extensions_utils","./c_cloud_docs_open_with_utils","./c_apex-metrics_src_types","./c_comments2_hooks_continuous_annotation_hook","./c_ui-icon_line_team","./c_ui-icon_line_restore","./c_cloud_docs_types","./e_edison","./c_core_i18n","./c_ui-icon_line_zip","./c_react_query_api_helpers_queries_cloud_docs_team_settings","./c_lodash-es_lodash","./c_es_hooks_useDispatch","./c_react_query_helpers_helpers","./c_api_v2_client_base","./c_core_uri","./c_core_attribution_header","./c_csrf","metaserver/static/js/modules/constants/viewer","./c_src_sink_index","./e_core_exception","./c_core_xhr","./c_api_v2_noauth_client","./c_core_notify","react-dom","metaserver/static/js/modules/constants/web_experience_constants","metaserver/static/js/modules/constants/sharing","metaserver/static/js/modules/constants/locales","metaserver/static/js/modules/constants/file_viewer_configuration","metaserver/static/js/modules/constants/file_viewer_feature_experiments","metaserver/static/js/modules/constants/time","metaserver/static/js/modules/constants/login_and_register","metaserver/static/js/modules/constants/fingerprintjs_constants","./c_security_crypto","./c_growth_ui_api","./c_esm_misc_util","./c_referrer_cleansing_redirect","./c_hooks_use_stabilized_callback","./c_growth_ui_teams_web_actions_logger_events","./c_keymaster","./c_core_utils_browser_detection","./c_ui-icon_line_zoom-out","./c_campaigns_campaign_enums","./c_bolt_metaserver_clients","./c_skeleton_index","./c_toolkit_dist_redux-toolkit","./c_flux_store_listener","./c_stormcrow_explicit_exposure_logging","./c_stormcrow_gating_factory","./c_stormcrow_types_log_exposure","./c_init_data_edison","metaserver/static/js/langpack","./c_flows_logging_flows_loggers","./c_spectrum_util_raf_throttle","./c_browse_models","./c_base64","./c_flux_base_store","./c_cloud_docs_constants","./c_chips_index","./c_chip_index","metaserver/static/js/modules/constants/contacts","./c_spectrum_colorized_icon","./c_spectrum_svg_icon_bundle","./c_spectrum_positioned_portal","./c_user_centric_perf_metrics_component_visually_complete_component_visually_complete_calculator","./c_plugin_utils_drawWatermarkOnCanvas","./c_resize-observer-polyfill_dist_ResizeObserver","./c_badges_index","./c_badge_index","./c_react-error-boundary","metaserver/static/js/modules/constants/pdf_editing","metaserver/static/js/modules/constants/search","./c_home_store","./c_plugin_utils_getImageDefaultSizes","metaserver/static/js/modules/constants/unity","./c_spectrum_modal_utility_modal","./c_icon_templates_actionable_index","./c_spectrum_icon_form_index","./c_ux_analytics_modal_tracking"],(function(e,t,n,o,i,s,r,a,c,l,p,u,d,_,m,h,f,g,y,A,w,I,v,O,E,x,C,b,k,S,T,M,D,B,F,U,N,L,P,W,H,j,V,R,q,z,G,K,Q,J,X,Y,$,Z,ee,te,ne,oe,ie,se,re,ae,ce,le,pe,ue,de,_e,me,he,fe,ge,ye,Ae,we,Ie,ve,Oe,Ee,xe,Ce,be,ke,Se,Te,Me,De,Be){"use strict";function Fe(e){return e&&e.__esModule?e:{default:e}}var Ue=Fe(n);const Ne=(t,n)=>{if(o.isBrowseFile(t)&&i.isLiveFile(t)&&!i.isInsideVaultFolder(t)&&r.UnityFeatures.isUnitySupported()&&"ns_path"in t&&(null===i.UnityCheckFileCache||void 0===i.UnityCheckFileCache?void 0:i.UnityCheckFileCache.is_cached_and_locally_available(t.ns_id,t.ns_path)))return()=>s.__awaiter(void 0,void 0,void 0,(function*(){const{openInDesktopAction:o}=yield new Promise((function(t,n){e(["./c_file_viewer_action_plugins_file_actions"],t,n)}));o(t,n)}))};class Le extends Ue.default.Component{constructor(e){super(e),this.handleMouseOver=()=>{clearTimeout(this.timer),this.timer=setTimeout((()=>{this.props.bylines&&(this.setState({show:!0}),this.props.onDidShow())}),this.props.delay)},this.handleMouseOut=()=>{this.setState({show:!1}),clearTimeout(this.timer)},this.triggerRef=Ue.default.createRef(),this.state={show:!1}}componentWillUnmount(){clearTimeout(this.timer)}render(){const{children:e,bylines:t,isInActionBar:n}=this.props,i=Ue.default.Children.only(e);return t?Ue.default.createElement(Ue.default.Fragment,null,Ue.default.createElement(o.Tooltip.Control,{triggerRef:this.triggerRef,open:this.state.show,placement:n?"right":"left"},(e=>{if(e)return e.length>1?Ue.default.createElement("ul",{className:"extensions-byline-list"},e.map((e=>Ue.default.createElement("li",{key:e,className:"extensions-byline-list-item"},e)))):Ue.default.createElement("div",{className:"extensions-byline"},e[0])})(t)),Ue.default.cloneElement(i,{onMouseOver:this.handleMouseOver,onMouseOut:this.handleMouseOut,ref:this.triggerRef})):i}}Le.defaultProps={delay:500},Le.displayName="ExtensionsBylineTooltip";class Pe extends Ue.default.Component{render(){const{unityOptions:e,legacyCloudEditorOptions:t,cloudEditorAppActions:n,bylines:s,currentSession:r,previewOption:a,openInReplayOption:c,openInDesktopOption:p,isInActionBar:h,goToFolderOption:f,wrapValuesForActionBar:g,openInNewTabOption:y,openInQuickViewOption:A}=this.props,w=e=>g?l.toActionBarValue(e):e,I=t.map((e=>{const{type:t}=e,n=t===i.OpenButtonAction.OPEN_WITH_CLOUD_DOC?"cloud_doc":"wopi";return Ue.default.createElement(o.Menu.ActionItem,{key:e.text,value:w(e),withLeftAccessory:e.spriteName?Ue.default.createElement(o.Sprite,{group:"web",name:e.spriteName,alt:""}):Ue.default.createElement("img",{alt:"",src:e.iconUrl,width:24,height:24})},Ue.default.createElement(Le,{isInActionBar:h,bylines:s[n],onDidShow:i.handleShowByline(n,r),key:e.text},Ue.default.createElement("span",null,e.text)))})),v=e.map((e=>Ue.default.createElement(o.Menu.ActionItem,{key:e.text,value:w(e),withLeftAccessory:function(e){return"ow_desktop"===e.spriteName&&e.type===i.OpenButtonAction.UNITY_FILE?-1!==e.text.indexOf("Dropbox")?Ue.default.createElement(o.UIIcon,{src:o.DropboxLine}):Ue.default.createElement(o.UIIcon,{src:m.OpenLine}):Ue.default.createElement(o.Sprite,{group:"web",name:e.spriteName||"",alt:""})}(e)},e.text)));let O=!1;const E=n.map((e=>{O||(O=l.isWopiAction(e.appAction));const t=e.appAction.handler.editor_name;return Ue.default.createElement(o.Menu.ActionItem,{key:e.appAction.description,value:w(e),withLeftAccessory:Ue.default.createElement("img",{alt:"",src:e.appAction.icon.url,width:24,height:24})},Ue.default.createElement(Le,{isInActionBar:h,bylines:s[t],onDidShow:i.handleShowByline(t,r),key:e.appAction.description},Ue.default.createElement("span",null,e.appAction.description)))})),x=a&&Ue.default.createElement(o.Menu.ActionItem,{key:a.text,value:w(a),withLeftAccessory:Ue.default.createElement(o.UIIcon,{src:o.ShowLine})},a.text),C=c&&Ue.default.createElement(o.Menu.ActionItem,{key:c.text,value:w(c),withLeftAccessory:Ue.default.createElement(o.UIIcon,{src:d.DropboxReplayLine})},c.text),b=p&&Ue.default.createElement(o.Menu.ActionItem,{key:p.text,value:w(p),withLeftAccessory:Ue.default.createElement(o.UIIcon,{src:u.mac?d.FinderLine:d.FileExplorerLine})},p.text),k=y&&Ue.default.createElement(o.Menu.ActionItem,{key:y.text,value:w(y),withLeftAccessory:Ue.default.createElement(o.UIIcon,{src:_.GlobeLine})},y.text),S=f&&Ue.default.createElement(o.Menu.ActionItem,{key:f.text,value:w(f),withLeftAccessory:Ue.default.createElement(o.UIIcon,{src:d.FolderShowLine})},f.text),T=A&&Ue.default.createElement(o.Menu.ActionItem,{key:A.text,value:w(A),withLeftAccessory:Ue.default.createElement(o.UIIcon,{src:d.SidebarShowRightLine})},A.text),M=v.length>0||I.length>0||E.length>0||!!k||!!x||!!C||!!b||!!S||!!T;return O?M&&Ue.default.createElement(o.Menu.Segment,{key:"open-options"},k,S,E,v,I,x,T,C,b):M&&Ue.default.createElement(o.Menu.Segment,{key:"open-options"},k,S,v,I,E,x,T,C,b)}}Pe.displayName="UnityAndCloudEditorsComponent";const We=o.requireCssWithComponent(Pe,["/static/metaserver/static/css/app_actions/index-vflCAz_2f.css","/static/metaserver/static/css/dig-components/index.web-vflzskH5s.css"]);class He extends Ue.default.Component{constructor(e){super(e),this.createActionClickHandler=e=>()=>{if("cloud_editor"===e.handler[".tag"]){const t=l.isWopiAction(e)?i.OpenButtonAction.OPEN_WITH:i.OpenButtonAction.OPEN_WITH_CLOUD_DOC;i.logEvent(this.props.currentSession,"select_legacy_action",{type:t});const n=h.UserActionSourceType.WEB_PREVIEW,o=l.cloudEditorNameToParams(e.handler.editor_name);p.openWithCloudEditor(p.fileToOpenWithParams(this.props.file),this.props.user.id,o,!1,n)}}}render(){if(0===this.props.openOptions.length&&0===this.props.cloudEditorAppActions.length)return null;const e=this.props.cloudEditorAppActions.map((e=>({appAction:e,handler:this.createActionClickHandler(e),userAction:i.OpenInUserAction.OpenWithAppAction,actionName:e.description})));return Ue.default.createElement(We,{unityOptions:[],legacyCloudEditorOptions:this.props.openOptions,cloudEditorAppActions:e,bylines:{},wrapValuesForActionBar:!!this.props.isInActionBar})}}He.displayName="SharedFilePopoverContentComponent";const je=o.requireCssWithComponent(He,["/static/metaserver/static/css/app_actions/index-vflCAz_2f.css"]);class Ve extends Ue.default.Component{constructor(e){super(e),this.createAppActionClickHandler=e=>()=>{var t,n;const{file:o,user:s,featureFlags:r,telemetryContext:a,updateLinkState:c}=this.props;if(l.redirectToActionOrShowAuth(s,[o],e,r,a,c),"redirect"===e.handler[".tag"]){const t=i.getAppActionExtras(e);i.logEvent(this.props.currentSession,"select_action",Object.assign({menu_version:2},t))}else if("cloud_editor"===e.handler[".tag"]){const t=l.isWopiAction(e)?i.OpenButtonAction.OPEN_WITH:i.OpenButtonAction.OPEN_WITH_CLOUD_DOC;i.logEvent(this.props.currentSession,"select_legacy_action",{type:t})}null===(n=(t=this.props).onExtensionClick)||void 0===n||n.call(t,e.id)},this.wrapperForAction=e=>({appAction:e,handler:this.createAppActionClickHandler(e),userAction:i.OpenInUserAction.OpenWithAppAction,actionName:e.description}),this.renderActionRow=e=>{const t=e.icon;let n;n=t.is_static?f.static_url("/static/metaserver/static/images/generic_app_icon-vflIPYT1H.png"):t.url;const i=e.description,s=this.props.isInActionBar?l.toActionBarValue(this.wrapperForAction(e)):this.wrapperForAction(e);return Ue.default.createElement(o.Menu.ActionItem,{key:e.id,value:s,withLeftAccessory:Ue.default.createElement("img",{alt:"",src:n,width:24,height:24})},i)},this.renderUnpromotedActions=(e,t)=>{const{user:n,file:s,categoryIdToInfos:r,featureFlags:a,currentSession:c,telemetryContext:p,updateLinkState:u,isInActionBar:d}=this.props,_=e.length>0,m={handler:()=>{const o=[...e,...t];l.showExtensionsMiniDirectoryModal(g.intl.formatMessage({id:"KVD2SP",defaultMessage:"Open or edit with these apps"}),n,s,o,r,a,u,p,c),i.logEvent(c,_?"select_show_more":"select_add_app",{surface:p&&p.surface,userAction:_?i.OpenInUserAction.OpenMoreApps:i.OpenInUserAction.OpenAddApps})}},h=d?l.toActionBarValue(m):m;return Ue.default.createElement(o.Menu.ActionItem,{key:g.intl.formatMessage({id:"R/67N/",defaultMessage:"Show more"}),value:h,withLeftAccessory:_&&!d?null:Ue.default.createElement(o.UIIcon,{src:y.AddCircleLine})},_?g.intl.formatMessage({id:"Gevpqz",defaultMessage:"Connect more apps"}):g.intl.formatMessage({id:"XFA09U",defaultMessage:"Connect apps"}))}}render(){const{appActions:e,openOptions:t,bylines:n,currentSession:s,isInActionBar:r}=this.props,a=i.getOpenOptionsWithLogging(t,s),{unityOptions:c,cloudEditorOptions:l,previewOption:p,openInReplayOption:u,openInDesktopOption:d,goToFolderOption:_,openInNewTabOption:m,openInQuickViewOption:h}=i.partitionOptions(a),{cloudEditors:f,installedActions:g,unpromotedActions:y}=i.partitionActions(e),A=g.length>0,w=y.length>0;return Ue.default.createElement(Ue.default.Fragment,null,Ue.default.createElement(We,{isInActionBar:r,unityOptions:c,legacyCloudEditorOptions:l,cloudEditorAppActions:f.map((e=>this.wrapperForAction(e))),bylines:n,currentSession:s,previewOption:p,openInReplayOption:u,openInNewTabOption:m,openInDesktopOption:d,goToFolderOption:_,openInQuickViewOption:h,wrapValuesForActionBar:!!r}),r&&(A||w)&&Ue.default.createElement(o.Menu.Segment,null,g.map((e=>this.renderActionRow(e))),this.renderUnpromotedActions(g,y)),!r&&A&&Ue.default.createElement(o.Menu.Segment,{key:"installed-actions"},g.map((e=>this.renderActionRow(e)))),!r&&w&&Ue.default.createElement(o.Menu.Segment,null,this.renderUnpromotedActions(g,y)))}}Ve.displayName="ExtensionsPopoverV2Component";const Re=o.requireCssWithComponent(Ve,["/static/metaserver/static/css/app_actions/index-vflCAz_2f.css"]);class qe extends Ue.default.Component{constructor(e){super(e),this.handleButtonClick=e=>{e.preventDefault(),e.stopPropagation()},this.handleMenuClick=e=>{e.preventDefault(),e.stopPropagation()},this.handleHover=()=>{this.currentSession&&this.currentSession.event("trigger_hover")},this.setBigTooltip=e=>s.__awaiter(this,void 0,void 0,(function*(){const{file:t,appActions:n,featureFlags:s}=this.props,r=i.getFileExt(t)||"",a=n.length>0;if(a){const t=yield o.getTooltipHistory(e,["open_with_edu"]),n=o.allowedTooltips(a,r,s).find((e=>void 0!==t[e]&&!t[e]));this.setState({bigTooltipName:n})}})),this.markBigTooltipViewed=()=>{let e=!1;const t=[];this.state.bigTooltipName&&(t.push(o.markTooltipViewed(this.props.user.id,this.state.bigTooltipName)),e=!0),e&&(Promise.all(t).then((()=>{this.props.showBigTooltip&&this.setBigTooltip(this.props.user.id)})),this.setState({bigTooltipName:void 0}))},this.handleSelectAction=(e,t)=>{t.preventDefault(),e.handler(),this.props.onExtensionClick&&this.props.onExtensionClick(e.actionName||e.userAction),t.stopPropagation()},this.renderTrigger=e=>{const{triggerType:t}=this.props,n=Object.assign({onMouseDown:this.markBigTooltipViewed,onMouseEnter:this.handleHover},e),i="app-action-open-with-menu__trigger app-action-open-with-menu__trigger-button",s=g.intl.formatMessage({id:"z5t3Bh",defaultMessage:"Open"}),r=w.uniqueId("app-action-open-with-menu-");return t===o.TriggerType.OpacityButton?Ue.default.createElement(o.Button,Object.assign({id:r,variant:"opacity",withDropdownIcon:!0},n,{"aria-labelledby":o.cx(r,this.props.arialabelledby)}),s):t===o.TriggerType.CollapsedButton?Ue.default.createElement(c.Tooltip,{positionOffset:8,positioning:"left",tooltipContent:g.intl.formatMessage({id:"KEegJt",defaultMessage:"Open With"})},Ue.default.createElement(o.IconButton,Object.assign({id:r,variant:"transparent",className:i,"aria-label":s,"aria-labelledby":o.cx(r,this.props.arialabelledby)},n),Ue.default.createElement(o.UIIcon,{src:m.OpenLine}))):Ue.default.createElement(o.Button,Object.assign({id:r,className:i,variant:t&&t!==o.TriggerType.SecondaryButton?"primary":"opacity","aria-label":s,"aria-labelledby":o.cx(r,this.props.arialabelledby)},n),Ue.default.createElement("div",{className:"app-actions-open-with-menu__trigger-content app-actions-open-with-menu__trigger-content--with-text"},Ue.default.createElement("div",{className:"app-action-open-with-menu__trigger-button-text"},`${s} â–¾`)))},this.renderMenu=()=>Ue.default.createElement(o.Menu.Wrapper,{className:"app-actions__unportaled-menu",onSelection:this.handleSelectAction,onToggle:this.onPopoverToggle,isPortaled:!0},(({getContentProps:e,getTriggerProps:t})=>Ue.default.createElement(Ue.default.Fragment,null,this.renderTrigger(t({onClick:this.handleButtonClick})),Ue.default.createElement(o.Menu.Content,Object.assign({},e({}),{onClick:this.handleMenuClick,className:"app-actions-open-with-menu",placement:"bottom-end"}),Ue.default.createElement(Je,{user:this.props.user,file:this.props.file,extraOptions:this.props.extraOptions,currentSession:this.currentSession,telemetryContext:this.props.telemetryContext}))))),this.onPopoverToggle=({isOpen:e})=>{e&&this.props.onDropdownOpen?this.props.onDropdownOpen():!e&&this.props.onDropdownClose&&this.props.onDropdownClose(),this.currentSession&&this.currentSession.event(e?"open_popover":"close_popover")},this.onDownloadClick=e=>t=>{t.preventDefault(),t.stopPropagation(),e.handler()},this.state={},this.telemetryClient=i.createTelemetryClient({component:"menu_v2"})}componentDidMount(){this.props.showBigTooltip&&this.setBigTooltip(this.props.user.id)}render(){const{file:e,appActions:t,featureFlags:n,telemetryContext:s,triggerType:r,showAsButtonIfDownloadOnly:a,unityInfo:c,extraOptions:p,user:u,cloudDocsInfo:d}=this.props;if(!e.file_id)return null;s?this.currentSession=this.telemetryClient.session({surface:s.surface,ext:i.getPiiSafeExtension(i.getFileExt(e)||""),feature_flags:n}):delete this.currentSession;const _=l.getOpenOptionsForFile({file:e,unityInfo:c,extraOptions:p,user:u,isCloudEditorDisabled:!0,cloudDocsInfo:d,surface:null==s?void 0:s.surface}),m=r===o.TriggerType.CollapsedButton;let h=_.length>0,f=!1;if(h&&1===_.length&&(f=_[0].type===i.OpenButtonAction.DOWNLOAD,h=!f),!h&&(0===t.length||o.isSharedFile(e)&&0===i.partitionActions(t).cloudEditors.length)){if(a&&f){const e={className:o.cx("app-actions-download-button",{"app-actions-download-button--collapsed":m}),onClick:this.onDownloadClick(_[0])},t=w.uniqueId("app-actions-download-button-");return m?Ue.default.createElement(o.IconButton,Object.assign({id:t,variant:"transparent","aria-labelledby":o.cx(t,this.props.arialabelledby)},e),Ue.default.createElement(o.UIIcon,{name:"download-file",src:o.DownloadLine,"aria-label":g.intl.formatMessage({id:"pHnJw0",defaultMessage:"Download"})})):Ue.default.createElement(o.Button,Object.assign({id:t,variant:"opacity","aria-labelledby":o.cx(t,this.props.arialabelledby)},e),g.intl.formatMessage({id:"pHnJw0",defaultMessage:"Download"}))}return null}return this.renderMenu()}}qe.displayName="ExtensionsMenuV2Component";const ze=e=>{const t=i.useUnity(e.file,e.user),n=Qe(e.user);return Ue.default.createElement(qe,Object.assign({},e,{cloudDocsInfo:n,unityInfo:t}))};ze.displayName="ExtensionsMenuV2WithUnityComponent";const Ge={updateLinkState:(e,t)=>o.updateLinkState({actionId:e,linkState:t})},Ke=o.connect(((e,t)=>({appActions:i.getOpenActionsForFile(e,t.file),bylines:i.getBylines(e),categoryInfos:i.getCategoryInfos(e),featureFlags:i.getFeatureFlags(e)})),Ge)(ze);o.requireCssWithComponent(Ke,["/static/metaserver/static/css/app_actions/index-vflCAz_2f.css","/static/metaserver/static/css/dig-components/index.web-vflzskH5s.css"]);const Qe=e=>{var t;const n=A.cloudDocsTeamSettingsRequestPackage.useQuery({}),o={openWithGddSupported:!1};if(e.is_team)try{o.openWithGddSupported=(null===(t=n.data)||void 0===t?void 0:t.apiData.settings[h.CloudDocProviderIntegration.GDD_INTEGRATION][".tag"])===h.IntegrationCreateAndEdit[".tag"]}catch(e){o.openWithGddSupported=!1}else o.openWithGddSupported=!0;return o},Je=e=>{const{file:t,user:n,telemetryContext:s,extraOptions:r,isInActionBar:a,previewActionHandler:c,openDesktopActionHandler:p,goToFolderActionHandler:u,replayActionHandler:d,openInNewTabActionHandler:_,quickViewActionHandler:m,onExtensionClick:h}=e,f=o.useSelector((t=>i.getOpenActionsForFile(t,e.file))),g=o.useSelector((e=>i.getBylines(e))),y=o.useSelector((e=>i.getCategoryInfos(e))),A=o.useSelector((e=>i.getFeatureFlags(e))),w=Qe(n),v=I.useDispatch(),O=Ue.default.useCallback(((e,t)=>v(o.updateLinkState({actionId:e,linkState:t}))),[v]),E=i.useUnity(t,n),x=l.getCategoryIdToInfos(y),C=l.getOpenOptionsForFile({file:t,unityInfo:E,extraOptions:r,user:n,isCloudEditorDisabled:!0,cloudDocsInfo:w,surface:null==s?void 0:s.surface,isInActionBar:a,previewActionHandler:c,openDesktopActionHandler:p,goToFolderActionHandler:u,replayActionHandler:d,openInNewTabActionHandler:_,quickViewActionHandler:m}),b=s&&(e.currentSession||i.createTelemetryClient({component:"menu_v2"}).session({surface:s.surface,ext:i.getPiiSafeExtension(i.getFileExt(t)||""),feature_flags:A}));if(o.isBrowseFile(t)&&(f.length>0||C.length>0))return Ue.default.createElement(Re,{file:t,user:n,openOptions:C,appActions:f,bylines:g,categoryIdToInfos:x,featureFlags:A,updateLinkState:O,telemetryContext:s,currentSession:b,isInActionBar:a,onExtensionClick:h});if(o.isSharedFile(t)){const{cloudEditors:e}=i.partitionActions(f);return Ue.default.createElement(je,{openOptions:C,cloudEditorAppActions:e,file:t,user:n,currentSession:b,isInActionBar:a})}return null};Je.displayName="ExtensionsPopoverContent";const Xe={[i.OpenInUserAction.OpenInUnityFolder]:"desktop_folder",[i.OpenInUserAction.OpenInUnity]:"desktop_preview",[i.OpenInUserAction.OpenInReplay]:"replay_preview",[i.OpenInUserAction.PreviewFile]:"web_preview",[i.OpenInUserAction.OpenInDesktop]:"desktop_file",[i.OpenInUserAction.OpenMoreApps]:"connect_more_apps",[i.OpenInUserAction.OpenAddApps]:"connect_apps"},Ye={surface:"previews"},$e=({actionContext:e,file:t,user:n,surface:s})=>{const{logUserAction:r,pluginContext:c,fileViewerId:l}=a.useFileViewerContext(),p=i.useReplayActionHandler(t,c),u=Ue.default.useMemo((()=>({sessionId:l,event:(t,n)=>{var i;const a="string"==typeof(null==n?void 0:n.userAction)?n.userAction:"",c=null!==(i=Xe[a])&&void 0!==i?i:"third_party_app";let l="previews";s===o.SDKPreviewSurface.QUICK_VIEW_BROWSE?l="browse_quick_view":s===o.SDKPreviewSurface.QUICK_VIEW_SEARCH&&(l="search_quick_view"),r(o.UserAction.OpenIn,e,Object.assign(Object.assign({},n),{destination_surface:c,actionSurface:l}))}})),[e,l,r,s]);return Ue.default.createElement(Je,{key:"open-in-action-btn",file:t,user:n,isInActionBar:!0,openDesktopActionHandler:Ne(t,n),replayActionHandler:p,currentSession:u,telemetryContext:Ye})};$e.displayName="OpenInMenuContent";const Ze=i.withActionCondition(i.openInActionConditions,((e,t)=>t?{icon:m.OpenLine,label:i.OPEN_IN_ACTION_STRING,disabled:{disabled:!1},userAction:o.UserAction.OpenIn,action:{type:"menu",menu:Ue.default.createElement(o.Provider,{store:o.getStore()},Ue.default.createElement($e,{user:e.user,file:e.file,actionContext:o.UserActionContext.FileMenu}))}}:void 0),void 0);t.OpenInMenuContent=$e,t.makeOpenInAction=Ze}));
//# sourceMappingURL=c_action_plugins_open_in_action_dropdown.js-vflqJaL3W.map
