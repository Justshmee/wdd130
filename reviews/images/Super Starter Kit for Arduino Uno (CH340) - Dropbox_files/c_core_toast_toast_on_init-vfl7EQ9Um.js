define(["require","exports","./c_init_data_runtime","./c_core_notify","./c_csrf","./c_security_crypto","./c_core_uri","react-dom","react","./e_edison","./c_apex-metrics_src_types","./c_init_data_edison"],(function(e,t,n,o,i,r,s,c,u,d,a,l){"use strict";const f="toast";function _(e,t){return n.__awaiter(this,void 0,void 0,(function*(){const o=yield function(e,t){return n.__awaiter(this,void 0,void 0,(function*(){const n=e.split(":");if(3!==n.length)return null;const[o,s,c]=n;if("1"!==o)return null;const u=(new TextEncoder).encode(s);let d=decodeURIComponent(c);try{d=atob(d)}catch(e){return null}const a=r.stringToBytes(d),l=(new TextEncoder).encode(null!=t?t:i.readCsrfToken());return(yield r.verifyMessageHmac(l,u,a))?decodeURIComponent(s):null}))}(e,t);if(null==o)return null;if(o.startsWith("er:"))return[!0,o.substring(3)];if(o.startsWith("ok:"))return[!1,o.substring(3)];throw new Error("unrecognized format of message in toast cookie")}))}t.decodeToastCookie=_,t.showToastFromCookie=function(){var t;return n.__awaiter(this,void 0,void 0,(function*(){const n=i.Cookies.read(f);if(n){const r=yield _(n,null!==(t=i.readCsrfToken())&&void 0!==t?t:void 0);if(null!=r){const t=o.require_css("/static/metaserver/static/css/notify-vfl4oJv2S.css"),[n,s]=r,{default:c}=yield new Promise((function(t,n){e(["./c_core_notify"],t,n)})).then((function(e){return e.purify_es})),u=c.sanitize(s),d=document.getElementById("flash");null!=d&&(d.innerHTML=u,d.style.display="block");setTimeout((()=>i.Cookies.delete(f)),2e3),yield t,n?o.Notify.error(new o.HTML(u),10):o.Notify.success(new o.HTML(u),10)}}}))}}));
//# sourceMappingURL=c_core_toast_toast_on_init.js-vflk7IpGK.map
