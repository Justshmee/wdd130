define(["exports","./c_init_data_runtime","react","./e_folder_viewer_src_main","./c_toolkit_dist_redux-toolkit","./c_file_viewer_collection_viewer","./c_pap-events_navigation_navigate_to_replay","./e_core_exception","./c_react_query_helpers_helpers","./c_starred_star","./c_es_hooks_useDispatch","./c_plugin_utils_getImageDefaultSizes","./c_flux_store_listener"],(function(e,t,r,i,a,s,_,c,n,l,o,u,S){"use strict";function d(e,i,c,n,l){r.useEffect((()=>{l&&e(_.fetchMissingStarredStatuses([{id:i.file_id,type:_.HOME_RESOURCE_ID_TYPE.ENCODED_FILE_OBJ_ID}]))}),[i,l,e]);const o=r.useCallback((()=>t.__awaiter(this,void 0,void 0,(function*(){const t=yield e(_.updateStarredStatus({id:i.file_id,newStatus:!c,showSnackbar:!1}));try{a.unwrapResult(t),_.displayStarSnackbar({itemName:_.itemNameFromStarrableItem(i),isStarred:!c,success:!0}),null==n||n(!c,!0)}catch(e){_.displayStarSnackbar({itemName:_.itemNameFromStarrableItem(i),isStarred:!c,success:!1}),null==n||n(!c,!1)}}))),[n,e,i,c]);return{message:c?s.UNSTAR_ACTION_STRING:s.STAR_ACTION_STRING,iconSrc:c?u.StarFill:S.StarLine,handleClick:o,isStarred:c}}e.useStarControl=function({getActiveFile:e,onChange:t,user:r}){const{file:a}=e(),s=o.useDispatch(),c=i.useSelector((e=>_.getIsStarred(e,a.file_id)));return d(s,a,c,t,r)},e.useStarControlWithStore=function({getActiveFile:e,onChange:t,user:i,starredStore:a}){const{file:s}=e(),c=a.dispatch,[n,l]=r.useState(_.getIsStarred(a.getState(),s.file_id));return r.useEffect((()=>{const e=a.subscribe((()=>l(_.getIsStarred(a.getState(),s.file_id))));return()=>e()}),[s.file_id,a]),d(c,s,n,t,i)}}));
//# sourceMappingURL=c_file_viewer_common_hooks.js-vflII4ei5.map
