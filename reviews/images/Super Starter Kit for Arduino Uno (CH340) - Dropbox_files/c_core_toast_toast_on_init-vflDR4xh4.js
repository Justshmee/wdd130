define(["require","exports","./c_init_data_runtime","./c_core_notify","./c_csrf","./c_browser_browser_detection","./c_core_uri","react-dom","react","./e_edison","./c_init_data_edison"],(function(e,t,n,o,r,i,s,c,u,d,l){"use strict";function a(){return n.__awaiter(this,void 0,void 0,(function*(){const t=i.edge&&!i.edgeChromium();if(void 0!==window.crypto.subtle&&!t&&!i.checkBrowserVersion(i.chrome,40,!1))return window.crypto;if(t){const{legacyEdgeWrapper:t}=yield new Promise((function(t,n){e(["./c_security_legacy_edge_shim"],t,n)})),n=t();if(void 0!==n)return n}throw function(e){const t=new Error(e);return t.isBrowserNotSupported=!0,t}("WebCrypto not supported")}))}function f(e,t){return n.__awaiter(this,void 0,void 0,(function*(){const o=e.split(":");if(3!==o.length)return null;const[i,s,c]=o;if("1"!==i)return null;const u=(new TextEncoder).encode(s);let d=decodeURIComponent(c);try{d=atob(d)}catch(e){return null}const l=function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(d),f=(new TextEncoder).encode(null!=t?t:r.readCsrfToken());return(yield function(e,t,o){return n.__awaiter(this,void 0,void 0,(function*(){const n=yield a(),r=yield n.subtle.importKey("raw",e,{name:"HMAC",hash:"SHA-256"},!0,["verify"]);return yield n.subtle.verify({name:"HMAC"},r,o,t)}))}(f,u,l))?decodeURIComponent(s):null}))}const _="toast";function y(e,t){return n.__awaiter(this,void 0,void 0,(function*(){const n=yield f(e,t);if(null==n)return null;if(n.startsWith("er:"))return[!0,n.substring(3)];if(n.startsWith("ok:"))return[!1,n.substring(3)];throw new Error("unrecognized format of message in toast cookie")}))}t.decodeToastCookie=y,t.showToastFromCookie=function(){var t;return n.__awaiter(this,void 0,void 0,(function*(){const n=r.Cookies.read(_);if(n){const i=yield y(n,null!==(t=r.readCsrfToken())&&void 0!==t?t:void 0);if(null!=i){const t=o.require_css("/static/metaserver/static/css/notify-vfl4oJv2S.css"),[n,s]=i,{default:c}=yield new Promise((function(t,n){e(["./c_core_notify"],t,n)})).then((function(e){return e.purify_es})),u=c.sanitize(s),d=document.getElementById("flash");null!=d&&(d.innerHTML=u,d.style.display="block");setTimeout((()=>r.Cookies.delete(_)),2e3),yield t,n?o.Notify.error(new o.HTML(u),10):o.Notify.success(new o.HTML(u),10)}}}))}}));
//# sourceMappingURL=c_core_toast_toast_on_init.js-vflpoDNoN.map
