define(["exports","./c_init_data_runtime","./e_folder_viewer_src_main","./c_growth_ui_api","./c_react_query_helpers_helpers","./c_flows_logging_flows_loggers","./c_api_v2_client_base","./c_core_uri","./c_stormcrow_types_log_exposure","./c_apex-metrics_src_types","./c_src_sink_index","./e_core_exception","./c_lodash-es_lodash"],(function(e,t,o,r,s,a,i,n,l,c,d,u,_){"use strict";var f,O;function A(e,t,o){const a={update_rules_arg:{".tag":"update_folder_rules_arg",folder_fq_path:e,rule_set:t,apply_to_existing_files:o}};return r.GetFlowsRoutes(new s.UserApiV2Client).rpc("update_rules",a,{subjectUserId:s.mustGetActiveUserId()})}e.Actions=void 0,(f=e.Actions||(e.Actions={})).GetUserAutomations="AUTOMATIONS/GET_USER_AUTOMATIONS",f.SetUserAutomations="AUTOMATIONS/SET_USER_AUTOMATIONS",f.AddUserAutomation="AUTOMATIONS/ADD_USER_AUTOMATION",f.EditUserAutomation="AUTOMATIONS/EDIT_USER_AUTOMATION",f.RemoveUserAutomation="AUTOMATIONS/REMOVE_USER_AUTOMATION",f.MergeUserAutomations="AUTOMATIONS/MERGE_USER_AUTOMATIONS",f.ToggleAutomationStatus="TOGGLE_AUTOMATION_STATUS",f.SetUserExperiments="AUTOMATIONS/SET_USER_EXPERIMENTS",f.SetShouldSubscribeToBolt="AUTOMATIONS/SET_SHOULD_SUBSCRIBE_TO_BOLT",f.InitWorkflowBuilder="AUTOMATIONS/INIT_WORKFLOW_BUILDER",f.TearDownWorkflowBuilder="AUTOMATIONS/TEAR_DOWN_WORKFLOW_BUILDER",f.SetWorkflowBuilderOperation="AUTOMATIONS/SET_WORKFLOW_BUILDER_OPERATION",f.UpdateWorkflowActionStep="AUTOMATIONS/UPDATE_WORKFLOW_ACTION_STEP",f.DeleteWorkflowActionStep="AUTOMATIONS/DELETE_WORKFLOW_ACTION_STEP",f.UpdateWorkflowTriggerStep="AUTOMATIONS/UPDATE_WORKFLOW_TRIGGER_STEP",f.SetWorkflowBuilderActions="AUTOMATIONS/SET_WORKFLOW_BUILDER_ACTIONS",f.GetWorkflowStepsConfig="AUTOMATIONS/GET_WORKFLOW_STEPS_CONFIG",f.SetWorkflowStepsConfig="AUTOMATIONS/SET_WORKFLOW_STEPS_CONFIG",f.SetWorkflowBuilderWidth="AUTOMATIONS/SET_WORKFLOW_BUILDER_WIDTH",f.SetWorkflowBuilderApplyToExisting="AUTOMATIONS/SET_WORKFLOW_BUILDER_APPLY_TO_EXISTING",f.SetWorkflowBuilderInheritable="AUTOMATIONS/SET_WORKFLOW_BUILDER_INHERITABLE",f.UpdateWorkflowBuilderIsEnabled="AUTOMATINONS/UPDATE_WORKFLOW_BUILDER_IS_ENABLED",f.UpdateWorkflowBuilderPreviewAction="AUTOMATINONS/UPDATE_WORKFLOW_BUILDER_PREVIEW_ACTION",f.UpdateSavedWorkflowTemplateState="AUTOMATIONS/UPDATE_SAVED_WORKFLOW_TEMPLATE_STATE",f.UpdateSavedWorkflowTemplateName="AUTOMATIONS/UPDATE_SAVED_WORKFLOW_TEMPLATE_NAME",f.UpdateSavedWorkflowTemplateOptOut="AUTOMATIONS/UPDATE_SAVED_WORKFLOW_TEMPLATE_OPT_OUT",f.UpdateSavedWorkflowTemplates="AUTOMATIONS/UPDATE_SAVED_WORKFLOW_TEMPLATES",f.SetInheritanceBlockingFqPaths="AUTOMATIONS/SET_INHERITANCE_BLOCKING_FQ_PATHS",e.TestTarget=void 0,(O=e.TestTarget||(e.TestTarget={})).ADD_FOLDER_RULES_MODAL="flows-add-folder-rules-modal",O.ADD_FOLDER_RULES_MODAL_CANCEL="flows-add-folder-rules-modal-cancel",O.ADD_FOLDER_RULES_MODAL_CONFIRM="flows-add-folder-rules-modal-confirm",O.ADD_FOLDER_RULES_MODAL_FOLDER_NAME_INPUT="flows-add-folder-rules-modal-folder-name-input",O.ADD_FOLDER_RULES_MODAL_SUGGESTION_LINK="flows-add-folder-rules-modal-suggestion-link",O.AUTOMATED_FOLDER_MODAL="flows-folder-automation-modal",O.AUTOMATED_FOLDER_MODAL_CANCEL="flows-folder-automation-modal-cancel",O.AUTOMATED_FOLDER_MODAL_INVALID_NAME="flows-folder-automation-modal-invalid-name",O.AUTOMATED_FOLDER_MODAL_NEXT="flows-folder-automation-modal-next",O.AUTOMATED_FOLDER_MODAL_TOOLTIP_CONTAINER="flows-folder-automation-modal-tooltip_container",O.AUTOMATED_FOLDER_MODAL_BACK="flows-folder-automation-modal-back",O.AUTOMATED_FOLDER_MODAL_SUBMIT="flows-folder-automation-modal-submit",O.FILE_CONVERSION_INPUT_TYPE_SELECT="flows-file-conversion-input-type-select",O.FILE_CONVERSION_FORMAT_SELECT="flows-file-conversion-format-select",O.FOLDER_RULES_SETTINGS_MODAL="flows-folder-rules-settings-modal",O.FOLDER_RULES_SETTINGS_MODAL_CANCEL="flows-folder-rules-settings-modal-cancel",O.FOLDER_RULES_SETTINGS_MODAL_MENU="flows-folder-rules-settings-modal-menu",O.FOLDER_RULES_SETTINGS_MODAL_CHANGE_TO_BASIC="flows-folder-rules-settings-modal-change-to-basic",O.FOLDER_RULES_SETTINGS_MODAL_TOGGLE_RULE="flows-folder-rules-settings-modal-toggle-rule",O.FOLDER_RULES_SETTINGS_MODAL_TOGGLE_PDF="flows-folder-rules-settings-modal-toggle-pdf",O.FREEFORM_FEEDBACK_MODAL="freeform-feedback-modal",O.FREEFORM_FEEDBACK_MODAL_SUBMIT="freeform-feedback-modal-submit",O.FREEFORM_FEEDBACK_MODAL_CLOSE="freeform-feedback-modal-close",O.FREEFORM_FEEDBACK_MODAL_FEEDBACK_INPUT="freeform-feedback-modal-feedback-input",O.FLOWS_BADGE_TOOLTIP="flows-badge-tooltip",O.FLOWS_BADGE="flows-badge",O.AUTOMATED_FOLDER_TOGGLE_TEXT="flows-folder-automation-toggle-text",O.DASHBOARD_OVERVIEW_VIDEO_THUMBNAIL="flows-dashboard-overview-video-thumbnail",O.DASHBOARD_OVERVIEW_VIDEO_LIGHTBOX="flows-dashboard-overview-video-lightbox",O.VIDEO_TO_GIF_MODAL_CLOSE="flows-video-to-gif-modal-close",O.VIDEO_TO_GIF_MODAL_SUBMIT="flows-video-to-gif-modal-submit",O.VIDEO_TO_GIF_TITLE="flows-video-to-gif-modal-title",O.AUTOMATION_PREVIEW_PORTAL="flows-automation-preview-portal",O.WORKFLOW_BUILDER_LAYER_PORTAL="flows-workflow-builder-layer-portal-content",O.SAVED_WORKFLOW_TEMPLATE_PREVIEW="flows-saved-workflow-template-preview",O.SAVED_WORKFLOW_TEMPLATE_INVALID_NAME="flows-saved-workflow-template-invalid-name",O.SAVED_WORKFLOW_TEMPLATE_SAVE_INFO_ICON="flows-saved-workflow-template-save-info-icon";var g,w;!function(e){e.ABOUT_FOLDER_RULES="https://help.dropbox.com"}(g||(g={})),function(e){e.SUPPORT="/support"}(w||(w={}));const T=["audio_conversion","image_conversion","move_file","naming_conventions","pdf_conversion","tag","tidy_up","unzip","video_conversion","watermarking"];var p;!function(e){e.HOURLY="HOURLY",e.SIXHOURS="SIXHOURS",e.DAILY="DAILY",e.WEEKLY="WEEKLY",e.IMMEDIATELY="IMMEDIATELY"}(p||(p={}));const E=["audio_conversion","image_conversion","naming_conventions","pdf_conversion","smart_subfolders","tag","tidy_up","unzip","video_conversion","watermarking","move_file"],m=["file_add","scheduled"],S={file_op:{".tag":"file_add"},".tag":"file_op"},U={triggerType:"file_add",data:{}};function b(e){var o;const r=e.workflow_template?e.workflow_template.sequence[0].workflow_action:null===(o=e.action)||void 0===o?void 0:o.action;if(r){const{".tag":e}=r,o=t.__rest(r,[".tag"]);if("other"!==e)return{actionType:e,data:o};throw new Error(`Received invalid action ${e} from API v2`)}throw new Error("Missing action in payload from API v2")}function I(e){var o;const r=null===(o=e.trigger)||void 0===o?void 0:o.trigger;if(!r)return U;{const{".tag":e}=r,o=t.__rest(r,[".tag"]);switch(e){case"file_op":if("file_op"in o&&o.file_op&&"file_add"===o.file_op[".tag"])return U;throw new Error("Received invalid file_op trigger from API v2");case"scheduled":return{triggerType:e,data:o};default:throw new Error(`Received invalid trigger ${e} from API v2`)}}}const L=e=>e.length>1?"multi_step":1===e.length?e[0].actionType:void 0;function v({workflow_action:e}){if(!e)return;const{".tag":o}=e,r=t.__rest(e,[".tag"]);var s;return s=o,T.includes(s)?{actionType:o,data:r}:void 0}function R(e){var t;const o=null===(t=e.workflow_template)||void 0===t?void 0:t.sequence;return o?o.reduce(((e,t)=>{const o=v(t);return o&&e.push(o),e}),[]):e.action?[b(e)]:[]}function k(e){return{workflow_action:Object.assign({".tag":e.actionType},e.data)}}function D(e){return{sequence:e.map(k)}}function F({actions:e,isEnabled:t=!0,trigger:o,inheritable:r}){const s={enabled:t,inheritable:r,workflow_template:{sequence:e.map(k)}};return o&&(s.trigger=function({triggerType:e,data:t}){switch(e){case"file_add":return{trigger:S};case"scheduled":return{trigger:Object.assign({".tag":"scheduled"},t)};default:throw new Error(`Undefined trigger .tag ${e}`)}}(o)),s}function M(e){return{rules:[F(e)]}}function W(e,t){const r=function(e,t){return o.filename(e.fqPath).toLocaleLowerCase().localeCompare(o.filename(t.fqPath).toLocaleLowerCase())}(e,t);return 0!==r?r:(s=e.fqPath,a=t.fqPath,s.toLocaleLowerCase().localeCompare(a.toLocaleLowerCase()));var s,a}function h(e,t,o,r){var s,a;const i=[],n=e.rules;if(n&&n.length>0){const e=n[0],r=null===(s=e.action)||void 0===s?void 0:s.action,l=null===(a=e.trigger)||void 0===a?void 0:a.trigger,c=e.workflow_template;(r||c)&&l&&i.push(function(e,t,o,r){return{actions:R(e),fqPath:t,inheritable:!!e.inheritable,inheritedFromFqPath:r,isEnabled:!!e.enabled,nsId:o,trigger:I(e)}}(e,t,o))}return i.sort(W),i}const j={userAutomations:{status:"initial"},userExperiments:{status:"initial"},shouldSubscribeToBolt:!1,workflowStepsConfig:{status:"initial"},inheritanceBlockingFqPaths:new Set};e.AutomationsReducer=(o=j,r)=>{var s,a;switch(r.type){case e.Actions.SetUserAutomations:return Object.assign(Object.assign({},o),{userAutomations:r.payload});case e.Actions.AddUserAutomation:{const e="completed"===o.userAutomations.status?o.userAutomations.data:void 0;if(!e)return o;const t=function(e,t){let o=0;for(const r of e.values()){if(W(t,r)<0)break;o++}const r=Array.from(e.entries());return r.splice(o,0,[t.fqPath,t]),new Map(r)}(e,r.payload);return Object.assign(Object.assign({},o),{userAutomations:{status:"completed",data:t}})}case e.Actions.EditUserAutomation:case e.Actions.ToggleAutomationStatus:{const e="completed"===o.userAutomations.status?o.userAutomations.data:void 0;if(!e)return o;const t=r.payload,s=new Map(e);if(s.has(t.fqPath)){const e=s.get(t.fqPath);s.set(t.fqPath,Object.assign(Object.assign({},e),t))}return Object.assign(Object.assign({},o),{userAutomations:{status:"completed",data:s}})}case e.Actions.RemoveUserAutomation:{const e="completed"===o.userAutomations.status?o.userAutomations.data:void 0;if(!e)return o;const t=r.payload,s=new Map(e);return s.delete(t.fqPath),Object.assign(Object.assign({},o),{userAutomations:{status:"completed",data:s}})}case e.Actions.MergeUserAutomations:{let e;return e="completed"!==o.userAutomations.status?r.payload:function(e,t){const o=new Map,r=e.entries(),s=t.entries();let a=r.next(),i=s.next();for(;!a.done||!i.done;)if(a.done){const[e,t]=i.value;o.set(e,t),i=s.next()}else if(i.done){const[e,t]=a.value;o.set(e,t),a=r.next()}else{const[e,t]=a.value,[n,l]=i.value;W(t,l)<=0?(o.set(e,t),a=r.next()):(o.set(n,l),i=s.next())}return o}(o.userAutomations.data,r.payload),Object.assign(Object.assign({},o),{userAutomations:{status:"completed",data:e}})}case e.Actions.SetUserExperiments:return Object.assign(Object.assign({},o),{userExperiments:r.payload});case e.Actions.SetShouldSubscribeToBolt:return Object.assign(Object.assign({},o),{shouldSubscribeToBolt:r.payload});case e.Actions.InitWorkflowBuilder:return Object.assign(Object.assign({},o),{workflowBuilder:r.payload});case e.Actions.TearDownWorkflowBuilder:return Object.assign(Object.assign({},o),{workflowBuilder:void 0});case e.Actions.SetWorkflowBuilderOperation:{const e=o.workflowBuilder;return e?Object.assign(Object.assign({},o),{workflowBuilder:Object.assign(Object.assign({},e),{operation:r.payload})}):o}case e.Actions.UpdateWorkflowActionStep:{const e=o.workflowBuilder;if(!e||!e.actions)return o;const s=e.actions.findIndex((e=>e.id===r.payload.id));if(-1===s)return o;const a=e.actions[s],i=r.payload.action,n=t.__rest(i,["id"]),l=Object.assign(Object.assign({},a),n);if(_.isEqual(a,l))return o;const c=[...e.actions];return c[s]=Object.assign(Object.assign({},c[s]),l),Object.assign(Object.assign({},o),{workflowBuilder:Object.assign(Object.assign({},e),{actions:c})})}case e.Actions.DeleteWorkflowActionStep:{const e=o.workflowBuilder;if(!e||!e.actions)return o;const t=e.actions.filter((e=>e.id!==r.payload.id));return Object.assign(Object.assign({},o),{workflowBuilder:Object.assign(Object.assign({},e),{actions:t})})}case e.Actions.UpdateWorkflowTriggerStep:{const e=o.workflowBuilder;if(!e)return o;if(null==r.payload)return Object.assign(Object.assign({},o),{workflowBuilder:Object.assign(Object.assign({},e),{trigger:void 0})});if(!(null==e?void 0:e.trigger))return o;const t=Object.assign(Object.assign({},e.trigger),r.payload);return Object.assign(Object.assign({},o),{workflowBuilder:Object.assign(Object.assign({},e),{trigger:t})})}case e.Actions.SetWorkflowBuilderActions:{const e=o.workflowBuilder;return e?Object.assign(Object.assign({},o),{workflowBuilder:Object.assign(Object.assign({},e),{actions:r.payload})}):o}case e.Actions.SetWorkflowStepsConfig:return Object.assign(Object.assign({},o),{workflowStepsConfig:r.payload});case e.Actions.SetWorkflowBuilderWidth:{const e=o.workflowBuilder;return e?Object.assign(Object.assign({},o),{workflowBuilder:Object.assign(Object.assign({},e),{width:r.payload})}):o}case e.Actions.SetWorkflowBuilderApplyToExisting:{const e=o.workflowBuilder;return e?Object.assign(Object.assign({},o),{workflowBuilder:Object.assign(Object.assign({},e),{applyToExistingFiles:r.payload})}):o}case e.Actions.SetWorkflowBuilderInheritable:{const e=o.workflowBuilder;return e?Object.assign(Object.assign({},o),{workflowBuilder:Object.assign(Object.assign({},e),{inheritable:r.payload})}):o}case e.Actions.UpdateWorkflowBuilderIsEnabled:return Object.assign(Object.assign({},o),o.workflowBuilder&&{workflowBuilder:Object.assign(Object.assign({},o.workflowBuilder),{isEnabled:r.payload})});case e.Actions.UpdateWorkflowBuilderPreviewAction:return Object.assign(Object.assign({},o),o.workflowBuilder&&{workflowBuilder:Object.assign(Object.assign({},o.workflowBuilder),{previewActionId:r.payload})});case e.Actions.UpdateSavedWorkflowTemplateState:return Object.assign(Object.assign({},o),o.workflowBuilder&&{workflowBuilder:Object.assign(Object.assign({},o.workflowBuilder),{savedWorkflowTemplateState:r.payload})});case e.Actions.UpdateSavedWorkflowTemplateName:return Object.assign(Object.assign({},o),o.workflowBuilder&&{workflowBuilder:Object.assign(Object.assign({},o.workflowBuilder),{savedWorkflowTemplateState:o.workflowBuilder.savedWorkflowTemplateState&&Object.assign(Object.assign({},o.workflowBuilder.savedWorkflowTemplateState),{name:r.payload})})});case e.Actions.UpdateSavedWorkflowTemplateOptOut:return"A"===(null===(a=null===(s=o.workflowBuilder)||void 0===s?void 0:s.savedWorkflowTemplateState)||void 0===a?void 0:a.variant)?o:Object.assign(Object.assign({},o),o.workflowBuilder&&o.workflowBuilder.savedWorkflowTemplateState&&{workflowBuilder:Object.assign(Object.assign({},o.workflowBuilder),{savedWorkflowTemplateState:Object.assign(Object.assign({},o.workflowBuilder.savedWorkflowTemplateState),{optOut:r.payload})})});case e.Actions.UpdateSavedWorkflowTemplates:return Object.assign(Object.assign({},o),{savedWorkflowTemplates:r.payload});case e.Actions.SetInheritanceBlockingFqPaths:return Object.assign(Object.assign({},o),{inheritanceBlockingFqPaths:new Set([...o.inheritanceBlockingFqPaths,...r.payload])});default:return o}},e.DEFAULT_CLIENT_FOLDER_TRIGGER=U,e.FEEDBACK_FORM_MAX_COMMENT_LENGTH=5e3,e.FOLDER_NAME_MAX_LENGTH=255,e.MODAL_DEFAULT_WIDTH=600,e.MODAL_FULL_WIDTH=1200,e.MODAL_LAYER_PORTAL_SELECTOR="flows-workflow-builder-layer-portal-selector",e.MODAL_PREVIEW_PORTAL_SELECTOR="flows-modal-preview-portal-selector",e.commitAutoWatermarkBlocks=function(e,t){const o={filename:e,block_tokens:t};return r.GetFlowsRoutes(new s.UserApiV2Client).rpc("auto_watermark_hidden_ns",o,{subjectUserId:s.mustGetActiveUserId()})},e.convertSubfolderRulesResultToAutomations=function(e,t){const o=e.inherited_rule_set_result,r=e.rule_set_results,s=[];if((null==o?void 0:o.rule_set)&&(null==o?void 0:o.fq_path)){const e=h(o.rule_set,o.fq_path,t);s.push(...e)}if(r)for(const e of r)s.push(...h(e.rule_set,e.fq_path,t));return function(e){const t=new Map;return e.forEach((e=>{t.set(e.fqPath,e)})),t}(s)},e.createFolder=function(e){const t={path:e};return a.PapLogger.logInitiateAutoFolderModalFolderCreate(),o.GetFilesRoutes(new s.UserApiV2Client).rpc("create_folder_v2",t,{subjectUserId:s.mustGetActiveUserId()}).then((e=>(a.PapLogger.logSucceedAutoFolderModalFolderCreate(),e)),(e=>{throw a.PapLogger.logFailAutoFolderModalFolderCreate(),e}))},e.createSavedWorkflowTemplate=function(e,t){const o={template:e,name:t};return r.GetFlowsRoutes(new s.UserApiV2Client).rpc("saved_workflow_template/create",o,{subjectUserId:s.mustGetActiveUserId()})},e.createSavedWorkflowTemplateObject=function(e){var t;const o=[];try{const r=null===(t=e.workflow_template)||void 0===t?void 0:t.sequence;if(r&&r.forEach((e=>{const t=v(e);t&&o.push(t)})),o)return{name:e.name,templateId:e.template_id,clientWorkflowActions:o}}catch(e){u.reportException({err:e,force:!0,tags:[r.EXCLOG_TAG_SAVED_WORKFLOW_TEMPLATE],severity:"non-critical"})}},e.defaultAutomationsState=j,e.deleteSavedWorkflowTemplate=function(e){const t={template_id:e};return r.GetFlowsRoutes(new s.UserApiV2Client).rpc("saved_workflow_template/delete",t,{subjectUserId:s.mustGetActiveUserId()})},e.getActionTypeFromActions=L,e.getFolderMetadata=function(e){const t={path:e};return o.GetFilesRoutes(new s.UserApiV2Client).rpc("get_metadata",t,{subjectUserId:s.mustGetActiveUserId()})},e.getFolderName=function(e){const t=e.split("/");return t[t.length-1]},e.getFolderRules=function(e){const t={get_rule_arg:{".tag":"get_folder_rule_arg",folder_fq_path:e}};return r.GetFlowsRoutes(new s.UserApiV2Client).rpc("get_rule",t,{subjectUserId:s.mustGetActiveUserId()})},e.getFolderRulesConfig=function(){return r.GetFlowsRoutes(new s.UserApiV2Client).rpc("get_folder_rules_config",void 0,{subjectUserId:s.mustGetActiveUserId()})},e.getInheritanceBlockingFqPathResult=function(e){const t=e.inherited_rule_set_result;return(null==t?void 0:t.fq_path)&&!(null==t?void 0:t.rule_set)?[t.fq_path]:[]},e.getPreviewDataByFileIds=function(e){const t={file_ids:[e]};return o.GetPreviewsRoutes(new s.UserApiV2Client).rpc("get_preview_data_by_file_ids_batch",t,{subjectUserId:s.mustGetActiveUserId()})},e.getSavedWorkflowTemplates=function(e){const t={include_deleted:e};return r.GetFlowsRoutes(new s.UserApiV2Client).rpc("saved_workflow_template/list",t,{subjectUserId:s.mustGetActiveUserId()})},e.getSubfolderRules=function(e,t){const o={folder_fq_path:e,inheritance_enabled:t};return r.GetFlowsRoutes(new s.UserApiV2Client).rpc("get_subfolder_rules",o,{subjectUserId:s.mustGetActiveUserId()})},e.isInherited=function(e){return!!e.inheritedFromFqPath},e.logFreeformFeedback=function(e,t,o){const a={log_feedback_arg:{".tag":"log_freeform_feedback_arg",freeform_feedback:e,folder_fq_path:t,feedback_source:o}};return r.GetFlowsRoutes(new s.UserApiV2Client).rpc("log_feedback",a,{subjectUserId:s.mustGetActiveUserId()})},e.makeFolderRuleSetFromClientWorkflow=M,e.makeWorkflowTemplate=D,e.removeFolderRules=function(e,t){const o={remove_rules_arg:{".tag":"remove_folder_rules_arg",folder_fq_path:e,rule_set:t}};return r.GetFlowsRoutes(new s.UserApiV2Client).rpc("remove_rules",o,{subjectUserId:s.mustGetActiveUserId()})},e.submitFileWorkflow=function(e,t,o){const a={template:e,file_ids:t,shared_link_url:o};return r.GetFlowsRoutes(new s.UserApiV2Client).rpc("submit_file_workflow",a,{subjectUserId:s.mustGetActiveUserId()})},e.undoActions=function(e,t){const o={creates:e,moves:t};return r.GetFlowsRoutes(new s.UserApiV2Client).rpc("undo_actions",o,{subjectUserId:s.mustGetActiveUserId()})},e.updateFolderRule=function({actions:e,applyToExistingFiles:o,enabled:r,fqPath:s,papEventProperties:i,trigger:n,inheritable:l}){return t.__awaiter(this,void 0,void 0,(function*(){if(e.length>0&&e.every((e=>{return t=e.actionType,E.includes(t);var t}))&&(t=n.triggerType,m.includes(t)))return a.PapLogger.logInitiateAutoFolderModalUpdateAutomation(Object.assign({actionTag:L(e),workflowTemplate:D(e),seqLength:e.length,applyToExisting:o},i)),A(s,M({actions:e,inheritable:l,isEnabled:r,trigger:n}),o).then((t=>(a.PapLogger.logSucceedAutoFolderModalUpdateAutomation(Object.assign({actionTag:L(e),workflowTemplate:D(e),seqLength:e.length},i)),t)),(t=>{throw a.PapLogger.logFailAutoFolderModalUpdateAutomation(Object.assign({actionTag:L(e),workflowTemplate:D(e),seqLength:e.length},i)),t}));var t;throw new Error(`Undefined action .tag ${e} or trigger .tag ${n}`)}))},e.updateFolderRules=A}));
//# sourceMappingURL=c_flows_redux_reducer.js-vflsme0q8.map
