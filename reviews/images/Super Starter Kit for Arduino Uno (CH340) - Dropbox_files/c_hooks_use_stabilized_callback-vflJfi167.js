define(["exports","react","./e_folder_viewer_src_main","./c_init_data_runtime","./c_react_query_helpers_helpers","./c_core_i18n"],(function(e,t,a,i,n,o){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}var l=s(t);a.injectInternalStyle("/static/metaserver/static/js/cloud_docs/shared_components/templates/modal_template.module.out-vflEkYJAG.css",(e=>"._modalTemplateWrapper_1iofx_1{display:flex;flex-direction:row}._modalTemplateContainer_1iofx_6{align-items:flex-start;display:flex;flex:1;flex-direction:column;padding:0}._modalTemplatePaper_1iofx_15{align-items:flex-start;align-self:stretch;display:flex;flex-direction:row;padding:var(--spacing__unit--3) var(--spacing__unit--3) 0}._modalTemplateContent_1iofx_24{align-items:flex-start;display:flex;flex-direction:column;flex-grow:1;justify-content:center;padding:0}._modalTemplateHeading_1iofx_34{align-items:flex-start;display:flex;flex-direction:row;padding:var(--spacing__unit--4) var(--spacing__unit--3) var(--spacing__unit--2)}._modalTemplateText_1iofx_42{padding:0 var(--spacing__unit--3)}._modalTemplateActions_1iofx_46{align-items:center;align-self:stretch;display:flex;flex-direction:row;gap:var(--spacing__unit--1);padding:var(--spacing__unit--3)}._modalTemplateButtonGroup_1iofx_56,._modalTemplateTertiaryActionContainer_1iofx_65{align-items:center;display:flex;flex-direction:row;gap:var(--spacing__unit--1);padding:0}._modalTemplateTertiaryActionContainer_1iofx_65{flex-grow:1;justify-content:flex-end}._modalTemplateImageFrame_1iofx_76{align-items:center;background:var(--color__opacity--3);display:flex;flex:1;flex-direction:column;justify-content:center;min-height:420px;min-width:400px;position:relative}@media (max-width:767.98px){._modalTemplateImageFrame_1iofx_76{display:none}}"));const r="_modalTemplateWrapper_1iofx_1",d="_modalTemplateContainer_1iofx_6",_="_modalTemplatePaper_1iofx_15",c="_modalTemplateContent_1iofx_24",m="_modalTemplateHeading_1iofx_34",f="_modalTemplateText_1iofx_42",u="_modalTemplateActions_1iofx_46",g="_modalTemplateButtonGroup_1iofx_56",p="_modalTemplateTertiaryActionContainer_1iofx_65",M="_modalTemplateImageFrame_1iofx_76",E=({actions:e,ariaLabel:t,appElement:i,bodyText:n,height:o,infoTextAboveModalTitle:s,tertiaryActions:E,title:I,rightFrameComponent:T,onRequestClose:L,open:N,width:O,withCloseButton:S})=>(a.Modal.setAppElement(i||document.body),l.default.createElement(a.Modal,{onRequestClose:L,open:null==N||N,width:O,isCentered:!0,shouldCloseOnOverlayClick:!1,withCloseButton:S,"aria-labelledby":t},l.default.createElement("div",{className:r,style:{minHeight:null!=o?o:"auto"}},l.default.createElement("div",{className:d},s&&l.default.createElement("div",{className:_},l.default.createElement(a.Text,{size:"small",color:"faint"},s)),l.default.createElement("div",{className:c},l.default.createElement("div",{className:m},l.default.createElement(a.Title,null,I)),l.default.createElement("div",{className:f},n)),l.default.createElement("div",{className:u},e&&l.default.createElement("div",{className:g},e),E&&l.default.createElement("div",{className:p},E))),T&&l.default.createElement("div",{className:M},T))));var I;E.displayName="ModalTemplate",e.Strings=void 0,(I=e.Strings||(e.Strings={})).OK=o.intl.formatMessage({id:"G6rEKj",defaultMessage:"OK"}),I.NEXT=o.intl.formatMessage({id:"yah+je",defaultMessage:"Next"}),I.BACK=o.intl.formatMessage({id:"k9vJ0G",defaultMessage:"Back"}),I.CANCEL=o.intl.formatMessage({id:"S53N5s",defaultMessage:"Cancel"}),I.CREATE=o.intl.formatMessage({id:"cVVoCl",defaultMessage:"Create"}),I.SAVE=o.intl.formatMessage({id:"HqImMi",defaultMessage:"Save"}),I.LEARN_MORE=o.intl.formatMessage({id:"sUsXMb",defaultMessage:"Learn more"}),I.DONE=o.intl.formatMessage({id:"H/MlMr",defaultMessage:"Done"}),I.FINISH=o.intl.formatMessage({id:"n4dBJ7",defaultMessage:"Finish"}),I.CLOSE=o.intl.formatMessage({id:"/nCb7L",defaultMessage:"Close"}),I.DISMISS=o.intl.formatMessage({id:"h4rpeQ",defaultMessage:"Dismiss"}),I.CONFIGURE_NOW=o.intl.formatMessage({id:"vQKdKf",defaultMessage:"Configure now"}),I.RECONFIGURE=o.intl.formatMessage({id:"DN+Nvb",defaultMessage:"Reconfigure"}),I.CONFIRM_PREFERENCE=o.intl.formatMessage({id:"qlRt63",defaultMessage:"Confirm your preference"}),I.MANAGE_PREFERENCE=o.intl.formatMessage({id:"ILUbaa",defaultMessage:"Manage preference"}),I.SHOW_IN_GOOGLE_DRIVE=o.intl.formatMessage({id:"S0LHV5",defaultMessage:"Show in Google Drive"}),I.LINK_ACCOUNT=o.intl.formatMessage({id:"JhmneM",defaultMessage:"Link account"}),I.GET_MIGRATION_SETTINGS_ERROR=o.intl.formatMessage({id:"C40Kmf",defaultMessage:"Could not fetch migration settings"}),I.SET_MIGRATION_SETTINGS_ERROR=o.intl.formatMessage({id:"omeHSB",defaultMessage:"Could not update migration settings"}),I.EDIT_APP_PERMISSIONS=o.intl.formatMessage({id:"GYeDWi",defaultMessage:"Edit app permissions"}),I.MIGRATION_FOLDER=o.intl.formatMessage({id:"vp+jh3",defaultMessage:"Dropbox"}),I.DEFAULT_SHORTCUT_NAME=o.intl.formatMessage({id:"o9Zw70",defaultMessage:"Untitled"}),I.VIEW_SUMMARY=o.intl.formatMessage({id:"9m2UYm",defaultMessage:"View summary"}),I.LOADING_ANIMATION=o.intl.formatMessage({id:"2/JlYM",defaultMessage:"Loading animation..."}),I.DISABLED_MIGRATE_FILES_TO_GOOGLE_DRIVE_TOOLTIP_TEXT=o.intl.formatMessage({id:"hC4dZf",defaultMessage:"You do not have permission to move your Google files to Google Drive. Please reach to your admin to get permission"}),I.CONVERT_NOW=o.intl.formatMessage({id:"Iff87z",defaultMessage:"Convert now"}),I.LINK_TO_INCOMPATIBLE_GOOGLE_ACCOUNT=o.intl.formatMessage({id:"u9TFTP",defaultMessage:"Please link to the Google account of the same email as your Dropbox account."}),I.FAIL_TO_LINK_GOOGLE_ACCOUNT=o.intl.formatMessage({id:"4L5zkJ",defaultMessage:"Failed to link Google account."}),I.GOOGLE_AUTH_FAILED=o.intl.formatMessage({id:"4Mo3Jb",defaultMessage:"Google authentication failed"}),I.GOOGLE_AUTH_POPUP_BLOCKED=o.intl.formatMessage({id:"6EyPz0",defaultMessage:"Pop-up blocked. Please disable pop-up blockers in order to link your Google account"});const T=["documents"];var L;function N(t,o){return i.__awaiter(this,void 0,void 0,(function*(){const i=new n.UserApiV2Client,s=yield a.GetProfileServicesRoutes(i).rpc("list_linked_services",void 0,{subjectUserId:t.id});let l=!1;for(const t of s.linked_services){if(!("google"===t.service_type[".tag"]))continue;if(!("is_connected"===t.connection_state[".tag"]))continue;if(T.every((e=>t.granted_permissions.some((t=>t[".tag"]===e))))&&(l=!0,!o||t.display_name===o))return e.GddMigrationCompatibleLinkStatus.HAS_COMPATIBLE_LINK}return l?e.GddMigrationCompatibleLinkStatus.HAS_INCOMPATIBLE_LINK:e.GddMigrationCompatibleLinkStatus.NOT_LINKED}))}function O(t,o){return i.__awaiter(this,void 0,void 0,(function*(){const s=t.email;if(!o){const o=yield N(t,s);if(o===e.GddMigrationCompatibleLinkStatus.HAS_COMPATIBLE_LINK)return e.GddMigrationCompatibleLinkStatus.HAS_COMPATIBLE_LINK;if(o===e.GddMigrationCompatibleLinkStatus.HAS_INCOMPATIBLE_LINK)try{yield function(e){return i.__awaiter(this,void 0,void 0,(function*(){const t=new n.UserApiV2Client;yield a.GetProfileServicesRoutes(t).rpc("unlink",{service:{".tag":"google"}},{subjectUserId:e.id})}))}(t)}catch(e){}}const l=new a.ProfileServicesLinkingHandler,r=yield l.auth_service_with_user_promise(a.ProfileServicesConstants.GOOGLE,t.id,null,"link_read_files",void 0,void 0,T,void 0,s);return r.success?r.display_name===s?e.GddMigrationCompatibleLinkStatus.HAS_COMPATIBLE_LINK:e.GddMigrationCompatibleLinkStatus.HAS_INCOMPATIBLE_LINK:e.GddMigrationCompatibleLinkStatus.NOT_LINKED}))}e.GddMigrationCompatibleLinkStatus=void 0,(L=e.GddMigrationCompatibleLinkStatus||(e.GddMigrationCompatibleLinkStatus={}))[L.HAS_COMPATIBLE_LINK=0]="HAS_COMPATIBLE_LINK",L[L.HAS_INCOMPATIBLE_LINK=1]="HAS_INCOMPATIBLE_LINK",L[L.NOT_LINKED=2]="NOT_LINKED";const S=t=>"window_not_created"===t?e.Strings.GOOGLE_AUTH_POPUP_BLOCKED:"window_closed"!==t?e.Strings.GOOGLE_AUTH_FAILED:void 0;e.HELLOSIGN_SUPPORTED_EXTENSIONS=[".doc",".docx",".pdf",".ppsx",".ppt",".pptx",".jpg",".jpeg",".png",".xls",".xlsx",".txt",".html",".gif"],e.HELLO_SIGN_MAX_FILE_SIZE=4e7,e.HELLO_SIGN_MAX_PAGES=500,e.ModalTemplate=E,e.PAP_NavigateTo_Edit=function(e){return{class:"navigation",action:"navigate_to",object:"edit",properties:e}},e.SIGN_NON_PDF_IN_PDF_EDITOR_SUPPORTED_EXTENSIONS=["doc","docx","ppsx","ppt","pptx","jpg","jpeg","png"],e.SIGN_NON_PDF_IN_PDF_EDITOR_SUPPORTED_EXTENSIONS_M2=["xls","xlsx"],e.ensureUserHasGddMigrationCompatibleLink=O,e.ensureUserHasLinkedAccountAndReport=t=>i.__awaiter(void 0,void 0,void 0,(function*(){try{const i=yield O(t);switch(i){case e.GddMigrationCompatibleLinkStatus.HAS_COMPATIBLE_LINK:return!0;case e.GddMigrationCompatibleLinkStatus.HAS_INCOMPATIBLE_LINK:a.Snackbar$1.failSticky(e.Strings.LINK_TO_INCOMPATIBLE_GOOGLE_ACCOUNT);break;case e.GddMigrationCompatibleLinkStatus.NOT_LINKED:a.Snackbar$1.failSticky(e.Strings.FAIL_TO_LINK_GOOGLE_ACCOUNT);break;default:a.Snackbar$1.failSticky(e.Strings.FAIL_TO_LINK_GOOGLE_ACCOUNT),a.enforceExhaustive(i)}}catch(e){const t=S(e);t&&a.Snackbar$1.failSticky(t)}return!1})),e.fetchUserHasGddMigrationCompatibleLink=N,e.generateUUID=function(e){const t=()=>Math.floor(65536*(1+Math.random())).toString(16).substring(1);return`${e}-${t()+t()+t()+t()}`},e.getUserFriendlyLinkAccountErrorMessage=S,e.useStabilizedCallback=e=>{const a=t.useRef(e);a.current=e;return t.useRef(((...e)=>(0,a.current)(...e))).current}}));
//# sourceMappingURL=c_hooks_use_stabilized_callback.js-vflvURFiy.map
