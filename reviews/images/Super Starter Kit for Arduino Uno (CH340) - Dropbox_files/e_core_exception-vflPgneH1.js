define(["exports"],(function(e){"use strict";var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function t(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}let r=new Set;if(window.ensemble){const e=window;e.REGISTERED_EXCEPTION_TAGS||(e.REGISTERED_EXCEPTION_TAGS=new Set),r=e.REGISTERED_EXCEPTION_TAGS}var c,i={exports:{}};c=i,function(e,n){if(e){var t={},r=e.TraceKit,i=[].slice,o="?";t.noConflict=function(){return e.TraceKit=r,t},t.wrap=function(e){return function(){try{return e.apply(this,arguments)}catch(e){throw t.report(e),e}}},t.report=function(){var n,r,c=[],o=null,s=null,u=null;function a(e,n){var r=null;if(!n||t.collectWindowErrors){for(var o in c)if(l(c,o))try{c[o].apply(null,[e].concat(i.call(arguments,2)))}catch(e){r=e}if(r)throw r}}function f(e,r,c,i,o){if(u)t.computeStackTrace.augmentStackTraceWithInitialElement(u,r,c,e),p();else if(o)a(t.computeStackTrace(o),!0);else{var l={url:r,line:c,column:i};l.func=t.computeStackTrace.guessFunctionName(l.url,l.line),l.context=t.computeStackTrace.gatherContext(l.url,l.line),a({mode:"onerror",message:e,stack:[l]},!0)}return!!n&&n.apply(this,arguments)}function p(){var e=u,n=o;o=null,u=null,s=null,a.apply(null,[e,!1].concat(n))}function g(n){if(u){if(s===n)return;p()}var r=t.computeStackTrace(n);throw u=r,s=n,o=i.call(arguments,1),e.setTimeout((function(){s===n&&p()}),r.incomplete?2e3:0),n}return g.subscribe=function(t){!0!==r&&(n=e.onerror,e.onerror=f,r=!0),c.push(t)},g.unsubscribe=function(e){for(var n=c.length-1;n>=0;--n)c[n]===e&&c.splice(n,1)},g}(),t.computeStackTrace=function(){var n={};function r(r){if("string"!=typeof r)return[];if(!l(n,r)){var c="",i="";try{i=e.document.domain}catch(e){}var o=/(.*)\:\/\/([^:\/]+)([:\d]*)\/{0,1}([\s\S]*)/.exec(r);o&&o[2]===i&&(c=function(n){if(!t.remoteFetching)return"";try{var r=function(){try{return new e.XMLHttpRequest}catch(n){return new e.ActiveXObject("Microsoft.XMLHTTP")}}();return r.open("GET",n,!1),r.send(""),r.responseText}catch(e){return""}}(r)),n[r]=c?c.split("\n"):[]}return n[r]}function c(e,n){var t,c=/function ([^(]*)\(([^)]*)\)/,i=/['"]?([0-9A-Za-z$_]+)['"]?\s*[:=]\s*(function|eval|new Function)/,l="",u=r(e);if(!u.length)return o;for(var a=0;a<10;++a)if(!s(l=u[n-a]+l)){if(t=i.exec(l))return t[1];if(t=c.exec(l))return t[1]}return o}function i(e,n){var c=r(e);if(!c.length)return null;var i=[],o=Math.floor(t.linesOfContext/2),l=o+t.linesOfContext%2,u=Math.max(0,n-o-1),a=Math.min(c.length,n+l-1);n-=1;for(var f=u;f<a;++f)s(c[f])||i.push(c[f]);return i.length>0?i:null}function u(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#]/g,"\\$&")}function a(e){return u(e).replace("<","(?:<|&lt;)").replace(">","(?:>|&gt;)").replace("&","(?:&|&amp;)").replace('"','(?:"|&quot;)').replace(/\s+/g,"\\s+")}function f(e,n){for(var t,c,i=0,o=n.length;i<o;++i)if((t=r(n[i])).length&&(t=t.join("\n"),c=e.exec(t)))return{url:n[i],line:t.substring(0,c.index).split("\n").length,column:c.index-t.lastIndexOf("\n",c.index)-1};return null}function p(e,n,t){var c,i=r(n),o=new RegExp("\\b"+u(e)+"\\b");return t-=1,i&&i.length>t&&(c=o.exec(i[t]))?c.index:null}function g(n){if(!s(e&&e.document)){for(var t,r,c,i,o=[e.location.href],l=e.document.getElementsByTagName("script"),p=""+n,g=0;g<l.length;++g){var m=l[g];m.src&&o.push(m.src)}if(c=/^function(?:\s+([\w$]+))?\s*\(([\w\s,]*)\)\s*\{\s*(\S[\s\S]*\S)\s*\}\s*$/.exec(p)){var d=c[1]?"\\s+"+c[1]:"",x=c[2].split(",").join("\\s*,\\s*");t=u(c[3]).replace(/;$/,";?"),r=new RegExp("function"+d+"\\s*\\(\\s*"+x+"\\s*\\)\\s*{\\s*"+t+"\\s*}")}else r=new RegExp(u(p).replace(/\s+/g,"\\s+"));if(i=f(r,o))return i;if(c=/^function on([\w$]+)\s*\(event\)\s*\{\s*(\S[\s\S]*\S)\s*\}\s*$/.exec(p)){var h=c[1];if(t=a(c[2]),i=f(r=new RegExp("on"+h+"=[\\'\"]\\s*"+t+"\\s*[\\'\"]","i"),o[0]))return i;if(i=f(r=new RegExp(t),o))return i}return null}}function m(e,n,t,r){var o={url:n,line:t};if(o.url&&o.line){e.incomplete=!1,o.func||(o.func=c(o.url,o.line)),o.context||(o.context=i(o.url,o.line));var l=/ '([^']+)' /.exec(r);if(l&&(o.column=p(l[1],o.url,o.line)),e.stack.length>0&&e.stack[0].url===o.url){if(e.stack[0].line===o.line)return!1;if(!e.stack[0].line&&e.stack[0].func===o.func)return e.stack[0].line=o.line,e.stack[0].context=o.context,!1}return e.stack.unshift(o),e.partial=!0,!0}return e.incomplete=!0,!1}function d(e,n){for(var r,i,l,s=/function\s+([_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*)?\s*\(/i,u=[],a={},f=!1,h=d.caller;h&&!f;h=h.caller)if(h!==x&&h!==t.report){if(i={url:null,func:o,args:[],line:null,column:null},h.name?i.func=h.name:(r=s.exec(h.toString()))&&(i.func=r[1]),void 0===i.func)try{i.func=r.input.substring(0,r.input.indexOf("{"))}catch(e){}if(l=g(h)){i.url=l.url,i.line=l.line,i.func===o&&(i.func=c(i.url,i.line));var v=/ '([^']+)' /.exec(e.message||e.description);v&&(i.column=p(v[1],l.url,l.line))}a[""+h]?f=!0:a[""+h]=!0,u.push(i)}n&&u.splice(0,n);var E={mode:"callers",name:e.name,message:e.message,stack:u};return m(E,e.sourceURL||e.fileName,e.line||e.lineNumber,e.message||e.description),E}function x(n,t){var u=null;t=null==t?0:+t;try{if(u=function(e){var n=e.stacktrace;if(n){for(var t,r=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,o=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^\)]+))\((.*)\))? in (.*):\s*$/i,l=n.split("\n"),s=[],u=0;u<l.length;u+=2){var a=null;if((t=r.exec(l[u]))?a={url:t[2],line:+t[1],column:null,func:t[3],args:[]}:(t=o.exec(l[u]))&&(a={url:t[6],line:+t[1],column:+t[2],func:t[3]||t[4],args:t[5]?t[5].split(","):[]}),a){if(!a.func&&a.line&&(a.func=c(a.url,a.line)),a.line)try{a.context=i(a.url,a.line)}catch(e){}a.context||(a.context=[l[u+1]]),s.push(a)}}return s.length?{mode:"stacktrace",name:e.name,message:e.message,stack:s}:null}}(n),u)return u}catch(e){}try{if(u=function(e){if(!e.stack)return null;for(var n,t,r=/^\s*at (.*?) ?\(((?:file|https?|blob|chrome-extension|native|webpack|eval).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,l=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|webpack|\[native).*?)(?::(\d+))?(?::(\d+))?\s*$/i,u=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,a=e.stack.split("\n"),f=[],g=/^(.*) is undefined$/.exec(e.message),m=0,d=a.length;m<d;++m){if(n=r.exec(a[m])){var x=n[2]&&-1!==n[2].indexOf("native");t={url:x?null:n[2],func:n[1]||o,args:x?[n[2]]:[],line:n[3]?+n[3]:null,column:n[4]?+n[4]:null}}else if(n=u.exec(a[m]))t={url:n[2],func:n[1]||o,args:[],line:+n[3],column:n[4]?+n[4]:null};else{if(!(n=l.exec(a[m])))continue;t={url:n[3],func:n[1]||o,args:n[2]?n[2].split(","):[],line:n[4]?+n[4]:null,column:n[5]?+n[5]:null}}!t.func&&t.line&&(t.func=c(t.url,t.line)),t.line&&(t.context=i(t.url,t.line)),f.push(t)}return f.length?(f[0]&&f[0].line&&!f[0].column&&g?f[0].column=p(g[1],f[0].url,f[0].line):f[0].column||s(e.columnNumber)||(f[0].column=e.columnNumber+1),{mode:"stack",name:e.name,message:e.message,stack:f}):null}(n),u)return u}catch(e){}try{if(u=function(n){var t=n.message.split("\n");if(t.length<4)return null;var o,s=/^\s*Line (\d+) of linked script ((?:file|https?|blob)\S+)(?:: in function (\S+))?\s*$/i,u=/^\s*Line (\d+) of inline#(\d+) script in ((?:file|https?|blob)\S+)(?:: in function (\S+))?\s*$/i,p=/^\s*Line (\d+) of function script\s*$/i,g=[],m=e&&e.document&&e.document.getElementsByTagName("script"),d=[];for(var x in m)l(m,x)&&!m[x].src&&d.push(m[x]);for(var h=2;h<t.length;h+=2){var v=null;if(o=s.exec(t[h]))v={url:o[2],func:o[3],args:[],line:+o[1],column:null};else if(o=u.exec(t[h])){v={url:o[3],func:o[4],args:[],line:+o[1],column:null};var E=+o[1],w=d[o[2]-1];if(w){var b=r(v.url);if(b){var S=(b=b.join("\n")).indexOf(w.innerText);S>=0&&(v.line=E+b.substring(0,S).split("\n").length)}}}else if(o=p.exec(t[h])){var T=e.location.href.replace(/#.*$/,""),k=f(new RegExp(a(t[h+1])),[T]);v={url:T,func:"",args:[],line:k?k.line:o[1],column:null}}if(v){v.func||(v.func=c(v.url,v.line));var y=i(v.url,v.line),O=y?y[Math.floor(y.length/2)]:null;y&&O.replace(/^\s*/,"")===t[h+1].replace(/^\s*/,"")?v.context=y:v.context=[t[h+1]],g.push(v)}}return g.length?{mode:"multiline",name:n.name,message:t[0],stack:g}:null}(n),u)return u}catch(e){}try{if(u=d(n,t+1))return u}catch(e){}return{mode:"failed"}}return x.augmentStackTraceWithInitialElement=m,x.guessFunctionName=c,x.gatherContext=i,x.ofCaller=function(e){e=1+(null==e?0:+e);try{throw new Error}catch(n){return x(n,e+1)}},x.getSource=r,x}(),t.extendToAsynchronousCallbacks=function(){var n=function(n){var r=e[n];e[n]=function(){var e=i.call(arguments),n=e[0];return"function"==typeof n&&(e[0]=t.wrap(n)),r.apply?r.apply(this,e):r(e[0],e[1])}};n("setTimeout"),n("setInterval")},t.remoteFetching||(t.remoteFetching=!0),t.collectWindowErrors||(t.collectWindowErrors=!0),(!t.linesOfContext||t.linesOfContext<1)&&(t.linesOfContext=11),c.exports&&e.module!==c?c.exports=t:e.TraceKit=t}function l(e,n){return Object.prototype.hasOwnProperty.call(e,n)}function s(e){return void 0===e}}("undefined"!=typeof window?window:n);var o=t(i.exports);o.linesOfContext=1,o.remoteFetching=!1,o.noConflict();const l={CRITICAL:"critical",NONCRITICAL:"non-critical",USER_ERROR:"user-error",UNCAUGHT:"uncaught",OPERATIONAL:"operational"};const s=["\\bassert\\b","\\bcollectExceptionStack\\b","\\breportException\\b","\\breportStack\\b","\\bsendExceptionReport\\b"];function u(e){const n=o.computeStackTrace(e),t=null!=(n&&n.stack)?a(n.stack,s):[];let r=[];try{throw new Error}catch(e){const n=o.computeStackTrace(e);null!=n&&null!=n.stack&&(r=n.stack),r=a(r,s)}let c=t.length-r.length;return c<=0&&(c=1),[t.slice(0,c),t.slice(c),n]}function a(e,n){const t=e=>{if(!e)return!1;for(const t of n)if(-1!==e.search(t))return!0;return!1};for(;e.length>0&&t(e[0].func);)e=e.slice(1);return e}let f="production";function p(e){f=e}const g=[];function m(e){g.push(e)}function d(e){const n=g.indexOf(e);n>=0&&g.splice(n,1)}function x(e){const{err:n}=e,t=n instanceof Error?n:new Error(String(n));if(t.reported)return;const[r,c,i]=u(t);t.isAssertion&&g.forEach((e=>e(i)));const o=t;o.stack_frames=r.reverse(),o.context_tb=c.reverse(),o.tags=function(e,n){const t=new Set;return e&&e.forEach((e=>t.add(e))),n&&n.forEach((e=>t.add(e))),Array.from(t.values())}(e.tags,o.tags),o.excExtra=function(e,n){let t={};return e&&(t=Object.assign(Object.assign({},t),e)),n&&(t=Object.assign(Object.assign({},t),n)),t}(e.exc_extra,o.excExtra),o.severity=e.severity,o.force=e.force,window.onerror&&window.onerror(t.message,void 0,void 0,void 0,t)}function h(e,n={}){n={severity:n.severity||l.NONCRITICAL,tags:n.tags||[],exc_extra:n.exc_extra||{},silent:!!n.silent};const t=new Error(e);x({err:t,force:!0,tags:(n.tags||[]).concat("module:exception","reportStack"),severity:n.severity,exc_extra:n.exc_extra}),"production"!==f&&(n.severity===l.CRITICAL?(n.silent||alert(e),console&&console.error&&console.error(t)):console&&console.warn&&console.warn(t))}var v=Object.freeze({__proto__:null,SEVERITY:l,overrideEnvironmentForTesting:p,registerOnFailedAssert:m,reportException:x,reportStack:h,unregisterOnFailedAssert:d});e.JSException=v,e.SEVERITY=l,e.collectExceptionExtra=function(e){let n={};if(e.isAssertion){const t=e;t.assertOptions&&t.assertOptions.exc_extra&&(n=Object.assign(Object.assign({},n),t.assertOptions.exc_extra))}e.excExtra&&(n=Object.assign(Object.assign({},n),e.excExtra)),window.DB_FRAME_BUST&&(n.DB_FRAME_BUST=!0),n.client_time=(new Date).toString(),n.client_utc_time=(new Date).toUTCString();const t={};for(const e in window.requireContexts)if(window.requireContexts.hasOwnProperty(e)){const n={},r=window.requireContexts[e].firstUndefinedModule;r&&(n.first_undefined_module=r),t[e]=n}n.page_alameda_failures=t;const r=window.ensemble;return null!=r&&(null!=r.getExceptionInfo&&(n.dws_page_info=r.getExceptionInfo()),null!=r.getPageletInfoForExceptionReporting&&(n.pagelet_info=r.getPageletInfoForExceptionReporting())),n},e.collectExceptionStack=u,e.collectExceptionTags=function(e){const n=new Set;if(e.isAssertion){const t=e;t.assertOptions&&t.assertOptions.tags&&t.assertOptions.tags.forEach((e=>n.add(e)))}return e.tags&&e.tags.forEach((e=>n.add(e))),function(){const e=[];return r.forEach((n=>e.push(n))),e}().forEach((e=>n.add(e))),Array.from(n.values())},e.commonjsGlobal=n,e.getDefaultExportFromCjs=t,e.overrideEnvironmentForTesting=p,e.registerOnFailedAssert=m,e.reportException=x,e.reportStack=h,e.unregisterOnFailedAssert=d}));
//# sourceMappingURL=e_core_exception.js-vfloCEwNh.map
