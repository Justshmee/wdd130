define(["require","exports","./c_init_data_runtime","./e_privacy_consent_static_ccpa_iframe","./c_src_sink_index","./c_viewer","./e_core_exception","./c_core_uri","./c_pap-client_analytics_client","react","./c_api_v2_noauth_client","./c_user_centric_perf_metrics_component_visually_complete_ajax","./c_core_attribution_header","./c_csrf","./c_browser_browser_detection","./c_core_notify","react-dom","./e_edison","./c_init_data_edison","./c_core_i18n","metaserver/static/js/langpack","./c_core_xhr","metaserver/static/js/modules/constants/viewer"],(function(e,t,n,a,i,o,r,s,l,c,m,_,u,d,E,g,p,h,f,T,N,A,S){"use strict";class I extends n.Message{constructor(e){super(),n.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new I).fromBinary(e,t)}static fromJson(e,t){return(new I).fromJson(e,t)}static fromJsonString(e,t){return(new I).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(I,e,t)}}var O,v,R,C,y;I.runtime=n.proto3,I.typeName="hql_events.TaxonomyAction",I.fields=n.proto3.util.newFieldList((()=>[])),function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.START=1]="START",e[e.FOREGROUND=2]="FOREGROUND",e[e.SHOWN=3]="SHOWN",e[e.HOVER=4]="HOVER",e[e.SCROLL=5]="SCROLL",e[e.SEARCH=6]="SEARCH",e[e.SELECT=7]="SELECT",e[e.PIN=8]="PIN",e[e.UNPIN=9]="UNPIN",e[e.MOVE=10]="MOVE",e[e.RENAME=11]="RENAME",e[e.COPY=12]="COPY",e[e.DELETE=13]="DELETE",e[e.OPEN=14]="OPEN",e[e.CREATE=15]="CREATE",e[e.VERSION_HISTORY=16]="VERSION_HISTORY",e[e.DOWNLOAD=17]="DOWNLOAD",e[e.TRANSFER=18]="TRANSFER",e[e.COMMENT=19]="COMMENT",e[e.STAR=20]="STAR",e[e.UNSTAR=21]="UNSTAR",e[e.UPLOAD=22]="UPLOAD",e[e.REQUEST=23]="REQUEST",e[e.REWIND_HISTORY=24]="REWIND_HISTORY",e[e.SHARE=25]="SHARE",e[e.EDIT=26]="EDIT",e[e.PREVIEW=27]="PREVIEW",e[e.INITIATE=28]="INITIATE",e[e.FAIL=29]="FAIL",e[e.SUCCEED=30]="SUCCEED",e[e.ATTEMPT=31]="ATTEMPT",e[e.PREVIEW_RENDER_SUCCEEDED=32]="PREVIEW_RENDER_SUCCEEDED",e[e.DISMISS=33]="DISMISS",e[e.HEARTBEAT=34]="HEARTBEAT",e[e.CONTINUE=35]="CONTINUE"}(O||(O={})),n.proto3.util.setEnumType(O,"hql_events.TaxonomyAction.Action",[{no:0,name:"UNSPECIFIED"},{no:1,name:"START"},{no:2,name:"FOREGROUND"},{no:3,name:"SHOWN"},{no:4,name:"HOVER"},{no:5,name:"SCROLL"},{no:6,name:"SEARCH"},{no:7,name:"SELECT"},{no:8,name:"PIN"},{no:9,name:"UNPIN"},{no:10,name:"MOVE"},{no:11,name:"RENAME"},{no:12,name:"COPY"},{no:13,name:"DELETE"},{no:14,name:"OPEN"},{no:15,name:"CREATE"},{no:16,name:"VERSION_HISTORY"},{no:17,name:"DOWNLOAD"},{no:18,name:"TRANSFER"},{no:19,name:"COMMENT"},{no:20,name:"STAR"},{no:21,name:"UNSTAR"},{no:22,name:"UPLOAD"},{no:23,name:"REQUEST"},{no:24,name:"REWIND_HISTORY"},{no:25,name:"SHARE"},{no:26,name:"EDIT"},{no:27,name:"PREVIEW"},{no:28,name:"INITIATE"},{no:29,name:"FAIL"},{no:30,name:"SUCCEED"},{no:31,name:"ATTEMPT"},{no:32,name:"PREVIEW_RENDER_SUCCEEDED"},{no:33,name:"DISMISS"},{no:34,name:"HEARTBEAT"},{no:35,name:"CONTINUE"}]);class P extends n.Message{constructor(e){super(),n.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new P).fromBinary(e,t)}static fromJson(e,t){return(new P).fromJson(e,t)}static fromJsonString(e,t){return(new P).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(P,e,t)}}P.runtime=n.proto3,P.typeName="hql_events.TaxonomyClass",P.fields=n.proto3.util.newFieldList((()=>[])),function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.SEE_AND_CLICK=1]="SEE_AND_CLICK",e[e.FILE_ACTIONS=2]="FILE_ACTIONS",e[e.FEATURE=3]="FEATURE"}(v||(v={})),n.proto3.util.setEnumType(v,"hql_events.TaxonomyClass.ClassName",[{no:0,name:"UNSPECIFIED"},{no:1,name:"SEE_AND_CLICK"},{no:2,name:"FILE_ACTIONS"},{no:3,name:"FEATURE"}]);class k extends n.Message{constructor(e){super(),n.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new k).fromBinary(e,t)}static fromJson(e,t){return(new k).fromJson(e,t)}static fromJsonString(e,t){return(new k).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(k,e,t)}}k.runtime=n.proto3,k.typeName="hql_events.TaxonomySubclass",k.fields=n.proto3.util.newFieldList((()=>[])),function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.SHARE=1]="SHARE"}(R||(R={})),n.proto3.util.setEnumType(R,"hql_events.TaxonomySubclass.SubclassName",[{no:0,name:"UNSPECIFIED"},{no:1,name:"SHARE"}]);class w extends n.Message{constructor(e){super(),n.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new w).fromBinary(e,t)}static fromJson(e,t){return(new w).fromJson(e,t)}static fromJsonString(e,t){return(new w).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(w,e,t)}}w.runtime=n.proto3,w.typeName="hql_events.TaxonomyAppSurface",w.fields=n.proto3.util.newFieldList((()=>[])),function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.DESKTOP_COLLAB_BROWSE=1]="DESKTOP_COLLAB_BROWSE",e[e.DESKTOP_TRAY=2]="DESKTOP_TRAY",e[e.WEB=3]="WEB",e[e.NATIVE=4]="NATIVE",e[e.HARMONY=5]="HARMONY"}(C||(C={})),n.proto3.util.setEnumType(C,"hql_events.TaxonomyAppSurface.AppSurface",[{no:0,name:"UNSPECIFIED"},{no:1,name:"DESKTOP_COLLAB_BROWSE"},{no:2,name:"DESKTOP_TRAY"},{no:3,name:"WEB"},{no:4,name:"NATIVE"},{no:5,name:"HARMONY"}]);class L extends n.Message{constructor(e){super(),n.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new L).fromBinary(e,t)}static fromJson(e,t){return(new L).fromJson(e,t)}static fromJsonString(e,t){return(new L).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(L,e,t)}}L.runtime=n.proto3,L.typeName="hql_events.TaxonomyActionSurface",L.fields=n.proto3.util.newFieldList((()=>[])),function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.SIGN_IN_PAGE=1]="SIGN_IN_PAGE",e[e.SIGN_IN_DBX_PAGE=2]="SIGN_IN_DBX_PAGE",e[e.SIGN_IN_GOOGLE_MODAL=3]="SIGN_IN_GOOGLE_MODAL",e[e.INTERSTITIAL_GOOGLE_ACCOUNTS_PAGE=4]="INTERSTITIAL_GOOGLE_ACCOUNTS_PAGE",e[e.SIGNUP_PAGE=5]="SIGNUP_PAGE",e[e.START_MENU=6]="START_MENU",e[e.START_DOCK=7]="START_DOCK",e[e.TRAY_ICON=8]="TRAY_ICON",e[e.NOTIFICATIONS_TAB=9]="NOTIFICATIONS_TAB",e[e.RECENT_TAB=10]="RECENT_TAB",e[e.FOR_YOU_TAB=11]="FOR_YOU_TAB",e[e.RECENT_YOU_SUB_TAB=12]="RECENT_YOU_SUB_TAB",e[e.RECENT_TEAM_SUB_TAB=13]="RECENT_TEAM_SUB_TAB",e[e.CALENDAR_EVENT_MENU=14]="CALENDAR_EVENT_MENU",e[e.SHARING_MODAL=15]="SHARING_MODAL",e[e.TOP_BAR=16]="TOP_BAR",e[e.FOR_YOU_TABS=17]="FOR_YOU_TABS",e[e.SEARCH_RESULTS=18]="SEARCH_RESULTS",e[e.TOP_BAR_CREATE_MENU=19]="TOP_BAR_CREATE_MENU",e[e.TRAY_MENU=20]="TRAY_MENU",e[e.CENTER_PANE=21]="CENTER_PANE",e[e.PLUS_CANCEL_SURVEY_MODAL=22]="PLUS_CANCEL_SURVEY_MODAL",e[e.PROFILE_MENU=23]="PROFILE_MENU",e[e.BROWSER_WINDOW=24]="BROWSER_WINDOW",e[e.RIGHT_PANE=25]="RIGHT_PANE",e[e.CENTER_PANE_PLAN_TAB=26]="CENTER_PANE_PLAN_TAB",e[e.CENTER_PANE_GENERAL_TAB=27]="CENTER_PANE_GENERAL_TAB",e[e.CENTER_PANE_BILLING_TAB=28]="CENTER_PANE_BILLING_TAB",e[e.CENTER_PANE_PERSON=29]="CENTER_PANE_PERSON",e[e.CENTER_PANE_STARRED=30]="CENTER_PANE_STARRED",e[e.CENTER_PANE_CREATE_CONTEXT_MENU=31]="CENTER_PANE_CREATE_CONTEXT_MENU",e[e.CENTER_PANE_VIEW_CONTEXT_MENU=32]="CENTER_PANE_VIEW_CONTEXT_MENU",e[e.LEFT_PANE=33]="LEFT_PANE",e[e.RIGHT_PANE_SHARE_CONTEXT_MENU=34]="RIGHT_PANE_SHARE_CONTEXT_MENU",e[e.APP_ICON=35]="APP_ICON",e[e.RIGHT_PANE_PERSON=36]="RIGHT_PANE_PERSON",e[e.RIGHT_PANE_CONTEXT_MENU=37]="RIGHT_PANE_CONTEXT_MENU",e[e.RIGHT_PANE_OPEN_CONTEXT_MENU=38]="RIGHT_PANE_OPEN_CONTEXT_MENU",e[e.APPLICATION_MENU=39]="APPLICATION_MENU",e[e.CAROUSEL_ONBOARDING_WINDOW=40]="CAROUSEL_ONBOARDING_WINDOW",e[e.CONNECT_APP_WINDOW=41]="CONNECT_APP_WINDOW",e[e.ONBOARDING_TOOLTIP=42]="ONBOARDING_TOOLTIP",e[e.RIGHT_PANE_PIN_CONTEXT_MENU=43]="RIGHT_PANE_PIN_CONTEXT_MENU",e[e.SPACE_EXAMPLE_MODAL=44]="SPACE_EXAMPLE_MODAL",e[e.TEAM_CANCEL_SURVEY_MODAL=45]="TEAM_CANCEL_SURVEY_MODAL",e[e.MOVE_MODAL=46]="MOVE_MODAL",e[e.ACCOUNT_CONTEXT_MENU=47]="ACCOUNT_CONTEXT_MENU",e[e.BOTTOM_BAR=48]="BOTTOM_BAR",e[e.SYNC_QUEUE=49]="SYNC_QUEUE",e[e.PLAN_CHANGE_MODAL=50]="PLAN_CHANGE_MODAL",e[e.MAGIC_PAIRING_WINDOW=51]="MAGIC_PAIRING_WINDOW",e[e.CONTEXT_MENU=52]="CONTEXT_MENU",e[e.SNACKBAR=53]="SNACKBAR",e[e.FILE_SYSTEM_WARNING=54]="FILE_SYSTEM_WARNING",e[e.SCREENSHOT=55]="SCREENSHOT",e[e.SCREEN_RECORDING=56]="SCREEN_RECORDING",e[e.REEL_HOME_PAGE=57]="REEL_HOME_PAGE",e[e.REEL_VIDEO_PAGE=58]="REEL_VIDEO_PAGE",e[e.ESSENTIAL_SETUP_PAGE=64]="ESSENTIAL_SETUP_PAGE"}(y||(y={})),n.proto3.util.setEnumType(y,"hql_events.TaxonomyActionSurface.ActionSurface",[{no:0,name:"UNSPECIFIED"},{no:1,name:"SIGN_IN_PAGE"},{no:2,name:"SIGN_IN_DBX_PAGE"},{no:3,name:"SIGN_IN_GOOGLE_MODAL"},{no:4,name:"INTERSTITIAL_GOOGLE_ACCOUNTS_PAGE"},{no:5,name:"SIGNUP_PAGE"},{no:6,name:"START_MENU"},{no:7,name:"START_DOCK"},{no:8,name:"TRAY_ICON"},{no:9,name:"NOTIFICATIONS_TAB"},{no:10,name:"RECENT_TAB"},{no:11,name:"FOR_YOU_TAB"},{no:12,name:"RECENT_YOU_SUB_TAB"},{no:13,name:"RECENT_TEAM_SUB_TAB"},{no:14,name:"CALENDAR_EVENT_MENU"},{no:15,name:"SHARING_MODAL"},{no:16,name:"TOP_BAR"},{no:17,name:"FOR_YOU_TABS"},{no:18,name:"SEARCH_RESULTS"},{no:19,name:"TOP_BAR_CREATE_MENU"},{no:20,name:"TRAY_MENU"},{no:21,name:"CENTER_PANE"},{no:22,name:"PLUS_CANCEL_SURVEY_MODAL"},{no:23,name:"PROFILE_MENU"},{no:24,name:"BROWSER_WINDOW"},{no:25,name:"RIGHT_PANE"},{no:26,name:"CENTER_PANE_PLAN_TAB"},{no:27,name:"CENTER_PANE_GENERAL_TAB"},{no:28,name:"CENTER_PANE_BILLING_TAB"},{no:29,name:"CENTER_PANE_PERSON"},{no:30,name:"CENTER_PANE_STARRED"},{no:31,name:"CENTER_PANE_CREATE_CONTEXT_MENU"},{no:32,name:"CENTER_PANE_VIEW_CONTEXT_MENU"},{no:33,name:"LEFT_PANE"},{no:34,name:"RIGHT_PANE_SHARE_CONTEXT_MENU"},{no:35,name:"APP_ICON"},{no:36,name:"RIGHT_PANE_PERSON"},{no:37,name:"RIGHT_PANE_CONTEXT_MENU"},{no:38,name:"RIGHT_PANE_OPEN_CONTEXT_MENU"},{no:39,name:"APPLICATION_MENU"},{no:40,name:"CAROUSEL_ONBOARDING_WINDOW"},{no:41,name:"CONNECT_APP_WINDOW"},{no:42,name:"ONBOARDING_TOOLTIP"},{no:43,name:"RIGHT_PANE_PIN_CONTEXT_MENU"},{no:44,name:"SPACE_EXAMPLE_MODAL"},{no:45,name:"TEAM_CANCEL_SURVEY_MODAL"},{no:46,name:"MOVE_MODAL"},{no:47,name:"ACCOUNT_CONTEXT_MENU"},{no:48,name:"BOTTOM_BAR"},{no:49,name:"SYNC_QUEUE"},{no:50,name:"PLAN_CHANGE_MODAL"},{no:51,name:"MAGIC_PAIRING_WINDOW"},{no:52,name:"CONTEXT_MENU"},{no:53,name:"SNACKBAR"},{no:54,name:"FILE_SYSTEM_WARNING"},{no:55,name:"SCREENSHOT"},{no:56,name:"SCREEN_RECORDING"},{no:57,name:"REEL_HOME_PAGE"},{no:58,name:"REEL_VIDEO_PAGE"},{no:64,name:"ESSENTIAL_SETUP_PAGE"}]);class M extends n.Message{constructor(e){super(),this.identity={case:void 0},n.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new M).fromBinary(e,t)}static fromJson(e,t){return(new M).fromJson(e,t)}static fromJsonString(e,t){return(new M).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(M,e,t)}}M.runtime=n.proto3,M.typeName="hql_events.HQLEventIdentity",M.fields=n.proto3.util.newFieldList((()=>[{no:1,name:"action_event_id",kind:"message",T:U,oneof:"identity"},{no:2,name:"event_name",kind:"scalar",T:9,oneof:"identity"},{no:3,name:"event_class",kind:"message",T:D},{no:4,name:"legacy_event",kind:"message",T:x}]));class U extends n.Message{constructor(e){super(),this.object="",this.action=O.UNSPECIFIED,n.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new U).fromBinary(e,t)}static fromJson(e,t){return(new U).fromJson(e,t)}static fromJsonString(e,t){return(new U).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(U,e,t)}}U.runtime=n.proto3,U.typeName="hql_events.HQLEventIdentity.ActionEventIdentity",U.fields=n.proto3.util.newFieldList((()=>[{no:1,name:"object",kind:"scalar",T:9},{no:2,name:"action",kind:"enum",T:n.proto3.getEnumType(O)}]));class D extends n.Message{constructor(e){super(),this.className=v.UNSPECIFIED,this.subclassName=R.UNSPECIFIED,n.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new D).fromBinary(e,t)}static fromJson(e,t){return(new D).fromJson(e,t)}static fromJsonString(e,t){return(new D).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(D,e,t)}}D.runtime=n.proto3,D.typeName="hql_events.HQLEventIdentity.EventClass",D.fields=n.proto3.util.newFieldList((()=>[{no:1,name:"class_name",kind:"enum",T:n.proto3.getEnumType(v)},{no:2,name:"subclass_name",kind:"enum",T:n.proto3.getEnumType(R)}]));class x extends n.Message{constructor(e){super(),this.table="",this.name="",n.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new x).fromBinary(e,t)}static fromJson(e,t){return(new x).fromJson(e,t)}static fromJsonString(e,t){return(new x).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(x,e,t)}}x.runtime=n.proto3,x.typeName="hql_events.HQLEventIdentity.LegacyEvent",x.fields=n.proto3.util.newFieldList((()=>[{no:1,name:"table",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9}]));class B extends n.Message{constructor(e){super(),this.appSurface=C.UNSPECIFIED,this.actionSurface=y.UNSPECIFIED,n.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new B).fromBinary(e,t)}static fromJson(e,t){return(new B).fromJson(e,t)}static fromJsonString(e,t){return(new B).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(B,e,t)}}B.runtime=n.proto3,B.typeName="hql_events.HQLMetadata",B.fields=n.proto3.util.newFieldList((()=>[{no:1,name:"app_surface",kind:"enum",T:n.proto3.getEnumType(C)},{no:2,name:"action_surface",kind:"enum",T:n.proto3.getEnumType(y)},{no:3,name:"identity_override",kind:"message",T:M}]));class b extends n.Message{constructor(e){super(),this.urlPii="",this.orgReferrerPii="",this.httpReferrerPii="",this.previousUrlPii="",this.requestId="",this.visitId="",this.requestSeq=n.protoInt64.zero,this.uxaV=0,this.instanceEventCount=n.protoInt64.zero,this.instanceInitTs=n.protoInt64.zero,this.spaSource="",this.hashFragmentPii="",this.variants="",this.adobeTargetVariants="",this.warpVariants="",this.cmsPageUuid="",this.paramAd="",this.paramCamp="",this.paramFbclid="",this.paramGclid="",this.paramKw="",this.paramMsclkid="",this.paramNet="",this.paramOqa="",this.paramTk="",this.paramTrigger="",this.paramUtmCampaign="",this.paramUtmContent="",this.paramUtmMedium="",this.paramUtmSource="",this.paramUtmTerm="",n.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new b).fromBinary(e,t)}static fromJson(e,t){return(new b).fromJson(e,t)}static fromJsonString(e,t){return(new b).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(b,e,t)}}b.runtime=n.proto3,b.typeName="hql_events.UXACommonFields",b.fields=n.proto3.util.newFieldList((()=>[{no:1,name:"url_pii",kind:"scalar",T:9},{no:2,name:"org_referrer_pii",kind:"scalar",T:9},{no:3,name:"http_referrer_pii",kind:"scalar",T:9},{no:4,name:"previous_url_pii",kind:"scalar",T:9},{no:5,name:"request_id",kind:"scalar",T:9},{no:6,name:"visit_id",kind:"scalar",T:9},{no:7,name:"request_seq",kind:"scalar",T:3},{no:8,name:"uxa_v",kind:"scalar",T:2},{no:30,name:"instance_event_count",kind:"scalar",T:3},{no:31,name:"instance_init_ts",kind:"scalar",T:3},{no:9,name:"spa_source",kind:"scalar",T:9},{no:10,name:"hash_fragment_pii",kind:"scalar",T:9},{no:11,name:"variants",kind:"scalar",T:9},{no:12,name:"adobe_target_variants",kind:"scalar",T:9},{no:13,name:"warp_variants",kind:"scalar",T:9},{no:14,name:"cms_page_uuid",kind:"scalar",T:9},{no:15,name:"param_ad",kind:"scalar",T:9},{no:16,name:"param_camp",kind:"scalar",T:9},{no:17,name:"param_fbclid",kind:"scalar",T:9},{no:18,name:"param_gclid",kind:"scalar",T:9},{no:19,name:"param_kw",kind:"scalar",T:9},{no:20,name:"param_msclkid",kind:"scalar",T:9},{no:21,name:"param_net",kind:"scalar",T:9},{no:22,name:"param_oqa",kind:"scalar",T:9},{no:23,name:"param_tk",kind:"scalar",T:9},{no:24,name:"param_trigger",kind:"scalar",T:9},{no:25,name:"param_utm_campaign",kind:"scalar",T:9},{no:26,name:"param_utm_content",kind:"scalar",T:9},{no:27,name:"param_utm_medium",kind:"scalar",T:9},{no:28,name:"param_utm_source",kind:"scalar",T:9},{no:29,name:"param_utm_term",kind:"scalar",T:9}]));class F extends n.Message{constructor(e){super(),this.timeOnPage=n.protoInt64.zero,this.verticalOffset=n.protoInt64.zero,n.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new F).fromBinary(e,t)}static fromJson(e,t){return(new F).fromJson(e,t)}static fromJsonString(e,t){return(new F).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(F,e,t)}}F.runtime=n.proto3,F.typeName="hql_events.TimeAndLocationFields",F.fields=n.proto3.util.newFieldList((()=>[{no:1,name:"time_on_page",kind:"scalar",T:3},{no:2,name:"vertical_offset",kind:"scalar",T:3}]));class q extends n.Message{constructor(e){super(),this.left=n.protoInt64.zero,this.top=n.protoInt64.zero,n.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new q).fromBinary(e,t)}static fromJson(e,t){return(new q).fromJson(e,t)}static fromJsonString(e,t){return(new q).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(q,e,t)}}q.runtime=n.proto3,q.typeName="hql_events.ElementPositionFields",q.fields=n.proto3.util.newFieldList((()=>[{no:1,name:"left",kind:"scalar",T:3},{no:2,name:"top",kind:"scalar",T:3}]));class G extends n.Message{constructor(e){super(),n.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new G).fromBinary(e,t)}static fromJson(e,t){return(new G).fromJson(e,t)}static fromJsonString(e,t){return(new G).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(G,e,t)}}G.runtime=n.proto3,G.typeName="hql_events.UXAnalyticsShownPage",G.fields=n.proto3.util.newFieldList((()=>[{no:1,name:"hql_metadata",kind:"message",T:B},{no:2,name:"uxa_common_fields",kind:"message",T:b}]));class W extends n.Message{constructor(e){super(),this.linkId="",this.linkRank=n.protoInt64.zero,this.tagName="",this.originHrefPii="",this.destinationUrlPii="",n.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new W).fromBinary(e,t)}static fromJson(e,t){return(new W).fromJson(e,t)}static fromJsonString(e,t){return(new W).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(W,e,t)}}W.runtime=n.proto3,W.typeName="hql_events.UXAnalyticsSelectLink",W.fields=n.proto3.util.newFieldList((()=>[{no:1,name:"hql_metadata",kind:"message",T:B},{no:2,name:"uxa_common_fields",kind:"message",T:b},{no:3,name:"time_and_location_fields",kind:"message",T:F},{no:4,name:"element_position_fields",kind:"message",T:q},{no:5,name:"link_id",kind:"scalar",T:9},{no:6,name:"link_rank",kind:"scalar",T:3},{no:7,name:"tag_name",kind:"scalar",T:9},{no:8,name:"origin_href_pii",kind:"scalar",T:9},{no:9,name:"destination_url_pii",kind:"scalar",T:9}]));class H extends n.Message{constructor(e){super(),n.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new H).fromBinary(e,t)}static fromJson(e,t){return(new H).fromJson(e,t)}static fromJsonString(e,t){return(new H).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(H,e,t)}}H.runtime=n.proto3,H.typeName="hql_events.UXAnalyticsSelectLinkNoSessionStorage",H.fields=n.proto3.util.newFieldList((()=>[{no:1,name:"hql_metadata",kind:"message",T:B},{no:2,name:"uxa_common_fields",kind:"message",T:b},{no:3,name:"time_and_location_fields",kind:"message",T:F}]));class J extends n.Message{constructor(e){super(),this.elementId="",this.elementRank=n.protoInt64.zero,this.tagName="",n.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new J).fromBinary(e,t)}static fromJson(e,t){return(new J).fromJson(e,t)}static fromJsonString(e,t){return(new J).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(J,e,t)}}J.runtime=n.proto3,J.typeName="hql_events.UXAnalyticsSelectElement",J.fields=n.proto3.util.newFieldList((()=>[{no:1,name:"hql_metadata",kind:"message",T:B},{no:2,name:"uxa_common_fields",kind:"message",T:b},{no:3,name:"time_and_location_fields",kind:"message",T:F},{no:4,name:"element_position_fields",kind:"message",T:q},{no:5,name:"element_id",kind:"scalar",T:9},{no:6,name:"element_rank",kind:"scalar",T:3},{no:7,name:"tag_name",kind:"scalar",T:9}]));class V extends n.Message{constructor(e){super(),n.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new V).fromBinary(e,t)}static fromJson(e,t){return(new V).fromJson(e,t)}static fromJsonString(e,t){return(new V).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(V,e,t)}}V.runtime=n.proto3,V.typeName="hql_events.UXAnalyticsDismissPage",V.fields=n.proto3.util.newFieldList((()=>[{no:1,name:"hql_metadata",kind:"message",T:B},{no:2,name:"uxa_common_fields",kind:"message",T:b},{no:3,name:"time_and_location_fields",kind:"message",T:F}]));class X extends n.Message{constructor(e){super(),n.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new X).fromBinary(e,t)}static fromJson(e,t){return(new X).fromJson(e,t)}static fromJsonString(e,t){return(new X).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(X,e,t)}}X.runtime=n.proto3,X.typeName="hql_events.UXAnalyticsHeartbeatPage",X.fields=n.proto3.util.newFieldList((()=>[{no:1,name:"hql_metadata",kind:"message",T:B},{no:2,name:"uxa_common_fields",kind:"message",T:b},{no:3,name:"time_and_location_fields",kind:"message",T:F}]));class Y extends n.Message{constructor(e){super(),this.modal="",n.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new Y).fromBinary(e,t)}static fromJson(e,t){return(new Y).fromJson(e,t)}static fromJsonString(e,t){return(new Y).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(Y,e,t)}}Y.runtime=n.proto3,Y.typeName="hql_events.UXAnalyticsShownModal",Y.fields=n.proto3.util.newFieldList((()=>[{no:1,name:"hql_metadata",kind:"message",T:B},{no:2,name:"uxa_common_fields",kind:"message",T:b},{no:3,name:"time_and_location_fields",kind:"message",T:F},{no:4,name:"modal",kind:"scalar",T:9}]));class z extends n.Message{constructor(e){super(),this.modal="",n.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new z).fromBinary(e,t)}static fromJson(e,t){return(new z).fromJson(e,t)}static fromJsonString(e,t){return(new z).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(z,e,t)}}z.runtime=n.proto3,z.typeName="hql_events.UXAnalyticsDismissModal",z.fields=n.proto3.util.newFieldList((()=>[{no:1,name:"hql_metadata",kind:"message",T:B},{no:2,name:"uxa_common_fields",kind:"message",T:b},{no:3,name:"time_and_location_fields",kind:"message",T:F},{no:4,name:"modal",kind:"scalar",T:9}]));class j extends n.Message{constructor(e){super(),n.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new j).fromBinary(e,t)}static fromJson(e,t){return(new j).fromJson(e,t)}static fromJsonString(e,t){return(new j).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(j,e,t)}}j.runtime=n.proto3,j.typeName="hql_events.UXAnalyticsScrollPage",j.fields=n.proto3.util.newFieldList((()=>[{no:1,name:"hql_metadata",kind:"message",T:B},{no:2,name:"uxa_common_fields",kind:"message",T:b},{no:3,name:"time_and_location_fields",kind:"message",T:F}]));class K{constructor(e){this.metricsReporter=e}logEventCount(e,t,n,a=1){const i={};for(const e in n)n.hasOwnProperty(e)&&(i[e]=n[e]);this.metricsReporter.createStats({ns:e,name:t},i).record(a)}}let $;const Q={heartbeat:"heartbeat",linkClick:"link_click",elementClick:"element_click",linkNoSessionStorage:"link_no_session_storage",modalClose:"modal_close",modalOpen:"modal_open",pageView:"page_view",pageFreeze:"page_freeze",pageResume:"page_resume",scroll:"scroll_event",finalHeartbeat:"final_heartbeat",spaPageView:"spa_page_view",delayedPageViewWithLateMetaTag:"delayed_page_view_with_late_meta_tag",privacyConsentIframeLoaded:"privacy_consent_iframe_loaded",privacyConsentScriptLoaded:"privacy_consent_script_loaded",privacyConsentScriptLoadError:"privacy_consent_script_load_error",marketingTrackerReadyForUxa:"marketing_tracker_ready_for_uxa",mouseupElementClick:"mouseup_element_click",dialogOpen:"dialog_open",dialogClose:"dialog_close",documentOpen:"document_open",documentClose:"document_close",conversionDataReady:"conversionDataReady",legacy_hs_analytics_event:"legacy_hs_analytics_event",elementShown:"element_shown",elementHide:"element_hide",formFieldchange:"form_field_change"},Z=["gclid","oqa","trigger","msclkid","_tk","_camp","_ad","_net","_kw","utm_campaign","utm_content","utm_medium","utm_source","utm_term","fbclid","tfo","desktop_logging_id"],ee=void 0!==self&&self?self:window;ee._DBX_UXA_GLOBAL=ee._DBX_UXA_GLOBAL||{};const te=ee._DBX_UXA_GLOBAL,ne="undefined"!=typeof self&&self?self:window;function ae(){if(!ne._DBX_UXA_isUxaListening)return;const e=ne._DBX_UXA_bufferedClosures=ne._DBX_UXA_bufferedClosures||[],t=[...e];e.length=0;for(const e of t)e()}var ie;!function(e){e.BASE="BASE",e.TOP_FRAME="TOP_FRAME",e.CLIENT="CLIENT",e.NEED_TO_DEFINE="NEED_TO_DEFINE"}(ie||(ie={}));const oe=()=>{if(void 0===te.marketingTrackerLoggingQueue||void 0===te.logToMarketingTracker)return;let e;for(;(e=te.marketingTrackerLoggingQueue.shift())&&void 0!==e;)te.logToMarketingTracker(e)},re=C,se=y;var le;!function(e){e.SUGGESTION_ACCEPTED="suggest_invite_modal_accepted",e.SUGGESTION_DISMISSED="suggest_invite_modal_dismissed",e.SUGGESTION_MODAL_OPENED="suggest_invite_modal_opened"}(le||(le={}));const ce={modal_open:["modal"],modal_close:["modal"],link_click:["link_id"],link_no_session_storage:["link_id"],element_click:["element_id"],page_view:["page"]},me=e=>e.replace(/_([a-z])/g,(e=>e[1].toUpperCase())),_e={log(e,t,o,s,l){const c=[["AMP",()=>{if(s&&s.includes(e)){const n={};if(t&&e in ce){ce[e].forEach((e=>{e in t&&t[e]&&(n[e]=String(t[e]))}))}($||($=new K(i.getMetricsReporter$1())),$).logEventCount("uxa_events",e,n)}}],["UXA-Backend",()=>{const n={url:"/log/ux_analytics",data:{event_type:e,extra_params:JSON.stringify(t)}};o?a.SilentBackgroundBeaconRequest(n):a.SilentBackgroundRequest(n)}],["HQL",()=>{if(!t)return;const a=(e=>{const t=["requestSeq","instanceEventCount","instanceInitTs","timeOnPage","verticalOffset","left","top","linkRank","elementRank"],a=["url","org_referrer","http_referrer","previous_url","hash_fragment","origin_href","destination_url"],i={};for(const o of Object.keys(e)){let r=me(o),s=e[o];s=null===s?void 0:s,a.includes(o)&&(r+="_pii"),t.includes(r)&&(s=n.protoInt64.parse(Math.round(s))),i[me(r)]=s}return i})(t);switch(e){case Q.pageView:new G({uxaCommonFields:new b(a),hqlMetadata:new B({appSurface:re.WEB,actionSurface:se.BROWSER_WINDOW})});break;case Q.linkClick:new W(Object.assign({uxaCommonFields:new b(a),hqlMetadata:new B({appSurface:re.WEB,actionSurface:se.BROWSER_WINDOW}),timeAndLocationFields:new F(a),elementPositionFields:new q(a)},a));break;case Q.linkNoSessionStorage:new H({uxaCommonFields:new b(a),hqlMetadata:new B({appSurface:re.WEB,actionSurface:se.BROWSER_WINDOW}),timeAndLocationFields:new F(a)});break;case Q.elementClick:new J(Object.assign({uxaCommonFields:new b(a),hqlMetadata:new B({appSurface:re.WEB,actionSurface:se.BROWSER_WINDOW}),timeAndLocationFields:new F(a),elementPositionFields:new q(a)},a));break;case Q.finalHeartbeat:new V({uxaCommonFields:new b(a),hqlMetadata:new B({appSurface:re.WEB,actionSurface:se.BROWSER_WINDOW}),timeAndLocationFields:new F(a)});break;case Q.heartbeat:new X({uxaCommonFields:new b(a),hqlMetadata:new B({appSurface:re.WEB,actionSurface:se.BROWSER_WINDOW}),timeAndLocationFields:new F(a)});break;case Q.modalOpen:new Y(Object.assign({uxaCommonFields:new b(a),hqlMetadata:new B({appSurface:re.WEB,actionSurface:se.BROWSER_WINDOW}),timeAndLocationFields:new F(a)},a));break;case Q.modalClose:new z(Object.assign({uxaCommonFields:new b(a),hqlMetadata:new B({appSurface:re.WEB,actionSurface:se.BROWSER_WINDOW}),timeAndLocationFields:new F(a)},a));break;case Q.scroll:new j(Object.assign({uxaCommonFields:new b(a),hqlMetadata:new B({appSurface:re.WEB,actionSurface:se.BROWSER_WINDOW}),timeAndLocationFields:new F(a)},a))}}],["marketing-tracker",oe]];for(const[n,a]of c)try{a()}catch(a){r.reportException(Object.assign({err:a,severity:r.SEVERITY.NONCRITICAL,tags:["ux_analytics",n]},{exc_extra:{extra_params:t,event_type:e}}))}}};var ue,de;function Ee(){try{return window.self!==window.top}catch(e){return!0}}!function(e){e.BUY_TRY_PAGE_CHECKOUT="buy_try_page_checkout",e.INFO_FORM_FILLED="info_form_filled",e.PAYMENT_FORM_FILLED="payment_form_filled",e.BUY_TRY_PAGE_CHECKOUT_CRASH="buy_try_page_checkout_crash",e.PORTABLE_CHECKOUT_IFRAME_INITIALIZED="portable_checkout_iframe_initialized"}(ue||(ue={})),function(e){e.PRO="pro",e.PLUS="plus",e.BUY_TOP="buy_top",e.BUY_BOTTOM="buy_bottom",e.BUSINESS="business",e.PRO_TRY="pro_try",e.BUY_PLUS="buy_plus",e.BUY_MOBILE="buy_mobile"}(de||(de={}));const ge=()=>location.hostname.split(".").slice(-2).join("."),pe=()=>"dropbox.com"===ge(),he=()=>!!pe()||("docsend.com"===ge()||("dash.ai"===ge()||("dropboxforum.com"===ge()||"webflow.io"===ge()))),fe="dbx_js_analytics_id",Te={uxaIsEssential:he,analyticsTrackingIsAllowed:()=>{if(he())return!0;return(()=>{var e,t;const n=null===(t=null===(e=window.dropbox)||void 0===e?void 0:e.privacyConsent)||void 0===t?void 0:t.getConsentCategories();if(void 0===n)return{analyticsAllowed:!1,generalMarketingAndAdvertisingAllowed:!1,performanceAndFunctionalityAllowed:!1,socialMediaAdvertisingAllowed:!1};const{analytics:a,"general marketing and advertising":i,"performance and functionality":o,"social media advertising":r}=n;return{analyticsAllowed:a,generalMarketingAndAdvertisingAllowed:i,performanceAndFunctionalityAllowed:o,socialMediaAdvertisingAllowed:r}})().analyticsAllowed},mockableGetDate:()=>new Date},Ne=()=>{var e;const t=null===(e=null===document||void 0===document?void 0:document.cookie)||void 0===e?void 0:e.split("; ").find((e=>e.startsWith(fe+"=")));return t?t.split("=")[1]:null},Ae=e=>`${fe}=${e}; domain=.${ge()}; expires=${(()=>{const e=Te.mockableGetDate(),t=e.getTime()+15768e7;return e.setTime(t),e.toUTCString()})()}; Secure`;function Se(e,t){window.dispatchEvent(function(e,t={detail:null}){if("function"==typeof CustomEvent)return new CustomEvent(e,t);const n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!0,!0,t.detail),n}(e,t))}const Ie=",";let Oe=0;const ve=(e=!1)=>{const t=(e,t)=>{const n=[],a=document.head.querySelectorAll(`meta[${e}]`);return a?(Array.prototype.forEach.call(a,(a=>{try{const i=a.getAttribute(e);if(!i)return;t?n.push(...JSON.parse(i)):n.push(i)}catch(e){}})),n):[]};if(e&&Oe>1||!e&&Oe)return;Oe++,(()=>{const e=null===(t=document.head.getElementsByTagName("meta").namedItem("dbx:ux-variant-token"))||void 0===t?void 0:t.content;var t;if(!e)return;const n=ye(e,"matchers"),a=[];for(const[e,t]of n){const n={feature_name:e,event_name:JSON.parse(t).event_name};a.push(n)}ke({variant_tokens:e,matchers:a})})();const n=t("data-uxa-matcher-configs",!0),a=t("data-uxa-variant-tokens",!1);if(!n.length||!a.length)return;ke({variant_tokens:a.join(Ie),matchers:n})},Re=(e,t)=>{let n;n=e.startsWith("adobetarget")?"adobe_target_variants":"variants",t[n]?t[n]+=Ie+e:t[n]=e};function Ce(e){const t=(e,t)=>void 0===e||((e,t)=>{if(void 0===e)return!0;const n=e;for(const e in n)if(String(t[e])!==String(n[e]))return!1;return!0})(e.extra,t.extra);if("undefined"==typeof self||!self)return;let n;ve();const a=self._DBX_UX_variants_configStore,i={};if(e&&a&&a.matchers&&e.eventName&&(n=a.matchers[e.eventName]))for(const o in n){if(!a.assignments||!n.hasOwnProperty(o))continue;const r=n[o],s=a.assignments[r.feature_name];s&&(void 0===i[s.variantToken]&&t(r.like,e)&&(e.extra||(e.extra={}),Re(s.variantToken,e.extra),i[s.variantToken]=!0))}}const ye=(e,t)=>{const n=((e,t)=>{const n=e=>decodeURIComponent(escape(e)),[a,i,o]=e.split(".").map((e=>atob(e.split("_").join("/").split("-").join("+"))));if(!o)return;if("JWT"!==JSON.parse(n(a)).typ)return;const r=JSON.parse(n(i)),s=r[t];return"https://dropbox.com/ux_analytics"===r.iss?s:void 0})(e,t),a=[];for(const e of n.split(Ie)){const t=e.split(":");2===t.length&&a.push(t.map(decodeURIComponent))}return a},Pe=e=>e.startsWith("adobetarget:")?(e=>{const t=e.split(Ie),n=[];for(const e of t)try{const[t,a,i]=e.split(":");n.push([t+":"+decodeURIComponent(a),decodeURIComponent(i)])}catch(e){continue}return n})(e):ye(e,"variants");function ke(e){if(!e)return;self._DBX_UX_variants_configStore=self._DBX_UX_variants_configStore||{};const t=self._DBX_UX_variants_configStore,{variant_tokens:n,matchers:a}=e;if(n)for(const e of n.split(Ie)){const n=Pe(e);if(n)for(const[a,i]of n)t.assignments=t.assignments||{},t.assignments[a]={variant:i,variantToken:e}}if(a)for(const e of a){t.matchers=t.matchers||{};const n=e.event_name;t.matchers[n]=t.matchers[n]||{};const a={feature_name:e.feature_name,event_name:n,is_pre_tti:e.is_pre_tti,like:e.like},i=JSON.stringify(a);t.matchers[n][i]=a}}const we="SPAHistoryStateChange",Le=e=>{const t={detail:{eventSource:e}};var n;n=()=>{Se(we,t)},(ne._DBX_UXA_bufferedClosures=ne._DBX_UXA_bufferedClosures||[]).push(n),ae()},Me=history.pushState,Ue=history.replaceState,De=e=>{Le("popState")},xe={oldReplaceState:Ue,oldPushState:Me,resetHistoryListenersInstalled:()=>{self._DBX_UXA_historyListenersInstalled=!1},getHistoryListenersInstalled:()=>self._DBX_UXA_historyListenersInstalled,installPushStateMonkeyPatch:()=>{Object.defineProperty(history,"pushState",{value:(e,t,n)=>{const a=location.pathname+location.hash;xe.oldPushState.call(history,e,t,n);a!==location.pathname+location.hash&&Le("pushState")},writable:!0})},installReplaceStateMonkeyPatch:()=>{Object.defineProperty(history,"replaceState",{value:(e,t,n)=>{const a=location.pathname+location.hash;xe.oldReplaceState.call(history,e,t,n);a!==location.pathname+location.hash&&Le("replaceState")},writable:!0})}},Be="data-uxa-log",be="data-uxa-interactions",Fe="[data-uxa-interactions]",qe="element_interaction_event";var Ge,We;function He(e=document.body,t=Fe){const n=new Set;let a=null,i=r();const o=new MutationObserver((function(){if(null!==a)return;a=requestAnimationFrame((()=>{const e=r(),t=c(e,i);l(c(i,e)),function(e){n.forEach((t=>{t.addElements(e)}))}(t),i=e,a=null}))}));function r(){return Array.from(e.querySelectorAll(t)).filter((e=>e instanceof HTMLElement)).map((e=>e)).filter((e=>s(e)))}function s(e){var t;if(!e.hasAttribute(Be))return!1;const n=null===(t=e.getAttribute(be))||void 0===t?void 0:t.trim().split(/\s+/);return!!(null==n?void 0:n.includes("shown"))}function l(e){n.forEach((t=>{t.removeElements(e)}))}function c(e,t){return e.filter((e=>t.indexOf(e)<0))}function m(){o.observe(e,{childList:!0,subtree:!0})}return m(),{registerElementMutationListener:function(e){n.has(e)||(e.addElements(i),n.add(e))},unregisterElementMutationListener:function(e){n.has(e)&&(e.removeElements(i),n.delete(e))},purgeEventListeners:function(){l(i),n.clear()},pause:function(){o.disconnect()},resume:m,getElementsLength:function(){return i.length},testOnlyObserver:o,testOnlyIsEligibleForTracking:s,testOnlyDiffElements:c,testOnlyGetAnimationFrameRequest:function(){return a}}}function Je(e=.5){const t=new Map,n=new IntersectionObserver((function(t){t.forEach((t=>{const n=t.target;t.intersectionRatio>=e&&a(n,We.VIEWING),t.intersectionRatio<e&&a(n,We.VIEWED)}))}),{threshold:e});function a(e,n){const a=e.getAttribute(Be),i=t.get(a);if(i)switch(n){case We.VIEWING:i.status===We.VIEWED&&(i.status=We.VIEWING,i.lastViewStarted=performance.now(),Se(qe,{detail:{eventType:Ge.ELEMENT_SHOWN,extra:{element_id:a}}}));break;case We.VIEWED:if(i.status===We.VIEWING){const n=Math.round(performance.now()-i.lastViewStarted);window.requestAnimationFrame((()=>{var o;const r=e.getAttribute(Be),s=null===(o=t.get(r))||void 0===o?void 0:o.element;i.status!==We.VIEWING||null!==s&&s!==e||(i.status=We.VIEWED,Se(qe,{detail:{eventType:Ge.ELEMENT_HIDE,extra:{element_id:a,element_shown_duration_ms:n}}}))}))}}}return{addElements:function(e){e.forEach((e=>function(e){const a=e.getAttribute(Be),i=t.get(a);i?i.element=e:t.set(a,{status:We.VIEWED,element:e,lastViewStarted:0});n.observe(e)}(e)))},removeElements:function(e){e.forEach((e=>function(e){const i=e.getAttribute(Be),o=t.get(i);o&&(o.element=null,a(e,We.VIEWED),n.unobserve(e))}(e)))},pause:function(){n.disconnect()},resume:function(){for(const[e,a]of t)(null==a?void 0:a.element)&&n.observe(a.element)},testOnlyTryUpdateElementStatus:a,testOnlyGetElementStatus:function(e){const n=t.get(e);return n?[n.element,n.status]:[null,null]}}}!function(e){e.ELEMENT_HIDE="elementHide",e.ELEMENT_SHOWN="elementShown"}(Ge||(Ge={})),function(e){e.VIEWING="VIEWING",e.VIEWED="VIEWED"}(We||(We={}));const Ve="clicked_link",Xe="tracking_params",Ye="visit_id",ze="previous_url",je="last_active_time",Ke="event_log",$e="event_log_timestamp",Qe={inAnIFrame:Ee},Ze=new Set([Ke,$e,Ye]),et=(()=>{let e=null;const t="uxa.onedoesnotsimplyusesessionstorage";try{e=window.sessionStorage,e&&(e.setItem(t,t),e.removeItem(t))}catch(t){e=null}return e})(),tt=(()=>{let e=null;const t=window;return e=t.hasOwnProperty("JSON")?t.JSON:null,e})();var nt;!function(e){function t(e){return Qe.inAnIFrame()&&!Ze.has(e)?`uxa.inaniframe.${e}`:`uxa.${e}`}const n=et,a=tt;function i(e){return n?(n.removeItem(t(e)),null):null}e.isEnabled=function(){return!!n},e.get=function(e){if(!n||!a)return null;try{const i=n.getItem(t(e));return null===i?null:a.parse(i)}catch(e){return null}},e.set=function(e,o){if(!n||!a)return null;try{return null===o?i(e):(n.setItem(t(e),a.stringify(o)),null)}catch(e){return null}},e.remove=i,e.clear=function(){return n?(n.clear(),null):null}}(nt||(nt={}));var at;function it(){return(new Date).getTime()}!function(e){e.Normal="normal",e.DbHistory="db_history",e.SpaNormal="spa_normal",e.SpaNormalOnDbHistoryPage="spa_normal_on_db_history_page"}(at||(at={}));const ot=e=>{const t=e.getAttribute("data-uxa-log"),n=e.tagName.toLowerCase(),a=e.getAttribute("data-uxa-entity-id"),i=e.getAttribute("data-uxa-trace-id"),o=(e=>{const t=e.nodeName.toLowerCase(),n=e.getAttribute("data-uxa-log"),a=document.querySelectorAll(`${t}[data-uxa-log="${n}"]`);if(1===a.length)return 1;for(let t=0;t<a.length;t++)if(a[t]===e)return t+1;return-1})(e);return{element_id:t,tag_name:n,entity_id:a,trace_id:i,element_rank:o}};const rt={idGeneratingNow:it,inAnIFrame:Ee,getCurrentURI:function(e=window){return e.location.href},getEventGuid:function(){return a.UUID.v4()},isDropboxDomain:pe,getVerticalOffset:function(){const e=document.documentElement;return(window.pageYOffset||e.scrollTop)-(e.clientTop||0)},getScrollPercent:function(){const e=document.documentElement,t=document.body,n="scrollTop",a="scrollHeight",i=(e[n]||t[n])/((e[a]||t[a])-e.clientHeight)*100;return Math.round(i)},uxaIsEssential:he,isFileProtocol:function(){return"file:"===window.location.protocol}},st=e=>{var t;const n=`data-uxa-${e}`,a=null===(t=document.querySelector(`meta[${n}]`))||void 0===t?void 0:t.getAttribute(n);return a||null};function lt(){const e={},t=function(e=window){return e.location.search}();if(t.length){const n=t.substring(1).replace(/&amp;/g,"&").split("&");for(const t of n){let[n,a]=t.split("=");n&&a&&(n=n.trim(),a=a.trim(),n.length&&a.length&&(e[n]=decodeURIComponent(a.replace(/\+/g," "))))}}return e}function ct(e,t){var n;const a=null===(n=e.getAttribute("data-uxa-interactions"))||void 0===n?void 0:n.trim().split(/\s+/);return t.every((e=>null==a?void 0:a.includes(e)))}function mt(e){return e&&e.hasAttribute("data-uxa-log")&&(!e.hasAttribute("data-uxa-interactions")||ct(e,["click"]))}function _t(e){return e&&"A"===e.nodeName}function ut(e){return e&&e.getAttribute("data-trackingid")}function dt(e){return e&&"BODY"===e.nodeName}function Et(){return Math.random().toString().slice(2)}const gt=new Set(Object.keys(Q).map((e=>Q[e]))),pt=/\/account|\/share|\/buy|\/pro\/try/;const ht=["element_id","link_id","uxa_v","instance_event_count","instance_init_ts","event_ts","client_event_id","uxa_debug_version"];function ft(e,t){return t[e]?(t[e]+"_"+e).toLowerCase().replace(/[^a-z0-9$\[\].]+/g,"_"):e}class Tt{static initialize(e,t,n=null,a=!0){if(null===Tt.singleton)Tt.singleton=new Tt(e,t,a);else if(n){[["requestId",t.requestId,Tt.singleton.requestId],["orgReferrer",t.orgReferrer,Tt.singleton.orgReferrer],["httpReferrer",t.httpReferrer,Tt.singleton.httpReferrer],["configs.delayed_link_click_logging",t.delayed_link_click_logging,Tt.singleton.delayedLinkClickLogging],["configs.event_names",t.event_names,Tt.singleton.event_names],["configs.modal_class",t.modal_class,Tt.singleton.modalClass],["configs.shouldBeSentToMarketingTrackerVariables",t.shouldBeSentToMarketingTrackerVariables,Tt.singleton.shouldBeSentToMarketingTrackerVariables],["configs.isInternalIp",t.isInternalIp,Tt.singleton.isInternalIp],["configs.isUserDropboxAdmin",t.isUserDropboxAdmin,Tt.singleton.isUserDropboxAdmin],["configs.expEventsToExpIdMap",t.expEventsToExpIdMap,Tt.singleton.expEventsToExpIdMap],["configs.expDataFieldsToExpIdMap",t.expDataFieldsToExpIdMap,Tt.singleton.expDataFieldsToExpIdMap]].forEach((([e,t,a])=>{void 0!==t&&JSON.stringify(t)!==JSON.stringify(a)&&n(new Error(`UX Analytics initialize overload attempt; ${e} '${t}' !== '${a}'`))}))}return Tt.singleton}constructor(e,t,n=!0){var a,i,o;if(this.currentModalId=null,this.lastScrollOffset=0,this.scrollTimer=null,this.trackingParams=null,this.updateExternalIds=()=>{rt.isDropboxDomain()||(this.externalTeamId=st("external-team-id"),this.externalUserId=st("external-user-id"))},this.startHeartbeat=()=>{for(const e of[2,5,10,15,30])setTimeout(this.logOnPage.bind(this,Q.heartbeat),1e3*e);for(const e of[1,2,4,9])setTimeout(this.logOnPage.bind(this,Q.heartbeat),60*e*1e3)},this.delayedInit=()=>{this.saveTrackingParams(),this.setupListeners(),this.logPageView(),this.logDelayedClickEvent(),function(){const e=He(),t=Je();e.registerElementMutationListener(t)}()},this.getListeners=()=>[[window,"scroll",this.handleScroll],[window,"pageshow",this.handlePageShow],[window,"pagehide",this.handlePageClose],[document.body,"mousedown",this.handleMousedown],[document.body,"mouseup",this.handleMouseup],[document.body,"keydown",this.handleKeyboardEnter],[document,"modalOpened",this.trackModalShow],[document,"modalClosed",this.trackModalHide],[document,"freeze",this.handlePageFreeze],[document,"resume",this.handlePageResume],[document,"change",this.handleFormFieldChange],[document,"viewUpdate",e=>this.logViewUpdate(e)],[window,we,this.handleHistoryStateChange],[window,"delayed_page_view_with_late_meta_tag",this.handleDelayedPageViewEventWithLateMetaTags],[window,"privacy_consent_custom_event",this.handlePrivacyConsentCustomEvent],[window,"marketing_tracker_ready_for_uxa",this.handleMarketTrackerReadyEvent],[document,"dialog_custom_event",this.handleDialogCustomEvent],[document,"document_custom_event",this.handleDocumentCustomEvent],[window,qe,this.handleInteractionCustomEvent]],this.trackScrolling=()=>{this.scrollTimer&&clearTimeout(this.scrollTimer),this.scrollTimer=setTimeout(this.onScroll,500)},this.handleScroll=function(e,t,n={}){let a=null,i=0;return function(){const o=it();i||!1!==n.leading||(i=o);const r=t-(o.valueOf()-i.valueOf());let s=arguments;if(r<=0||r>t)a&&(clearTimeout(a),a=null),i=o,e.apply(null,s),s=null;else if(!a&&!1!==n.trailing){const t=()=>{i=!1===n.leading?0:it(),a=null,e.apply(null,s),s=null};a=setTimeout(t,r)}}}(this.trackScrolling,2e3,{leading:!0}),this.onScroll=()=>{const e=rt.getVerticalOffset();this.lastScrollOffset!==e&&(this.lastScrollOffset=e,this.logOnPage(Q.scroll,{vertical_offset:e,scroll_percent:rt.getScrollPercent()}))},this.handleFormFieldChange=e=>{const t=e.target;if(!ct(t,["change"]))return;const n=t.type.toLowerCase(),a=Object.assign(Object.assign({},ot(t)),{input_type:n});"checkbox"!==n&&"radio"!==n||(a.input_checked=t.checked);const i=this.createEvent(Q.formFieldchange,a);this.logEvent(i)},this.handlePageShow=e=>{if(this.navigationType=(()=>{var e;const t=null===(e=performance.getEntriesByType("navigation"))||void 0===e?void 0:e[0];return null==t?void 0:t.type})(),this.bfcacheEligible=e.persisted,e.persisted){if(this.cleanSessionStorage(),!rt.inAnIFrame()){const e=nt.get(ze);nt.set(ze,rt.getCurrentURI()),this.previousUrl=e}this.visitId=nt.get(Ye),setTimeout(this.delayedInit,200)}},this.handlePageClose=e=>{const t={};t.vertical_offset=t.vertical_offset||rt.getVerticalOffset(),t.time_on_page=t.time_on_page||this.getTimeOnPage(),t.time_on_page_ms=t.time_on_page_ms||this.getTimeOnPageMs(),this.logEvent(this.createEvent(Q.finalHeartbeat,t))},this.handleElementClick=(e,t,n)=>{const a=function(e){let t=e;for(let e=0;e<6&&!mt(t)&&!dt(t);e++){const e=t.parentNode;if(!(e instanceof HTMLElement))break;t=e}return t}(e.target);if(!mt(a))return;const i=a.getBoundingClientRect(),o=this.createEvent(t,Object.assign(Object.assign({},ot(a)),{left:Math.round(i.left),time_on_page:this.getTimeOnPage(),time_on_page_ms:this.getTimeOnPageMs(),top:Math.round(i.top),vertical_offset:rt.getVerticalOffset(),click_source:n}));if("offsetX"in e&&"offsetY"in e){const t=e,n=e.target;o.extra.position_pct_X=Math.round(t.offsetX/n.offsetWidth*100),o.extra.position_pct_Y=Math.round(t.offsetY/n.offsetHeight*100)}this.logEvent(o)},this.handleLinkClick=e=>{const t=function(e){let t=e;for(let e=0;e<6&&!_t(t)&&!ut(t)&&!dt(t);e++){const e=t.parentNode;if(!(e instanceof HTMLElement))break;t=e}return t}(e.target);if(!_t(t)&&!ut(t))return;const n=t.getBoundingClientRect(),a=this.createEvent(Q.linkClick,{left:Math.round(n.left),link_id:t.getAttribute("data-trackingid"),link_rank:this.getLinkRank(t),origin_href:t.getAttribute("href"),time_on_page:this.getTimeOnPage(),time_on_page_ms:this.getTimeOnPageMs(),top:Math.round(n.top),vertical_offset:rt.getVerticalOffset(),tag_name:t.tagName.toLowerCase()});this.delayedLinkClickLogging&&_t(t)?this.storeDelayedLinkClick(a):this.logEvent(a)},this.handleHistoryStateChange=e=>{if(!rt.inAnIFrame()){const e=nt.get(ze);nt.set(ze,rt.getCurrentURI()),this.previousUrl=e}++this.requestSeq;const t=rt.getCurrentURI(),n=(a=t,pt.test(a)?at.SpaNormalOnDbHistoryPage:at.SpaNormal);var a;this.logPageView(n,e.detail.eventSource)},this.handleDelayedPageViewEventWithLateMetaTags=e=>{ve(!0),this.updateExternalIds(),this.logEvent(this.createEvent(Q.delayedPageViewWithLateMetaTag))},this.handlePrivacyConsentCustomEvent=e=>{this.logEvent(this.createEvent(Q[e.detail.eventType],e.detail.extra))},this.handleDialogCustomEvent=e=>{this.logEvent(this.createEvent(Q[e.detail.eventType],e.detail.extra))},this.handleDocumentCustomEvent=e=>{this.logEvent(this.createEvent(Q[e.detail.eventType],e.detail.extra))},this.handleMousedown=e=>{this.handleLinkClick(e),this.handleElementClick(e,Q.elementClick,"click")},this.handleMouseup=e=>{},this.handleKeyboardEnter=e=>{13===e.keyCode&&(this.handleLinkClick(e),this.handleElementClick(e,Q.elementClick,"enter"))},this.handleMarketTrackerReadyEvent=e=>{this.logEvent(this.createEvent(Q[e.detail.eventType],e.detail.extra))},this.handlePageFreeze=()=>{this.logEvent(this.createEvent(Q.pageFreeze))},this.handlePageResume=()=>{this.logEvent(this.createEvent(Q.pageResume))},this.handleInteractionCustomEvent=e=>{this.logEvent(this.createEvent(Q[e.detail.eventType],e.detail.extra))},this._modalIdSanitizer=e=>{const t="db-modal-custom-";if("upsell-home-modal"===e.id){const n=Array.from(e.classList).find((e=>e.indexOf(t)>-1));if(n)return n.replace(t,"")}return e.id},this.trackModalShow=()=>{const e=document.querySelectorAll(this.modalClass),t=Array.from(e).find((e=>"none"!==window.getComputedStyle(e).display||e.classList.contains("clean-react-modal")||e.classList.contains("uxa-modal-tracking-span")));t&&(this.currentModalId=this._modalIdSanitizer(t)||"n/a -- file bug to cgi-team",this.logModal(Q.modalOpen,this.currentModalId))},this.trackModalHide=()=>{this.currentModalId&&(this.logModal(Q.modalClose,this.currentModalId),this.currentModalId=null)},"PITHOS"!==t.inclusionMethod&&!rt.isDropboxDomain())throw new Error(`UXAnalytics.log: trying to log at non-entitled site (${location.hostname})`);if(self._DBX_UXA_historyListenersInstalled||(xe.installPushStateMonkeyPatch(),xe.installReplaceStateMonkeyPatch(),window.addEventListener("popstate",De),self._DBX_UXA_historyListenersInstalled=!0),this.cleanSessionStorage(),!rt.inAnIFrame()){const e=nt.get(ze)||t.previousUrl;nt.set(ze,rt.getCurrentURI()),this.previousUrl=e}this.instance_event_count=0,this.instance_init_ts=rt.idGeneratingNow(),this.requestId=t.requestId,this.orgReferrer=t.orgReferrer,this.httpReferrer=t.httpReferrer,this.visitId=nt.get(Ye),this.requestSeq=0,this.event_names=t.event_names,this.logger=e,this.cmsPageUuid=document.body.getAttribute("data-article-uuid"),this.bfcacheEligible=!1,void 0!==t.delayed_link_click_logging?this.delayedLinkClickLogging=t.delayed_link_click_logging:this.delayedLinkClickLogging=!0,void 0!==t.modal_class?this.modalClass=t.modal_class:this.modalClass=".uxa-modal",void 0!==t.shouldBeSentToMarketingTrackerVariables?this.shouldBeSentToMarketingTrackerVariables=t.shouldBeSentToMarketingTrackerVariables:this.shouldBeSentToMarketingTrackerVariables=ht,this.isInternalIp=!!t.isInternalIp,this.isUserDropboxAdmin=!!t.isUserDropboxAdmin,this.expEventsToExpIdMap=null!==(a=t.expEventsToExpIdMap)&&void 0!==a?a:{},this.expDataFieldsToExpIdMap=null!==(i=t.expDataFieldsToExpIdMap)&&void 0!==i?i:{},this.inclusionMethod=null!==(o=t.inclusionMethod)&&void 0!==o?o:"need_to_define",this.configTime=Number(t.configTime)||0,this.analyticsId=t.analyticsId,this.updateExternalIds(),this.initTime=it(),this.startHeartbeat(),this.appName=st("app-name")||"",this.appPath=st("app-path")||"",this.appIsEntitled=(t.entitledApps||[]).includes(this.appName),n?setTimeout(this.delayedInit,200):this.delayedInit()}canUseDevTools(){return(this.isInternalIp||this.isUserDropboxAdmin)&&"PITHOS"!==this.inclusionMethod}setupListeners(){this.getListeners().forEach((([e,t,n])=>{e.addEventListener(t,n)})),ne._DBX_UXA_isUxaListening=!0,ae()}cleanupListeners(){this.getListeners().forEach((([e,t,n])=>{e.removeEventListener(t,n)}))}cleanSessionStorage(){const e=it(),t=nt.get(Ye),n=nt.get(je);null===t?nt.set(Ye,Et()):null!==n&&e-n>=18e5&&(nt.remove(ze),nt.set(Ye,Et())),nt.set(je,e)}logPageView(e=at.Normal,t){const n={page_view_latency:-100,bfcache_eligible:this.bfcacheEligible,navigation_type:this.navigationType,page_view_origin:e};if(t&&(n.spa_source=t),this.configTime>0){const e=Math.round((this.instance_init_ts-this.configTime)/1e3);n.page_view_latency=e<=10?e:11,this.configTime=-1}else 0===this.configTime&&(n.page_view_latency=-10,this.configTime=-1);this.logEvent(this.createEvent(Q.pageView,n))}logModal(e,t){const n={modal:t};this.logOnPage(e,n,!0)}logViewUpdate(e){const{viewId:t,viewStep:n}=e.detail,a={view:t,view_step:n};this.logOnPage("view_update",a,!0)}logDelayedClickEvent(){if(!nt.isEnabled())return null;const e=nt.get(Ve);if(e)try{e.destination_url=rt.getCurrentURI();const t={eventName:Q.linkClick,extra:e};this.logEvent(t),nt.remove(Ve)}catch(e){}return null}logOnPage(e,t={},n=!1){const a=this.getTimeOnPage(),i=this.getTimeOnPageMs();t.vertical_offset=t.vertical_offset||rt.getVerticalOffset(),t.time_on_page=t.time_on_page||a,t.time_on_page_ms=t.time_on_page_ms||i,(a<600||n)&&this.logEvent(this.createEvent(e,t))}logEvent(t){var a;return n.__awaiter(this,void 0,void 0,(function*(){try{if(!(e=>gt.has(e))(t.eventName))throw new Error(`UXAnalytics.log: trying to log an invalid event (${t.eventName})`);Ce(t);const n=rt.idGeneratingNow();"loading"===document.readyState&&(yield new Promise((function(e){if("interactive"===document.readyState||"complete"===document.readyState)e();else{function t(){document.removeEventListener("DOMContentLoaded",t),e()}document.addEventListener("DOMContentLoaded",t)}}))),t.extra.instance_event_count=++this.instance_event_count,t.extra.instance_init_ts=this.instance_init_ts,t.extra.event_ts=n,t.extra.client_event_id=rt.getEventGuid(),this.getWARPInfo()&&(t.extra.warp_variants=this.getWARPInfo());let i={};i=function(e,t,n){const a={};for(const[i,o]of Object.entries(e))t.includes(i)&&(a["uxa_"+ft(i,n)]=o);return a}(t.extra,this.shouldBeSentToMarketingTrackerVariables,this.expDataFieldsToExpIdMap);((e,t)=>{t.uxa_event_type=e,te.marketingTrackerLoggingQueue=te.marketingTrackerLoggingQueue||[],te.marketingTrackerLoggingQueue.push(t)})(ft(t.eventName,this.expEventsToExpIdMap),i),rt.isDropboxDomain()||((e=>{if(!Te.analyticsTrackingIsAllowed())return;if(null===Ne()){const t=Ae(e);document.cookie=t}})(this.analyticsId),t.extra.external_team_id=this.externalTeamId,t.extra.external_user_id=this.externalUserId),t.extra.app_name=this.appName;const o=Ne();if(o&&(t.extra.analytics_id=o),(rt.isDropboxDomain()||Ne()||this.appIsEntitled)&&this.logger.log(t.eventName,t.extra,!0,this.event_names,{}),this.canUseDevTools()){const n=parseFloat(String(nt.get($e)));if(n<=Date.now()){const e=1e3,i=(Array.isArray(nt.get(Ke))&&null!==(a=nt.get(Ke))&&void 0!==a?a:[]).filter((e=>{var t;return parseFloat(String(null===(t=null==e?void 0:e.extra)||void 0===t?void 0:t.event_ts))>=n})).concat(t).slice(-e);nt.set(Ke,i)}else Array.isArray(nt.get(Ke))&&nt.remove(Ke);try{yield new Promise((function(t,n){e(["./c_ux_analytics_styles_devtools"],t,n)}))}catch(e){throw new Error("UXAnalytics.log: failed to load devtools.module.css")}}}catch(e){throw e}}))}maybeSanitizeAppName(e){return e&&e.startsWith("file:")&&this.appPath&&this.appName?e.replace(this.appPath,`<electron-app-${this.appName}>`):e}createEvent(e,t={}){if(this.orgReferrer&&(t.org_referrer=this.maybeSanitizeAppName(this.orgReferrer)),this.visitId&&(t.visit_id=this.visitId),t.request_seq=this.requestSeq,this.httpReferrer&&(t.http_referrer=this.maybeSanitizeAppName(this.httpReferrer)),this.previousUrl&&(t.previous_url=this.maybeSanitizeAppName(this.previousUrl)),this.cmsPageUuid&&(t.cms_page_uuid=this.cmsPageUuid),t.request_id=t.request_id||this.requestId,t.url=this.maybeSanitizeAppName(t.url||rt.getCurrentURI()),location.hash&&(t.hash_fragment=location.hash),t.uxa_v=2.2,t.uxa_debug_version="2024-02-06T01:01:01",t.uxa_inclusion_method=this.inclusionMethod,this.trackingParams)for(const e of Object.keys(this.trackingParams)){const n=e.replace(/^_/,""),a=this.trackingParams[e];t[`param_${n}`]=a}return{eventName:e,extra:t}}storeDelayedLinkClick(e){if(!nt.isEnabled())return this.logOnPage(Q.linkNoSessionStorage),!1;try{nt.set(Ve,e.extra)}catch(e){return!1}return!0}saveTrackingParams(){const e=this.getTrackingParams();Object.keys(e).length?(nt.set(Xe,e),this.trackingParams=e):this.trackingParams=null}getTrackingParams(){const e=nt.get(Xe)||{},t=lt();for(const n of Z)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}getWARPInfo(){var e;return this.warpInfo=this.warpInfo||(null===(e=document.head.getElementsByTagName("meta").namedItem("dbx:warp-metadata-token"))||void 0===e?void 0:e.content),this.warpInfo||null}getTimeOnPageMs(){return it()-this.initTime}getTimeOnPage(){return Math.round(this.getTimeOnPageMs()/1e3)}getLinkRank(e){const t=e.getAttribute("href"),n=document.querySelectorAll(`a[href="${t}"]`);if(1===n.length)return 1;for(let t=0;t<n.length;t++)if(n[t]===e)return t+1;return-1}}Tt.singleton=null,t.initialize_module=function({UXAConfigs:e}){Tt.initialize(_e,e,(function(e){r.reportException({err:e,severity:r.SEVERITY.CRITICAL,tags:["ux_analytics"]})})),l.updateConfigs({requestId:e.requestId})}}));
//# sourceMappingURL=c_uxa_pagelet.js-vflnX_FdV.map
